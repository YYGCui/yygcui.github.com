<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>YYGCui</title>
  <icon>https://www.gravatar.com/avatar/8623bca8bca8b2403fc46e7694f4b7f0</icon>
  <subtitle>æ€è€ƒè‡ªç„¶çš„æœ¬æ€§ï¼ŒæŠšæ‘¸ä¸Šå¸çš„è„‰æ</subtitle>
  <link href="http://blog.cuicc.com/atom.xml" rel="self"/>
  
  <link href="http://blog.cuicc.com/"/>
  <updated>2025-09-07T08:29:31.026Z</updated>
  <id>http://blog.cuicc.com/</id>
  
  <author>
    <name>YYGCui</name>
    <email>yygcui@gmail.com</email>
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ROS2é«˜æ€§èƒ½ä½¿ç”¨</title>
    <link href="http://blog.cuicc.com/blog/2025/09/07/use-ros2-with-high-performance/"/>
    <id>http://blog.cuicc.com/blog/2025/09/07/use-ros2-with-high-performance/</id>
    <published>2025-09-07T08:12:49.000Z</published>
    <updated>2025-09-07T08:29:31.026Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨åšæ€§èƒ½ä¼˜åŒ–æ—¶ï¼Œå‘ç° ros::spin çš„çº¿ç¨‹æœ‰äº›èŠ‚ç‚¹çš„ CPU å æ¯”æ¯”è¾ƒå¤§ï¼Œé€šè¿‡ perf æŠ“å–æ€§èƒ½æ—¥å¿—åˆ†æï¼Œä¸»è¦é›†ä¸­åœ¨å‡ ç‚¹ï¼šsubscription æ³¨å†Œçš„ callback æ¶ˆè€—å¤§ï¼Œsubscription æ—¶ååºåˆ—åŒ–æ“ä½œæ¶ˆè€—å¤§ï¼Œpublish æ—¶å­˜åœ¨ä¸€å®šçš„åŠ¨æ€å†…å­˜æ¶ˆè€—ç­‰ç­‰ã€‚ä¸ºä¼˜åŒ–ä»¥ä¸Šæ€§èƒ½çƒ­ç‚¹ï¼Œæˆ‘ä»¬å…ˆç®€å•åˆ†æä¸€ä¸‹æºç ï¼Œçœ‹çœ‹ ROS2 çš„å®ç°æœºåˆ¶ã€‚</p><h2 id="æºç åˆ†æ"><a class="header-anchor" href="#æºç åˆ†æ"></a>æºç åˆ†æ</h2><h3 id="spinæµç¨‹"><a class="header-anchor" href="#spinæµç¨‹"></a>spinæµç¨‹</h3><p>åœ¨ä¸šåŠ¡èŠ‚ç‚¹ä¸­ create_subsription æ³¨å†Œ callbackï¼Œå¹¶ spin åï¼Œros çº¿ç¨‹çš„è°ƒç”¨é“¾å¤§è‡´å¦‚ä¸‹ï¼Œç­‰å¾…æ¶ˆæ¯ï¼Œè½®è¯¢æˆ–è€…äº‹ä»¶è§¦å‘ï¼Œè°ƒç”¨ subscription å¤„ç†é˜Ÿåˆ—é‡Œçš„æ¶ˆæ¯ï¼Œæ¶ˆæ¯è¿›å…¥å›è°ƒï¼Œæœ€ç»ˆè°ƒç”¨ç”¨æˆ·æ³¨å†Œçš„ callback æ‰§è¡Œå¹¶ç­‰å¾…å®Œæˆã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç”¨æˆ· callback</span><br><span class="line">   â†‘</span><br><span class="line">AnySubscriptionCallback::dispatch</span><br><span class="line">   â†‘</span><br><span class="line">SubscriptionBase::handle_message</span><br><span class="line">   â†‘</span><br><span class="line">Executor::execute_ready_executables</span><br><span class="line">   â†‘</span><br><span class="line">Executor::spin_once (wait_set è§¦å‘)</span><br><span class="line">   â†‘</span><br><span class="line">rclcpp::spin(node)</span><br></pre></td></tr></table></figure><h3 id="callback"><a class="header-anchor" href="#callback"></a>callback</h3><p>å…¶ dispatch æºç æ‘˜å½•å¦‚ä¸‹ï¼Œè¿™é‡Œé€šè¿‡ shared_ptr ä¼ å…¥ messageï¼Œæ ¹æ® ç”¨æˆ· æ³¨å†Œçš„ callback å‚æ•°ç±»å‹ï¼Œä¼ å…¥ç›¸åº”çš„å¼•ç”¨æˆ–è€…æŒ‡é’ˆç±»å‹ã€‚è¿™é‡Œå¯ä»¥çœ‹åˆ° callback è°ƒç”¨ç»“æŸæ‰èƒ½èµ°ä¸‹å»ç»“æŸ dispatchã€‚</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">dispatch</span><span class="params">(std::shared_ptr&lt;MessageT&gt; message, <span class="type">const</span> rclcpp::MessageInfo &amp; message_info)</span> </span>&#123;</span><br><span class="line">  ... <span class="comment">// çœç•¥éƒ¨åˆ†</span></span><br><span class="line">  std::<span class="built_in">visit</span>(</span><br><span class="line">      [&amp;message, &amp;message_info, <span class="keyword">this</span>](<span class="keyword">auto</span> &amp;&amp; callback) &#123;</span><br><span class="line">        <span class="keyword">using</span> T = std::<span class="type">decay_t</span>&lt;<span class="keyword">decltype</span>(callback)&gt;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">constexpr</span> (std::is_same_v&lt;T, ConstRefCallback&gt;) &#123;</span><br><span class="line">          <span class="built_in">callback</span>(*message);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="built_in">constexpr</span> (std::is_same_v&lt;T, ConstRefWithInfoCallback&gt;) &#123;</span><br><span class="line">          <span class="built_in">callback</span>(*message, message_info);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="built_in">constexpr</span> (std::is_same_v&lt;T, UniquePtrCallback&gt;) &#123;</span><br><span class="line">          <span class="built_in">callback</span>(<span class="built_in">create_unique_ptr_from_shared_ptr_message</span>(message));</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="built_in">constexpr</span> (std::is_same_v&lt;T, UniquePtrWithInfoCallback&gt;) &#123;</span><br><span class="line">          <span class="built_in">callback</span>(<span class="built_in">create_unique_ptr_from_shared_ptr_message</span>(message), message_info);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="built_in">constexpr</span> (  <span class="comment">// NOLINT[readability/braces]</span></span><br><span class="line">          std::is_same_v&lt;T, SharedConstPtrCallback&gt;||</span><br><span class="line">          std::is_same_v&lt;T, ConstRefSharedConstPtrCallback&gt;||</span><br><span class="line">          std::is_same_v&lt;T, SharedPtrCallback&gt;)</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="built_in">callback</span>(message);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="built_in">constexpr</span> (  <span class="comment">// NOLINT[readability/braces]</span></span><br><span class="line">          std::is_same_v&lt;T, SharedConstPtrWithInfoCallback&gt;||</span><br><span class="line">          std::is_same_v&lt;T, ConstRefSharedConstPtrWithInfoCallback&gt;||</span><br><span class="line">          std::is_same_v&lt;T, SharedPtrWithInfoCallback&gt;)</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="built_in">callback</span>(message, message_info);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="built_in">static_assert</span>(always_false_v&lt;T&gt;, <span class="string">&quot;unhandled callback type&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;, callback_variant_);</span><br><span class="line">    ... <span class="comment">// çœç•¥éƒ¨åˆ†</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="publish"><a class="header-anchor" href="#publish"></a>publish</h3><p>publish å‡½æ•°æœ‰ä¸¤ä¸ªé‡è½½å®ç°ï¼Œä¸€ä¸ªæ˜¯é€šè¿‡å¼•ç”¨ï¼Œä¸€ä¸ªæ˜¯é€šè¿‡æ™ºèƒ½æŒ‡é’ˆã€‚ä»æˆ‘ä»¬æ‘˜å–çš„ä»£ç ç‰‡æ®µï¼Œé€ä¸€åˆ†æä¸‹è¿™ä¿©å‡½æ•°ï¼š</p><ul><li>å¼•ç”¨ä¼ å‚ï¼š æ²¡æœ‰å¼€å¯ intra_process æ—¶ï¼Œç›´æ¥èµ° inter_processï¼›å¼€å¯ intra_process æ—¶ï¼Œæ‹·è´ msg åˆ° unique_ptrï¼Œç„¶åè°ƒç”¨ unique_ptr å‚æ•°å‡½æ•°é‡è½½ã€‚</li><li>æ™ºèƒ½æŒ‡é’ˆä¼ å‚ï¼š æ²¡æœ‰å¼€å¯ intra_process æ—¶ï¼Œç›´æ¥èµ° inter_processã€‚å¼€å¯ intra_process æ—¶ï¼Œå¦‚æœæ€»è®¢é˜…æ•°å¤šäºè¿›ç¨‹å†…è®¢é˜…æ•°ï¼Œå°† unique_ptr è½¬æˆ shared_ptrï¼Œè¿›ç¨‹å†…èµ° intra_processï¼Œshared_msg ç»™è¿›ç¨‹é—´èµ° inter_processï¼›å¦åˆ™ç›´æ¥èµ° intra_processã€‚</li></ul><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">publish</span><span class="params">(<span class="type">const</span> MessageT &amp; msg)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// RCUTILS_LOG_WARN_NAMED(ROS_PACKAGE_NAME_RCLCPP,</span></span><br><span class="line">    <span class="comment">//                        &quot;[PUB]publish msg START for topic: %s of node: %s&quot;,</span></span><br><span class="line">    <span class="comment">//                         get_topic_name(), node_name_.c_str());</span></span><br><span class="line">    <span class="keyword">auto</span> start = std::chrono::steady_clock::<span class="built_in">now</span>();</span><br><span class="line">    <span class="comment">// Avoid allocating when not using intra process.</span></span><br><span class="line">    <span class="keyword">if</span> (!intra_process_is_enabled_) &#123;</span><br><span class="line">      <span class="comment">// In this case we&#x27;re not using intra process.</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>-&gt;<span class="built_in">do_inter_process_publish</span>(msg);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Otherwise we have to allocate memory in a unique_ptr and pass it along.</span></span><br><span class="line">    <span class="comment">// As the message is not const, a copy should be made.</span></span><br><span class="line">    <span class="comment">// A shared_ptr&lt;const MessageT&gt; could also be constructed here.</span></span><br><span class="line">    <span class="keyword">auto</span> ptr = MessageAllocatorTraits::<span class="built_in">allocate</span>(*message_allocator_.<span class="built_in">get</span>(), <span class="number">1</span>);</span><br><span class="line">    MessageAllocatorTraits::<span class="built_in">construct</span>(*message_allocator_.<span class="built_in">get</span>(), ptr, msg);</span><br><span class="line">    <span class="function">MessageUniquePtr <span class="title">unique_msg</span><span class="params">(ptr, message_deleter_)</span></span>;</span><br><span class="line">    <span class="keyword">this</span>-&gt;<span class="built_in">publish</span>(std::<span class="built_in">move</span>(unique_msg));</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">void publish(std::unique_ptr&lt;MessageT, MessageDeleter&gt; msg) &#123;</span><br><span class="line">    ...</span><br><span class="line">    if (!intra_process_is_enabled_) &#123;</span><br><span class="line">      this-&gt;do_inter_process_publish(*msg);</span><br><span class="line">      return;</span><br><span class="line">    &#125;</span><br><span class="line">    // If an interprocess subscription exist, then the unique_ptr is promoted</span><br><span class="line">    // to a shared_ptr and published.</span><br><span class="line">    // This allows doing the intraprocess publish first and then doing the</span><br><span class="line">    // interprocess publish, resulting in lower publish-to-subscribe latency.</span><br><span class="line">    // It&#x27;s not possible to do that with an unique_ptr,</span><br><span class="line">    // as do_intra_process_publish takes the ownership of the message.</span><br><span class="line">    bool inter_process_publish_needed =</span><br><span class="line">      get_subscription_count() &gt; get_intra_process_subscription_count();</span><br><span class="line"></span><br><span class="line">    if (inter_process_publish_needed) &#123;</span><br><span class="line">      auto shared_msg = this-&gt;do_intra_process_publish_and_return_shared(std::move(msg));</span><br><span class="line">      this-&gt;do_inter_process_publish(*shared_msg);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      this-&gt;do_intra_process_publish(std::move(msg));</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><h2 id="ä¼˜åŒ–æ–¹æ³•"><a class="header-anchor" href="#ä¼˜åŒ–æ–¹æ³•"></a>ä¼˜åŒ–æ–¹æ³•</h2><h3 id="é™æ—¶å»¶"><a class="header-anchor" href="#é™æ—¶å»¶"></a>é™æ—¶å»¶</h3><p>èŠ‚ç‚¹å†… spin æµç¨‹æ˜¯å•çº¿ç¨‹å¤„ç†çš„ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥èŠ‚ç‚¹çš„æ‰€æœ‰ subscription çš„ callback æ˜¯ä¸²è¡Œè°ƒç”¨çš„ï¼Œ callback çš„å¤„ç†æ—¶é—´ç›´æ¥å½±å“è¯¥èŠ‚ç‚¹çš„æ•´ä½“æ—¶é—´ã€‚<br>é‚£ä¹ˆè¿™é‡Œä¼˜åŒ–æ–¹å¼æ¯”è¾ƒç›´æ¥ï¼Œcallback åªåšæ¶ˆæ¯çš„æ¥æ”¶ï¼Œä¸æ‰§è¡Œé€»è¾‘å¤„ç†ï¼Œå¤„ç†ç”±å…¶ä»–çº¿ç¨‹æ¥åšã€‚</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MsgCallback</span><span class="params">(<span class="type">const</span> xxx::msg::xxx::ConstSharedPtr msg)</span> </span>&#123;</span><br><span class="line">   ...</span><br><span class="line">   <span class="comment">// ç®€å•ä¸¾ä¾‹ï¼ŒæŠŠ msg æŒ‡é’ˆå­˜ä¸€ä¸‹ä¾›å…¶ä»–çº¿ç¨‹ä½¿ç”¨</span></span><br><span class="line">   xxx_msg_ = msg;</span><br><span class="line">   ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å‡æ‹·è´"><a class="header-anchor" href="#å‡æ‹·è´"></a>å‡æ‹·è´</h3><p>ä¸Šé¢åˆ†æäº† publish çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œå¯ä»¥çœ‹åˆ°å¦‚æœä½¿ç”¨å¼•ç”¨ä¼ å‚ï¼Œåœ¨è¿›ç¨‹å†…é€šä¿¡ä¸‹ä¼šå¤šä¸€æ¬¡æ‹·è´ï¼›ç„¶ååœ¨æ™ºèƒ½æŒ‡é’ˆä¼ å‚æ—¶ï¼Œè·¨è¿›ç¨‹é€šä¿¡å†å¤šä¸€æ¬¡æ‹·è´ã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ unique_ptr ä¼ å‚ç›´æ¥å‡å…ä¸€æ¬¡æ‹·è´ã€‚</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">\\ ç¤ºä¾‹ï¼š</span><br><span class="line">std::unique_ptr&lt;xxx::msg&gt; msg;</span><br><span class="line">msg-&gt;xxx = xxx;</span><br><span class="line">node-&gt;<span class="built_in">publish</span>(std::<span class="built_in">move</span>(msg));</span><br></pre></td></tr></table></figure><h3 id="å…±äº«å†…å­˜"><a class="header-anchor" href="#å…±äº«å†…å­˜"></a>å…±äº«å†…å­˜</h3><p><a href="https://design.ros2.org/articles/intraprocess_communications.html">è¿›ç¨‹å†…é€šä¿¡</a> å¯ä»¥ä½¿è¿›ç¨‹å†…çš„ pub - sub é—´ç›´æ¥å…±äº«å†…å­˜ï¼Œå‡å°‘äº†æ¶ˆæ¯æ‹·è´ã€åºåˆ—åŒ–ã€ååºåˆ—åŒ–çš„èµ„æºä½¿ç”¨ã€‚æ‰“å¼€è¿›ç¨‹å†…é€šä¿¡çš„æ–¹å¼å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">\\ ç¤ºä¾‹ï¼š</span><br><span class="line">rclcpp::NodeOptions node_options;</span><br><span class="line">node_options.<span class="built_in">use_intra_process_comms</span>(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">\\ ä½¿ç”¨ç¤ºä¾‹<span class="number">1</span> - ç›´æ¥åˆ›å»ºnodeï¼š</span><br><span class="line">rclcpp::Node::SharedPtr node = rclcpp::Node::<span class="built_in">make_shared</span>(<span class="string">&quot;node_name&quot;</span>, <span class="string">&quot;/namespace&quot;</span>, node_options);</span><br><span class="line"></span><br><span class="line">\\ ä½¿ç”¨ç¤ºä¾‹<span class="number">2</span> - XXXNodeç»§æ‰¿rclcpp nodeï¼š</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">XXXNode</span> : <span class="keyword">public</span> rclcpp::Node &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">XXXNode</span>(<span class="type">const</span> std::string &amp;node_name, <span class="type">const</span> std::string &amp;name_space, <span class="type">const</span> rclcpp::NodeOptions&amp; node_options)</span><br><span class="line">    : rclcpp::<span class="built_in">Node</span>(node_name, name_space, node_options) &#123;....&#125;</span><br><span class="line">    </span><br><span class="line">XXXNode node = std::<span class="built_in">make_shared</span>&lt;XXXNode&gt;(<span class="string">&quot;node_name&quot;</span>, <span class="string">&quot;/namespace&quot;</span>, option);</span><br></pre></td></tr></table></figure><p><strong>ç‰¹åˆ«æ³¨æ„</strong>ï¼šéœ€è¦ç¡®ä¿è¿›ç¨‹å†…è®¢é˜…æ¶ˆæ¯æ—¶ä¸ä¼šä¿®æ”¹åŸæ¶ˆæ¯ï¼Œå› ä¸ºè¯¥å¯ç”¨é…ç½®åè¿›ç¨‹å†… publish èŠ‚ç‚¹ å’Œæ‰€æœ‰ subcription èŠ‚ç‚¹æ˜¯å…±äº«å†…å­˜ä½¿ç”¨çš„ã€‚</p><p>callback è¦æ±‚å‚æ•°ä¸¤å±‚constä¿è¯æŒ‡é’ˆå’Œæ¶ˆæ¯å†…å®¹æ— æ³•è¢«ä¿®æ”¹ï¼Œå¦‚æœé€šè¿‡æŒ‡é’ˆä¼ é€’ç»™å…¶ä»–æ–¹æ³•éƒ½åº”è¯¥æ˜¯ constï¼Œä¸è¦ cast æ‰ã€‚</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">\\ ç¬¬ä¸€ä¸ª<span class="type">const</span> ä¿è¯ pträ¸èƒ½è¢«ä¿®æ”¹</span><br><span class="line">\\ ç¬¬äºŒä¸ª<span class="type">const</span>/ConstSharedPtr ä¿è¯ ptr æŒ‡å‘çš„å†…å®¹ä¸èƒ½è¢«ä¿®æ”¹.</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">callback</span><span class="params">(<span class="type">const</span> xxx::msg::yyy::ConstSharedPtr msg)</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line">\\ æˆ–</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">callback</span><span class="params">(<span class="type">const</span> std::shared_ptr&lt;xxx::msg::yyy <span class="type">const</span>&gt; msg &#123;</span></span></span><br><span class="line"><span class="params"><span class="function">    ...</span></span></span><br><span class="line"><span class="params"><span class="function">&#125;</span></span></span><br></pre></td></tr></table></figure><p>ä¸¤ç§ç±»å‹çš„åŒºåˆ«å¦‚ä¸‹ï¼š</p><table><thead><tr><th>ç±»å‹</th><th>ç‰¹ç‚¹</th><th>æ¨èåœºæ™¯</th></tr></thead><tbody><tr><td><code>SharedPtr</code></td><td>å¯ä»¥ä¿®æ”¹æ¶ˆæ¯</td><td>ä½ ç¡®å®è¦åœ¨å›è°ƒé‡Œä¿®æ”¹æ¶ˆæ¯ï¼ˆ<strong>æå°‘è§</strong>ï¼‰ï¼Œæˆ–è€…æƒ³è¦ä¼ ç»™å…¶ä»– API è¦æ±‚ <code>shared_ptr&lt;T&gt;</code></td></tr><tr><td><code>ConstSharedPtr</code></td><td>ä¸å¯ä»¥ä¿®æ”¹æ¶ˆæ¯</td><td><strong>ç»å¤§å¤šæ•°æƒ…å†µ</strong>ï¼Œè®¢é˜…è€…åªæ˜¯è¯»å–æ¶ˆæ¯ï¼Œä¸ä¿®æ”¹å†…å®¹</td></tr></tbody></table><h3 id="ä»£ç†è®¢é˜…"><a class="header-anchor" href="#ä»£ç†è®¢é˜…"></a>ä»£ç†è®¢é˜…</h3><p>å‰é¢è®²åˆ°è¿›ç¨‹å†…é€šä¿¡å¯ä»¥å®ç°é›¶æ‹·è´ï¼Œå…åºåˆ—åŒ–ååºåˆ—åŒ–ã€‚å¾ˆå¤šåœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬æ˜¯è¿›ç¨‹å†…çš„å„ä¸ªèŠ‚ç‚¹ subscribe äº†å¦ä¸€ä¸ªè¿›ç¨‹çš„ publish çš„ msgï¼Œè¿™ç§æ¨¡å¼ä¸‹ï¼Œæ¯ä¸ª subscribe çš„èŠ‚ç‚¹éƒ½è¦ååºåˆ—åŒ–ä¸€ä»½ï¼Œå¢åŠ äº†é‡å¤çš„èµ„æºæ¶ˆè€—ã€‚</p><p>å¦‚ä½•é¿å…è¿™ç§æƒ…å†µï¼Œå»æ‰é‡å¤çš„ååºåˆ—åŒ–èµ„æºæ¶ˆè€—å‘¢ï¼Ÿ æˆ‘ä»¬å¯ä»¥å¢åŠ ä¸€ä¸ªä¸­ç»§èŠ‚ç‚¹ node_relayï¼Œæ¥æ¥æ”¶ process1 è¿›ç¨‹ publish çš„ /ns1/topic1ï¼Œåœ¨ process2 ä¸­ é€šè¿‡ node_relay å…±äº«ç»™æ‰€æœ‰åŒè¿›ç¨‹å†…è®¢é˜…çš„èŠ‚ç‚¹ï¼Œé—´æ¥å®ç° intra_process é€šä¿¡ã€‚å¦‚ä¸‹å›¾ï¼š</p><img width="450" height="171" alt="ros_relay_agent" src="/images/ros2/ros2-relay-node.jpg" /><p>ç”±äºæ–°å¢åŠ äº†ä¸€ä¸ªé¢å¤–çš„èŠ‚ç‚¹ï¼Œæ‰€ä»¥åœ¨å¼•å…¥è¿™ç§ä¼˜åŒ–æ–¹å¼æ—¶ï¼Œéœ€è¦è¯„ä¼°ä¸‹è¯¥ä¸­ç»§èŠ‚ç‚¹çš„èµ„æºæ¶ˆè€—ï¼Œå’Œå…¶ä»–èŠ‚ç‚¹ååºåˆ—åŒ–æ¶ˆè€—ã€‚å–æœ€ä¼˜è§£ï¼Œå¯èƒ½æ”¶åˆ° subscription çš„æ•°é‡ã€msg çš„å¤§å°ã€topic çš„å¸§ç‡ç­‰çš„å½±å“ã€‚</p><p>åœ¨å¼€å‘å®ç°ä¸­ï¼Œprocess2 é‡Œçš„èŠ‚ç‚¹å¯ä»¥æŒ‰å®é™…æƒ…å†µè®¢é˜…<code>/ns1/topic1</code>, é€šè¿‡ remap é…ç½®å±è”½æ‰<code>/relay_ns1/topic1</code>çš„å·®å¼‚ï¼Œä»¥æ–¹ä¾¿ä¸Šè¿°æ€§èƒ½è¯„ä¼°ï¼ŒåŠåç»­çš„å…¶ä»–ç»„åˆã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å‘½ä»¤è¡Œå‚æ•°</span><br><span class="line">./bin/process2 --ros-args -r /ns1/topic1:=/relay_ns1/topic1</span><br></pre></td></tr></table></figure><p>ä¸Šè¿° remap ä½œç”¨äº process2 é‡Œçš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œæˆ‘ä»¬åªæœŸæœ›ä½œç”¨åŸŸ node2* èŠ‚ç‚¹ï¼Œä¸­ç»§èŠ‚ç‚¹è¿˜è¦æ­£å¸¸å¤„ç† /ns1/topic1ï¼Œæ‰€ä»¥ä¸­ç»§èŠ‚ç‚¹éœ€è¦å±è”½æ‰å‚æ•°è®¾ç½®ã€‚</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸­ç»§èŠ‚ç‚¹é‡å»ºnodeç¤ºä¾‹</span></span><br><span class="line">rclcpp::NodeOptions node_options;</span><br><span class="line">node_options.<span class="built_in">use_global_arguments</span>(<span class="literal">false</span>); <span class="comment">// å±è”½å…¨å±€å‚æ•°</span></span><br><span class="line">node_options.<span class="built_in">use_intra_process_comms</span>(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">\\ ä½¿ç”¨ç¤ºä¾‹<span class="number">1</span> - ç›´æ¥åˆ›å»ºnodeï¼š</span><br><span class="line">rclcpp::Node::SharedPtr relay_node = rclcpp::Node::<span class="built_in">make_shared</span>(<span class="string">&quot;node_name&quot;</span>, <span class="string">&quot;/ns1&quot;</span>, node_options);</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p><em>æ³¨ï¼šåœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œå‘ç°å³ä½¿å¼€å¯äº†è¿›ç¨‹å†…é€šä¿¡ï¼Œå¹¶é…ç½®äº†ä»£ç†è®¢é˜…ï¼Œsubscription è¿˜æ˜¯æœ‰ååºåˆ—åŒ–çš„å­˜åœ¨ï¼Œè¿™æ˜¯ ROS åº•å±‚ DDS é€šä¿¡å±‚å¯¼è‡´çš„ã€‚è¿™é‡Œå¯èƒ½éœ€è¦äºŒå¼€æ‰èƒ½è§£å†³ï¼Œæš‚ä¸”ä¸è¡¨ã€‚</em></p><h2 id="å‚è€ƒèµ„æ–™"><a class="header-anchor" href="#å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://github.com/ros2/ros2">ros2 æºä»£ç </a></li><li><a href="https://design.ros2.org/articles/intraprocess_communications.html">ros2 è¿›ç¨‹å†…é€šä¿¡</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;åœ¨åšæ€§èƒ½ä¼˜åŒ–æ—¶ï¼Œå‘ç° ros::spin çš„çº¿ç¨‹æœ‰äº›èŠ‚ç‚¹çš„ CPU å æ¯”æ¯”è¾ƒå¤§ï¼Œé€šè¿‡ perf æŠ“å–æ€§èƒ½æ—¥å¿—åˆ†æï¼Œä¸»è¦é›†ä¸­åœ¨å‡ ç‚¹ï¼šsubscription æ³¨å†Œçš„ callback æ¶ˆè€—å¤§ï¼Œsubscription æ—¶ååºåˆ—åŒ–æ“ä½œæ¶ˆè€—å¤§ï¼Œpublish æ—¶å­˜åœ¨ä¸€å®šçš„åŠ¨æ€å†…å­˜</summary>
      
    
    
    
    <category term="æŠ€æœ¯ç§¯ç´¯" scheme="http://blog.cuicc.com/categories/%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/"/>
    
    
    <category term="æ™ºèƒ½é©¾é©¶" scheme="http://blog.cuicc.com/tags/%E6%99%BA%E8%83%BD%E9%A9%BE%E9%A9%B6/"/>
    
    <category term="æ€§èƒ½ä¼˜åŒ–" scheme="http://blog.cuicc.com/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
    <category term="ROS2" scheme="http://blog.cuicc.com/tags/ROS2/"/>
    
  </entry>
  
  <entry>
    <title>Eigené«˜æ€§èƒ½ä½¿ç”¨</title>
    <link href="http://blog.cuicc.com/blog/2025/08/31/use-eigen-with-high-performance/"/>
    <id>http://blog.cuicc.com/blog/2025/08/31/use-eigen-with-high-performance/</id>
    <published>2025-08-31T03:34:24.000Z</published>
    <updated>2025-09-07T08:22:32.173Z</updated>
    
    <content type="html"><![CDATA[<p>ä¹‹æ‰€ä»¥å†™è¿™ä¸ªè¯é¢˜ï¼Œæ˜¯å› ä¸ºåœ¨å®é™…å·¥ä½œä¸­é‡åˆ°äº†ç›¸å…³çš„é—®é¢˜ï¼Œæ¯”å¦‚åœ¨å®šä½coredumpé—®é¢˜æ—¶å‘ç°æ˜¯å› ä¸ºEigenå†…å­˜æœªå¯¹é½å¯¼è‡´ï¼Œæ¯”å¦‚åœ¨ä¼˜åŒ–æ€§èƒ½æ—¶å‘ç°æœ‰éšå«çš„åŠ¨æ€å†…å­˜ç”³è¯·æ˜¯å› ä¸ºä½¿ç”¨åŠ¨æ€çŸ©é˜µå¯¼è‡´â€¦ åŸºäºä¸Šè¿°å®é™…é—®é¢˜ï¼Œå‘ç°å¾ˆå¤šäººåªæ˜¯ä¼šä½¿ç”¨è¿™ä¸ªåº“ï¼Œä½†æ˜¯ä¸çŸ¥é“æ€ä¹ˆä½¿ç”¨æ›´é«˜æ•ˆï¼Œæ‰€ä»¥æ•´ç†äº†ä»¥ä¸‹è§„èŒƒã€‚</p><blockquote><p>Eigen æ˜¯ä¸€ä¸ªç”¨äºçº¿æ€§ä»£æ•°çš„ C++ æ¨¡æ¿åº“ï¼šåŒ…æ‹¬çŸ©é˜µã€å‘é‡ã€æ•°å€¼æ±‚è§£å™¨ä»¥åŠç›¸å…³ç®—æ³•ã€‚</p><footer><strong>https://eigen.tuxfamily.org/index.php?title=Main_Page</strong></footer></blockquote><h2 id="ä¸€ã€å¤´æ–‡åŒ…å«è¦æ±‚"><a class="header-anchor" href="#ä¸€ã€å¤´æ–‡åŒ…å«è¦æ±‚"></a>ä¸€ã€å¤´æ–‡åŒ…å«è¦æ±‚</h2><p>æŒ‰éœ€åŒ…å«ï¼Œ åªåŒ…å«éœ€è¦çš„ï¼š</p>  <figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Eigen/Core&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Eigen/Dense&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Eigen/Geometry&gt;</span>  <span class="comment">// Quaternion, Transform</span></span></span><br></pre></td></tr></table></figure><p>ğŸš« ç¦ç”¨ <code>using namespace Eigen</code>; é¿å…åç§°å†²çª</p><h2 id="äºŒã€ç±»å‹é€‰æ‹©å’Œåˆå§‹åŒ–"><a class="header-anchor" href="#äºŒã€ç±»å‹é€‰æ‹©å’Œåˆå§‹åŒ–"></a>äºŒã€ç±»å‹é€‰æ‹©å’Œåˆå§‹åŒ–</h2><h3 id="ä¼˜å…ˆé€‰æ‹©å›ºå®šå¤§å°çŸ©é˜µï¼š"><a class="header-anchor" href="#ä¼˜å…ˆé€‰æ‹©å›ºå®šå¤§å°çŸ©é˜µï¼š"></a>ä¼˜å…ˆé€‰æ‹©å›ºå®šå¤§å°çŸ©é˜µï¼š</h3><table><thead><tr><th>å‘é‡/çŸ©é˜µ</th><th>ç±»å‹æ¨è</th></tr></thead><tbody><tr><td>2D/3D å‘é‡</td><td><code>Eigen::Vector2f / Vector2dã€Vector3f / Vector3d</code></td></tr><tr><td>å°çŸ©é˜µï¼ˆ&lt;= 4x4ï¼‰</td><td><code>Matrix3f, Matrix4d</code></td></tr><tr><td>å¤§çŸ©é˜µï¼ˆ&gt; 4x4ï¼‰</td><td><code>MatrixXf, MatrixXd</code>ï¼Œä½†æ³¨æ„ç»´åº¦ã€æ€§èƒ½</td></tr></tbody></table><p>ğŸš« ä¸æ¨è Matrix&lt;double, 3, 1&gt;ï¼›æ¨èç”¨ Vector3dï¼Œç®€æ´å¯è¯»æ€§é«˜ã€‚</p><h3 id="åˆå§‹åŒ–"><a class="header-anchor" href="#åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">Eigen::Vector3d <span class="title">pos</span><span class="params">(<span class="number">1.0</span>, <span class="number">2.0</span>, <span class="number">3.0</span>)</span></span>;</span><br><span class="line">Eigen::Matrix3d rot = Eigen::Matrix3d::<span class="built_in">Identity</span>();</span><br></pre></td></tr></table></figure><p>ç”¨ setZero(), setIdentity() åˆå§‹åŒ–ï¼Œä¸ç”¨æ‰‹åŠ¨å¾ªç¯æ¸…é›¶ã€‚</p><p>ä½¿ç”¨ reserve() å’Œ conservativeResize() æ—¶è¦å°å¿ƒï¼Œå®ƒä»¬å¯èƒ½é¢‘ç¹è§¦å‘ reallocationã€‚</p><h2 id="ä¸‰ã€å‚æ•°ä¼ é€’"><a class="header-anchor" href="#ä¸‰ã€å‚æ•°ä¼ é€’"></a>ä¸‰ã€å‚æ•°ä¼ é€’</h2><table><thead><tr><th>ç›®çš„</th><th>å†™æ³•</th><th>æ¨èç†ç”±</th></tr></thead><tbody><tr><td>åªè¯»ï¼ˆä¼ å‚ï¼‰</td><td>const Eigen::Vector3d&amp;</td><td>é›¶æ‹·è´ï¼Œæ€§èƒ½é«˜</td></tr><tr><td>å¯æ¥å—è¡¨è¾¾å¼/å­å—</td><td>const Eigen::Ref&lt;const Eigen::Vector3d&gt;&amp;</td><td>é€šç”¨æ¥å£é€‚ç”¨</td></tr><tr><td>å¯ä¿®æ”¹</td><td>Eigen::Vector3d&amp;</td><td>å…è®¸å‡½æ•°ä¿®æ”¹å€¼</td></tr><tr><td>å¯ä¿®æ”¹ + è¡¨è¾¾å¼</td><td>Eigen::Ref&lt;Eigen::Vector3d&gt;</td><td>ä¿®æ”¹ä¸´æ—¶å—ç­‰å¤æ‚ç»“æ„</td></tr></tbody></table><p>ğŸš« ä¸æ¨èå€¼ä¼ å‚ï¼Œå¤šä¸€æ¬¡æ‹·è´ï¼›æ¨èä½¿ç”¨å¼•ç”¨ä¼ å‚ã€‚</p><h2 id="å››ã€æ€§èƒ½ä¼˜åŒ–"><a class="header-anchor" href="#å››ã€æ€§èƒ½ä¼˜åŒ–"></a>å››ã€æ€§èƒ½ä¼˜åŒ–</h2><h3 id="1-é¿å…ä½¿ç”¨åŠ¨æ€å¤§å°çŸ©é˜µå¤„ç†å°ç»´åº¦çŸ©é˜µ"><a class="header-anchor" href="#1-é¿å…ä½¿ç”¨åŠ¨æ€å¤§å°çŸ©é˜µå¤„ç†å°ç»´åº¦çŸ©é˜µ"></a>1. é¿å…ä½¿ç”¨åŠ¨æ€å¤§å°çŸ©é˜µå¤„ç†å°ç»´åº¦çŸ©é˜µ</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸æ¨è</span></span><br><span class="line"><span class="function">Eigen::MatrixXd <span class="title">A</span><span class="params">(<span class="number">3</span>,<span class="number">3</span>)</span></span>;</span><br><span class="line"><span class="comment">// æ¨è</span></span><br><span class="line">Eigen::Matrix3d A;</span><br></pre></td></tr></table></figure><p>ğŸš« é¿å…ä½¿ç”¨åŠ¨æ€å¤§å°çŸ©é˜µï¼ŒåŠ¨æ€å¤§å°çŸ©é˜µï¼Œæ¯æ¬¡éƒ½ä¼šåŠ¨æ€ç”³è¯·å†…å­˜malloc/free</p><h3 id="2-é¿å…ä¸´æ—¶ç‰©ä»¶"><a class="header-anchor" href="#2-é¿å…ä¸´æ—¶ç‰©ä»¶"></a>2. é¿å…ä¸´æ—¶ç‰©ä»¶</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸æ¨èï¼šäº§ç”Ÿå¤šä¸ªä¸´æ—¶è¡¨è¾¾å¼</span></span><br><span class="line"><span class="comment">// C.inverseä¼šäº§ç”Ÿä¸´æ—¶çŸ©é˜µï¼Œç„¶åä¸¤ä¸ªä¹˜æ³•åˆ†åˆ«äº§ç”Ÿä¸´æ—¶çŸ©é˜µ</span></span><br><span class="line"><span class="comment">// auto ä¼šäº§ç”ŸåŠ¨æ€çŸ©é˜µï¼Œç”³è¯·å†…å­˜</span></span><br><span class="line"><span class="keyword">auto</span> result = A * B + C.<span class="built_in">inverse</span>() * D;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨è</span></span><br><span class="line">Eigen::Matrix3d tmp = C.<span class="built_in">inverse</span>() * D;</span><br><span class="line">Eigen::Matrix3d result = A * B + tmp;</span><br><span class="line"><span class="comment">// æ€§èƒ½æ›´å¥½çš„å†™æ³•</span></span><br><span class="line">Eigen::Matrix3d result = C.<span class="built_in">inverse</span>() * D;</span><br><span class="line">result.<span class="built_in">noalias</span>() += A * B;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ğŸš« é¿å…ä½¿ç”¨autoï¼Œ auto é»˜è®¤ä½¿ç”¨åŠ¨æ€å¤§å°çŸ©é˜µï¼Œä¼šåŠ¨æ€ç”³è¯·å†…å­˜</p><h3 id="3-åˆ©ç”¨è¡¨è¾¾å¼æ¨¡æ¿"><a class="header-anchor" href="#3-åˆ©ç”¨è¡¨è¾¾å¼æ¨¡æ¿"></a>3. åˆ©ç”¨è¡¨è¾¾å¼æ¨¡æ¿</h3><p><strong>é“¾å¼è¡¨è¾¾å¼</strong>ï¼šåˆå¹¶æ“ä½œä»¥å‡å°‘ä¸´æ—¶å˜é‡ã€‚</p><p>åªè¦å³ä¾§è¡¨è¾¾å¼ä¸æ¶‰åŠæ±‚é€†<code>inverse()</code>ã€ä¸é‡å¤ä½¿ç”¨å·¦å€¼å˜é‡ï¼Œå°±é‡‡ç”¨åˆå¹¶å†™æ³•ï¼ŒEigen å†…éƒ¨ä¼˜åŒ–ï¼Œå†…å­˜è®¿é—®å°‘</p> <figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸æ¨èï¼šå¤šæ¬¡å†…å­˜åˆ†é…ï¼Œç”Ÿæˆä¸´æ—¶å˜é‡</span></span><br><span class="line">temp1 = A * B;</span><br><span class="line">temp2 = C * D;</span><br><span class="line">result = temp1 + temp2; </span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨èï¼šEigen åˆå¹¶è®¡ç®—</span></span><br><span class="line">result = A * B + C * D;</span><br></pre></td></tr></table></figure><p>ğŸš« å°½é‡ä¸è¦äººä¸ºæ‹†åˆ†è¡¨è¾¾å¼ï¼Œé™¤éæ¶‰åŠæ±‚é€†ã€å †å ç­‰ï¼Œå¯ä»¥æ¢ä¸ªæ›´å¥½çš„å†™æ³•</p> <figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">result = result + A * B;  <span class="comment">// å¯èƒ½å¯¼è‡´åˆ«åå†²çªå’Œæ…¢é€Ÿè·¯å¾„</span></span><br><span class="line">result = result.<span class="built_in">eval</span>() + A * B;  <span class="comment">// å¼ºåˆ¶ä¸­é—´ç»“æœä¿å­˜ï¼Œé¿å…é—®é¢˜</span></span><br><span class="line">result.<span class="built_in">noalias</span>() += A * B; <span class="comment">// æ›´é«˜æ•ˆ</span></span><br></pre></td></tr></table></figure><p>ğŸš« é¿å… .eval()ï¼Œé™¤éä½ çœŸçš„æƒ³ materialize ç»“æœ</p><h3 id="4-ä½¿ç”¨-noalias-é˜²æ­¢å¤šä½™å†…å­˜æ‹·è´"><a class="header-anchor" href="#4-ä½¿ç”¨-noalias-é˜²æ­¢å¤šä½™å†…å­˜æ‹·è´"></a>4. ä½¿ç”¨ <code>.noalias()</code> é˜²æ­¢å¤šä½™å†…å­˜æ‹·è´</h3><p>å·¦å€¼å’Œå³å€¼æ²¡æœ‰æ··å æ—¶å¯ç”¨ï¼Œæ²¡æœ‰åˆ«åå…³ç³»ï¼ˆå¦‚ C != A &amp;&amp; C != Bï¼‰</p><p>é¿å… Eigen å†…éƒ¨è‡ªåŠ¨åˆ«åæ£€æµ‹ï¼ˆruntime checkï¼‰ï¼Œç›´æ¥å‘Šè¯‰å®ƒ C ä¸å³ä¾§æ²¡æœ‰å…±äº«å†…å­˜ï¼›</p><p>ç¼–è¯‘æ—¶å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œå°¤å…¶åœ¨<strong>å¤§çŸ©é˜µ</strong>è®¡ç®—ä¸­æ›´æ˜æ˜¾ã€‚</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ…¢</span></span><br><span class="line">C = A * B;</span><br><span class="line"><span class="comment">// å¿«</span></span><br><span class="line">C.<span class="built_in">noalias</span>() = A * B;</span><br></pre></td></tr></table></figure><h3 id="5-é¿å…ç›´æ¥åçŸ©é˜µ"><a class="header-anchor" href="#5-é¿å…ç›´æ¥åçŸ©é˜µ"></a>5. é¿å…ç›´æ¥åçŸ©é˜µ</h3><p>çŸ©é˜µæ±‚é€†ä»£ä»·é«˜ã€æ•°å€¼ä¸ç¨³å®šï¼Œå»ºè®®æ›¿æ¢ä¸º solve() ç³»åˆ—ï¼Œæ ¹æ®çŸ©é˜µç±»å‹é€‰æ‹©åˆé€‚çš„æ±‚è§£å™¨</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸æ¨è</span></span><br><span class="line">x = A.<span class="built_in">inverse</span>() * b;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨èï¼š A å¿…é¡»æ˜¯å¯¹ç§°æ­£å®šçŸ©é˜µï¼ˆå¦åˆ™ .ldlt() ä¼šå¤±è´¥æˆ–è€…è¿”å›é”™è¯¯ç»“æœï¼‰</span></span><br><span class="line">x = A.<span class="built_in">ldlt</span>().<span class="built_in">solve</span>(b);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šç”¨çŸ©é˜µ</span></span><br><span class="line"><span class="comment">// é€‚ç”¨äº çŸ©é˜µè¡¨è¾¾å¼ï¼Œæ¯”å¦‚ Eigen::MatrixXd</span></span><br><span class="line"><span class="function">Eigen::MatrixXd <span class="title">A</span><span class="params">(<span class="number">3</span>, <span class="number">3</span>)</span></span>;</span><br><span class="line"><span class="function">Eigen::VectorXd <span class="title">b</span><span class="params">(<span class="number">3</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">Eigen::VectorXd x = A.<span class="built_in">partialPivLu</span>().<span class="built_in">solve</span>(b);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å›ºå®šç±»å‹çš„å†™æ³•</span></span><br><span class="line">Eigen::Matrix3d A;</span><br><span class="line">Eigen::Vector3d b;</span><br><span class="line"></span><br><span class="line"><span class="function">Eigen::PartialPivLU&lt;Eigen::Matrix3d&gt; <span class="title">lu</span><span class="params">(A)</span></span>;</span><br><span class="line">Eigen::Vector3d x = lu.<span class="built_in">solve</span>(b);</span><br></pre></td></tr></table></figure><p><strong>å¸¸è§çŸ©é˜µç±»å‹è¯´æ˜ï¼š</strong></p><table><thead><tr><th>æ–¹æ³•</th><th>é€‚ç”¨çŸ©é˜µç±»å‹</th><th>ç›¸å¯¹é€Ÿåº¦</th><th>ç¨³å®šæ€§</th><th>ç‰¹æ®Šè¦æ±‚</th><th>é€‚ç”¨è§„æ¨¡</th></tr></thead><tbody><tr><td>inverse()</td><td>é€šç”¨</td><td>åŸºå‡†</td><td>ä¸­ç­‰</td><td>æ— </td><td>&lt;= 100x100</td></tr><tr><td>LU</td><td>é€šç”¨æ–¹é˜µ</td><td>1.2x</td><td>é«˜</td><td>å¯é€†çŸ©é˜µ</td><td>100-1000</td></tr><tr><td>LDLT</td><td>å¯¹ç§°çŸ©é˜µ</td><td>2.0x</td><td>é«˜</td><td>å¯¹ç§°</td><td>-</td></tr><tr><td>LLT</td><td>å¯¹ç§°æ­£å®š</td><td>2.3x</td><td>å¾ˆé«˜</td><td>å¯¹ç§°æ­£å®š</td><td>-</td></tr></tbody></table><h3 id="6-æ•°æ®æ˜ å°„ä¸é›¶æ‹·è´"><a class="header-anchor" href="#6-æ•°æ®æ˜ å°„ä¸é›¶æ‹·è´"></a>6. æ•°æ®æ˜ å°„ä¸é›¶æ‹·è´</h3><p>Eigen::Mapï¼šç›´æ¥æ“ä½œå¤–éƒ¨å†…å­˜ï¼Œé¿å…å¤åˆ¶ã€‚</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">double</span> data[<span class="number">16</span>];</span><br><span class="line"><span class="function">Eigen::Map&lt;Eigen::Matrix4d&gt; <span class="title">matrix</span><span class="params">(data)</span></span>;  <span class="comment">// æ˜ å°„æ•°ç»„ä¸º 4x4 çŸ©é˜µ</span></span><br></pre></td></tr></table></figure><h3 id="7-é€å…ƒç´ æ“ä½œä¼˜åŒ–"><a class="header-anchor" href="#7-é€å…ƒç´ æ“ä½œä¼˜åŒ–"></a>7. é€å…ƒç´ æ“ä½œä¼˜åŒ–</h3><p>ä½¿ç”¨ .array() æˆ–é€å…ƒç´ å‡½æ•°ï¼ˆå¦‚ .cwiseProduct()ï¼‰ã€‚</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é€å…ƒç´ ä¹˜æ³•</span></span><br><span class="line">result = a.<span class="built_in">array</span>() * b.<span class="built_in">array</span>();</span><br><span class="line"><span class="comment">// æˆ–ä½¿ç”¨ cwiseProduct</span></span><br><span class="line">result = a.<span class="built_in">cwiseProduct</span>(b);</span><br></pre></td></tr></table></figure><h3 id="8-å¤åˆèµ‹å€¼è¿ç®—ç¬¦"><a class="header-anchor" href="#8-å¤åˆèµ‹å€¼è¿ç®—ç¬¦"></a>8. å¤åˆèµ‹å€¼è¿ç®—ç¬¦</h3><p>ä¼˜å…ˆä½¿ç”¨ +=ã€-= ç›´æ¥ä¿®æ”¹åŸå˜é‡ã€‚</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸æ¨èï¼šä¸´æ—¶å˜é‡ã€å¤šä½™çš„å†…å­˜æ‹·è´</span></span><br><span class="line">A = A + B * C æ›´é«˜æ•ˆ  </span><br><span class="line"><span class="comment">// æ¨èï¼šè¡¨è¾¾å¼ä¼˜åŒ–ã€å¤ç”¨å†…å­˜</span></span><br><span class="line">A += B * C;  </span><br></pre></td></tr></table></figure><h3 id="9-å¹¶è¡ŒåŒ–åŠ é€Ÿ"><a class="header-anchor" href="#9-å¹¶è¡ŒåŒ–åŠ é€Ÿ"></a>9. å¹¶è¡ŒåŒ–åŠ é€Ÿ</h3><p>Eigen åœ¨è¿›è¡Œä¸€äº›çŸ©é˜µè¿ç®—ï¼ˆå¦‚å¤§çŸ©é˜µä¹˜æ³•ã€æ±‚é€†ã€åˆ†è§£ï¼‰æ—¶ï¼Œä¼šè‡ªåŠ¨ä½¿ç”¨å¤šçº¿ç¨‹åŠ é€Ÿã€‚å¦‚æœä½ ä¸è®¾ç½®ï¼ŒEigen ä¼šé»˜è®¤å°è¯•ä½¿ç”¨ç³»ç»Ÿæ£€æµ‹åˆ°çš„æ ¸å¿ƒæ•°ã€‚</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">Eigen::<span class="built_in">setNbThreads</span>(<span class="number">4</span>);  <span class="comment">// è®¾ç½®çº¿ç¨‹æ•°</span></span><br></pre></td></tr></table></figure><p>å¯é€šè¿‡ä»¥ä¸‹æ¥å£æŸ¥è¯¢å½“å‰è®¾ç½®çš„çº¿ç¨‹æ•°</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> threads = Eigen::<span class="built_in">nbThreads</span>();  <span class="comment">// è·å–å½“å‰è®¾ç½®å€¼</span></span><br></pre></td></tr></table></figure><p>å»ºè®®æŒ‰éœ€é…ç½®ï¼Œé¿å…çº¿ç¨‹è¿‡å¤šæŠ¢å èµ„æºï¼Œéœ€è¦æµ‹è¯•çº¿ç¨‹æ•°å¯¹æ€§èƒ½çš„å½±å“</p><h2 id="äº”ã€å¸¦å®ä½“ç»“æ„å’Œ-STL-å­—æ®µ"><a class="header-anchor" href="#äº”ã€å¸¦å®ä½“ç»“æ„å’Œ-STL-å­—æ®µ"></a>äº”ã€å¸¦å®ä½“ç»“æ„å’Œ STL å­—æ®µ</h2><h3 id="å®ä½“ç»“æ„åŠ å¯¹é½æ“ä½œç¨‹åº"><a class="header-anchor" href="#å®ä½“ç»“æ„åŠ å¯¹é½æ“ä½œç¨‹åº"></a>å®ä½“ç»“æ„åŠ å¯¹é½æ“ä½œç¨‹åº</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// struct/classï¼Œéƒ½éœ€è¦å¯¹é½</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Pose</span> &#123;</span><br><span class="line">  EIGEN_MAKE_ALIGNED_OPERATOR_NEW</span><br><span class="line">  Eigen::Vector3d position;</span><br><span class="line">  Eigen::Quaterniond orientation;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å›ºå®šå°ºå¯¸å¯¹è±¡ï¼šéœ€å†…å­˜å¯¹é½ï¼Œåº”ç”¨<code>EIGEN_MAKE_ALIGNED_OPERATOR_NEW</code>ï¼Œé¿å… SIMD é”™è¯¯ã€‚å¦åˆ™åœ¨æŸäº›å¹³å°å¯èƒ½<strong>å´©æºƒ</strong></p><h3 id="åº”ç”¨-aligned-allocator"><a class="header-anchor" href="#åº”ç”¨-aligned-allocator"></a>åº”ç”¨ aligned allocator</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">std::vector&lt;Eigen::Vector3d, Eigen::aligned_allocator&lt;Eigen::Vector3d&gt;&gt; points;</span><br></pre></td></tr></table></figure><blockquote><p>Using STL containers on fixed-size vectorizable Eigen types, or classes having members of such types, requires taking the following two steps:</p><p>A 16-byte-aligned allocator must be used. Eigen does provide one ready for use: aligned_allocator.</p><p>If you want to use the std::vector container, you need to #include &lt;Eigen/StdVector&gt;.</p><footer><strong>https://libeigen.gitlab.io/eigen/docs-3.3/group__TopicStructHavingEigenMembers.html Eigen 3.3.*ç‰ˆæœ¬</strong></footer></blockquote><p>Eigen 3.3 ç‰ˆæœ¬å¿…é¡»åº”ç”¨aligned_allocatorï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´<strong>å´©æºƒ</strong>ï¼Œå¦‚å‡ºç°åœ°å€æœªå¯¹é½çš„ SIGSEGV é”™è¯¯ã€‚</p><p>Eigen 3.4 ç‰ˆæœ¬æ–‡æ¡£è¯´æ˜åœ¨C++17ï¼Œgcc 7/clang 5ä»¥ä¸Šï¼Œç”±ç¼–è¯‘å™¨æå®šå¯¹é½é—®é¢˜: <a href="https://eigen.tuxfamily.org/dox/group__TopicStructHavingEigenMembers.html">EIGEN_MAKE_ALIGNED_OPERATOR_NEWè¯´æ˜</a>ï¼›<a href="https://eigen.tuxfamily.org/dox/group__TopicStlContainers.html">aligned_allocatorè¯´æ˜</a>ã€‚</p><p>æ³¨æ„ä½¿ç”¨çš„ç‰ˆæœ¬ï¼Œå¹¶æŒ‰å¯¹åº”çš„ç­–ç•¥å®ç°ã€‚</p><p><em>æ³¨ï¼š</em></p><ol><li>EIGEN_MAKE_ALIGNED_OPERATOR_NEW ä¼šé‡è½½å †å†…å­˜æ“ä½œ new/delete , ä½¿ç”¨ Eigen çš„å¯¹é½åˆ†é…å™¨ï¼› æ‰€ä»¥åº”ç”¨ EIGEN_MAKE_ALIGNED_OPERATOR_NEW åï¼Œ è¯¥ç±»(class/struct)è‡ªèº«newå‡ºæ¥çš„Eigen::Vector3d æˆ–è€… std::vector<a href="Eigen::Vector3d">Eigen::Vector3d</a> éƒ½ä¿è¯äº†å†…å­˜å¯¹é½ã€‚</li><li>åœ¨ ç±»(class/struct) ä¸­ï¼Œå¦‚æœåº”ç”¨äº† EIGEN_MAKE_ALIGNED_OPERATOR_NEWï¼Œ å¯ä»¥ä¸éœ€è¦å†å¯¹ vector æŒ‡å®š Eigen::aligned_allocator</li></ol><h2 id="å…­ã€æ˜¾å¼ç±»å‹è½¬æ¢"><a class="header-anchor" href="#å…­ã€æ˜¾å¼ç±»å‹è½¬æ¢"></a>å…­ã€æ˜¾å¼ç±»å‹è½¬æ¢</h2><p>é¿å…éšå¼è½¬æ¢ï¼šç»Ÿä¸€æ ‡é‡ç±»å‹ï¼ˆå¦‚å…¨ç”¨ doubleï¼‰ï¼Œæˆ–æ˜¾å¼è½¬æ¢ã€‚</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">Eigen::Vector2d <span class="title">vd</span><span class="params">(<span class="number">1.0</span>, <span class="number">2.0</span>)</span></span>;</span><br><span class="line">Eigen::Vector2f vf = vd.<span class="built_in">cast</span>&lt;<span class="type">float</span>&gt;();  <span class="comment">// double -&gt; float æ˜¾å¼è½¬æ¢</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š.cast&lt;&gt;() åªè½¬ç±»å‹ï¼Œä¸æ”¹ç»´åº¦</p><h2 id="ä¸ƒã€ç‰¹æ®Šæƒ…å†µ"><a class="header-anchor" href="#ä¸ƒã€ç‰¹æ®Šæƒ…å†µ"></a>ä¸ƒã€ç‰¹æ®Šæƒ…å†µ</h2><p>é»˜è®¤åˆ—ä¼˜å…ˆï¼šä¸ Fortran/MATLAB å…¼å®¹ï¼Œä½†ä¸å…¶ä»–åº“äº¤äº’æ—¶æ³¨æ„é¡ºåºã€‚</p><h3 id="1-å¦‚æœéœ€è¦è¡Œä¼˜å…ˆå­˜å‚¨ï¼š"><a class="header-anchor" href="#1-å¦‚æœéœ€è¦è¡Œä¼˜å…ˆå­˜å‚¨ï¼š"></a>1. å¦‚æœéœ€è¦è¡Œä¼˜å…ˆå­˜å‚¨ï¼š</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">Eigen::Matrix&lt;<span class="type">float</span>, <span class="number">4</span>, <span class="number">4</span>, Eigen::RowMajor&gt; mat;</span><br><span class="line"><span class="comment">// æ˜ å°„è¡Œä¼˜å…ˆæ•°æ®</span></span><br><span class="line">Eigen::Map&lt;MatrixXd, <span class="number">0</span>, Stride&lt;Dynamic, <span class="number">1</span>&gt;&gt; <span class="built_in">row_major_map</span>(data, rows, cols);</span><br></pre></td></tr></table></figure><h3 id="2-å…¼å®¹-CUDA-OpenCV"><a class="header-anchor" href="#2-å…¼å®¹-CUDA-OpenCV"></a>2. å…¼å®¹ CUDA / OpenCV</h3><p>Eigen çš„é»˜è®¤å­˜å‚¨é¡ºåºæ˜¯åˆ—ä¸»åº(Colunm-Major), CUDAçš„é»˜è®¤å­˜å‚¨é¡ºåºå’Œ C è¯­è¨€çš„ä¸€è‡´æ˜¯è¡Œä¸»åº(Row-Major)ã€‚CPU ä¸Šçš„ Eigen æ•°æ®å¤åˆ¶åˆ° GPU æ—¶ï¼Œéœ€è¦æ³¨æ„è¡Œåˆ—é¡ºåºã€‚</p><p>cuBLAS åº“çš„ API é»˜è®¤ä½¿ç”¨çš„æ˜¯åˆ—ä¸»åºï¼Œè¿™å’Œ Eigen æ˜¯ä¸€è‡´çš„ã€‚åœ¨ä½¿ç”¨ CUDA kernel å’Œ cuBLAS åº“æ—¶éœ€ç‰¹åˆ«æ³¨æ„ï¼Œè¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„é™·é˜±ã€‚</p><p>åœ¨å®šä¹‰ Eigen çŸ©é˜µç±»å‹æ—¶æ˜¾å¼æŒ‡å®šè¡Œä¸»åºï¼Œä¿è¯ Eigen çŸ©é˜µçš„å†…å­˜å¸ƒå±€å’Œ CUDA çš„ä¸€è‡´ã€‚</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">Eigen::Matrix&lt;<span class="type">float</span>, Eigen::Dynamic, Eigen::Dynamic, Eigen::RowMajor&gt; mat;</span><br><span class="line"><span class="built_in">cudaMemcpy</span>(d_ptr, mat.<span class="built_in">data</span>(), rows*cols*<span class="built_in">sizeof</span>(<span class="type">float</span>), cudaMemcpyHostToDevice);</span><br></pre></td></tr></table></figure><h2 id="å…«ã€é…å¥—-CMake-ç¼–è¯‘é€‰é¡¹"><a class="header-anchor" href="#å…«ã€é…å¥—-CMake-ç¼–è¯‘é€‰é¡¹"></a>å…«ã€é…å¥— CMake ç¼–è¯‘é€‰é¡¹</h2><p>Eigen é»˜è®¤ä¼šå°è¯•ä¸ºæŸäº›ç±»å‹ï¼ˆå¦‚ Vector4f, Matrix&lt;float, 4, 4&gt; ç­‰ï¼‰åš SSE/AVX SIMD å¯¹é½ä¼˜åŒ–ï¼Œæé«˜è®¡ç®—æ•ˆç‡ã€‚</p><p>ä½†æ˜¯å¦‚æœä½ åœ¨ æŸäº›ç¼–è¯‘ç¯å¢ƒä¸­ æˆ–ä½¿ç”¨ é™æ€å˜é‡ï¼ˆstaticï¼‰/å…¨å±€å˜é‡ï¼Œè€Œè¿™äº›å˜é‡æ˜¯ Eigen ç±»å‹çš„ï¼Œå°±å¯èƒ½å¼•å‘ alignment é—®é¢˜ï¼ˆä¾‹å¦‚å´©æºƒæˆ–æœªå®šä¹‰è¡Œä¸ºï¼‰</p><figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">add_definitions</span>(-DEIGEN_DONT_ALIGN_STATICALLY=<span class="number">1</span>)</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå®åªå½±å“é™æ€å˜é‡æ˜¯å¦ä½¿ç”¨å†…å­˜å¯¹é½ã€‚</p><p>å®ƒä¸ä¼šå½±å“åŠ¨æ€åˆ†é…çš„ Eigen å¯¹è±¡ï¼ˆå¦‚ new Eigen::Vector3f()ï¼‰ï¼Œè¿™äº›æ˜¯å®‰å…¨çš„ã€‚</p><p>å¦‚æœä½ æ²¡æœ‰ä½¿ç”¨é™æ€æˆ–å…¨å±€å˜é‡ï¼Œå°± ä¸è¦å®šä¹‰è¯¥å®ï¼Œä»¥ä¾¿ä¿ç•™æ€§èƒ½ä¼˜åŒ–ã€‚</p><h2 id="ä¹ã€ç¼–è¯‘ä¼˜åŒ–"><a class="header-anchor" href="#ä¹ã€ç¼–è¯‘ä¼˜åŒ–"></a>ä¹ã€ç¼–è¯‘ä¼˜åŒ–</h2><h3 id="1-ç¼–è¯‘å™¨é€‰é¡¹ï¼š"><a class="header-anchor" href="#1-ç¼–è¯‘å™¨é€‰é¡¹ï¼š"></a>1. ç¼–è¯‘å™¨é€‰é¡¹ï¼š</h3><p>é€šè¿‡å¼€å¯ç¼–è¯‘é€‰é¡¹ä¼˜åŒ–æ€§èƒ½ï¼š</p><ul><li>O3: ç¼–è¯‘å™¨ä¼šè¿›è¡Œå¾ªç¯å±•å¼€ã€å‡½æ•°å†…è”ã€å‘é‡åŒ–ç­‰ä¼˜åŒ–ï¼Œé€šå¸¸èƒ½æ˜¾è‘—æå‡ Eigen çŸ©é˜µè¿ç®—çš„æ€§èƒ½ã€‚</li><li>march: å¼€å¯ CPU æ”¯æŒçš„ SIMD æŒ‡ä»¤é›†ï¼Œä»è€Œæå‡ Eigen å†…éƒ¨å‘é‡åŒ–çš„æ•ˆç‡ã€‚</li><li>ffast-math:  æ”¾å®½å¯¹ IEEE 754 æµ®ç‚¹æ ‡å‡†çš„ä¸¥æ ¼éµå®ˆï¼Œå…è®¸ç¼–è¯‘å™¨è¿›è¡Œæ¿€è¿›ä¼˜åŒ–ï¼Œæå‡çŸ©é˜µè¿ç®—å’Œæ•°å€¼æ±‚è§£çš„é€Ÿåº¦ã€‚</li></ul><p>GCC / Clang:</p><figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¿™é‡Œç¤ºä¾‹æ˜¯native, å»ºè®®ä½¿ç”¨å…·ä½“æ¶æ„ï¼Œç‰¹åˆ«æ˜¯äº¤å‰ç¼–è¯‘æ—¶ï¼Œå¦‚x86_64, arm8.2</span></span><br><span class="line">-O3 -march=native -ffast-<span class="keyword">math</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šä¸Šè¿°ç¼–è¯‘é€‰é¡¹ï¼Œæœ‰å¾—æœ‰å¤±ï¼Œæ¯”å¦‚ä½¿ç”¨O3ç”Ÿæˆçš„ä»£ç ä¼šæ›´å¤§ï¼Œç¼–è¯‘æ—¶é—´æ›´é•¿ï¼Œæœ‰æ—¶ä¹Ÿå¯èƒ½è§¦å‘ç¼–è¯‘å™¨çš„ bug æˆ–å¯¼è‡´è°ƒè¯•å›°éš¾ã€‚ä¸€èˆ¬å»ºè®®ç”¨O2å³å¯ï¼Œé™¤éæ€§èƒ½å°¤å…¶é‡è¦æ ¹æ®å®é™…æµ‹è¯•æƒ…å†µæ¥å®šã€‚</p><p>ç‰¹åˆ«æŒ‡å‡º Nvidia æ™ºèƒ½é©¾é©¶èŠ¯ç‰‡çš„marchå¦‚ä¸‹ï¼š</p><figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="comment"># arch set</span></span><br><span class="line"><span class="keyword">if</span> (<span class="string">&quot;$&#123;HARDWARE&#125;&quot;</span> <span class="keyword">STREQUAL</span> <span class="string">&quot;orin&quot;</span>)</span><br><span class="line">    <span class="comment">#cpu part 0xd42</span></span><br><span class="line">    <span class="keyword">set</span>(CMAKE_C_FLAGS <span class="string">&quot;$&#123;CMAKE_C_FLAGS&#125; -march=armv8.2-a&quot;</span> -mtune=cortex-a78ae<span class="string">&quot;)</span></span><br><span class="line"><span class="string">    set(CMAKE_CXX_FLAGS &quot;</span><span class="variable">$&#123;CMAKE_CXX_FLAGS&#125;</span> -march=armv8.<span class="number">2</span>-a<span class="string">&quot; -mtune=cortex-a78ae&quot;</span>)</span><br><span class="line"><span class="keyword">elseif</span> (<span class="string">&quot;$&#123;HARDWARE&#125;&quot;</span> <span class="keyword">STREQUAL</span> <span class="string">&quot;thor&quot;</span>)</span><br><span class="line">    <span class="comment">#cpu part 0xd83</span></span><br><span class="line">    <span class="keyword">set</span>(CMAKE_C_FLAGS <span class="string">&quot;$&#123;CMAKE_C_FLAGS&#125; -march=armv9-a&quot;</span> -mtune=neoverse-v3ae<span class="string">&quot;)</span></span><br><span class="line"><span class="string">    set(CMAKE_CXX_FLAGS &quot;</span><span class="variable">$&#123;CMAKE_CXX_FLAGS&#125;</span> -march=armv9-a<span class="string">&quot; -mtune=neoverse-v3ae&quot;</span>)</span><br><span class="line"><span class="keyword">endif</span> ()</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šmtuneå‚æ•°ç”¨äºæ›´ç»†èŠ‚çš„æ¶æ„æè¿°ï¼Œå¯èƒ½æœ‰äº›ç¼–è¯‘å™¨ç‰ˆæœ¬ä¸æ”¯æŒï¼Œå¯ä»¥åˆ é™¤æ‰ã€‚</p><h3 id="2-æ£€æŸ¥-SIMD-æ˜¯å¦ç”Ÿæ•ˆ"><a class="header-anchor" href="#2-æ£€æŸ¥-SIMD-æ˜¯å¦ç”Ÿæ•ˆ"></a>2. æ£€æŸ¥ SIMD æ˜¯å¦ç”Ÿæ•ˆ</h3><p>CPU æ”¯æŒçš„ SIMD æŒ‡ä»¤é›†æ˜¯å¦ç”Ÿæ•ˆï¼Œå¯ä»¥é€šè¿‡ä»£ç æ¥æ ¡éªŒã€‚</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">std::cout &lt;&lt; Eigen::<span class="built_in">SimdInstructionSetsInUse</span>() &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://eigen.tuxfamily.org/index.php?title=Main_Page">Eigenå®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://chatgpt.com/">ChatGPT å„ç§ç›¸å…³ prompt çš„å›ç­”</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä¹‹æ‰€ä»¥å†™è¿™ä¸ªè¯é¢˜ï¼Œæ˜¯å› ä¸ºåœ¨å®é™…å·¥ä½œä¸­é‡åˆ°äº†ç›¸å…³çš„é—®é¢˜ï¼Œæ¯”å¦‚åœ¨å®šä½coredumpé—®é¢˜æ—¶å‘ç°æ˜¯å› ä¸ºEigenå†…å­˜æœªå¯¹é½å¯¼è‡´ï¼Œæ¯”å¦‚åœ¨ä¼˜åŒ–æ€§èƒ½æ—¶å‘ç°æœ‰éšå«çš„åŠ¨æ€å†…å­˜ç”³è¯·æ˜¯å› ä¸ºä½¿ç”¨åŠ¨æ€çŸ©é˜µå¯¼è‡´â€¦ åŸºäºä¸Šè¿°å®é™…é—®é¢˜ï¼Œå‘ç°å¾ˆå¤šäººåªæ˜¯ä¼šä½¿ç”¨è¿™ä¸ªåº“ï¼Œä½†æ˜¯ä¸çŸ¥é“æ€ä¹ˆä½¿ç”¨æ›´é«˜æ•ˆï¼Œæ‰€ä»¥æ•´ç†äº†ä»¥ä¸‹</summary>
      
    
    
    
    <category term="æŠ€æœ¯ç§¯ç´¯" scheme="http://blog.cuicc.com/categories/%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/"/>
    
    
    <category term="æ™ºèƒ½é©¾é©¶" scheme="http://blog.cuicc.com/tags/%E6%99%BA%E8%83%BD%E9%A9%BE%E9%A9%B6/"/>
    
    <category term="æ€§èƒ½ä¼˜åŒ–" scheme="http://blog.cuicc.com/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
    <category term="Eigen" scheme="http://blog.cuicc.com/tags/Eigen/"/>
    
  </entry>
  
  <entry>
    <title>æ™ºèƒ½é©¾é©¶ DevOps</title>
    <link href="http://blog.cuicc.com/blog/2025/08/03/devops-for-intelligent-driving/"/>
    <id>http://blog.cuicc.com/blog/2025/08/03/devops-for-intelligent-driving/</id>
    <published>2025-08-03T06:33:30.000Z</published>
    <updated>2025-08-23T12:20:44.411Z</updated>
    
    <content type="html"><![CDATA[<p>DevOps è¿™ä¸€å¼€å‘ç†å¿µåœ¨2009å¹´è¢«æå‡ºåï¼Œç»è¿‡åå‡ å¹´çš„å‘å±•ï¼Œå·²ç»éå¸¸æˆç†Ÿäº†ï¼Œç‰¹åˆ«æ˜¯åœ¨å¾®æœåŠ¡æ¶æ„è¢«æå‡ºå¹¶æµè¡Œå¼€æ¥ï¼Œè¿›ä¸€æ­¥æ¨åŠ¨ DevOps å®è·µæ·±å…¥å‘å±•ã€‚DevOps æ—¢ç„¶å·²ç»è¿™ä¹ˆæˆç†Ÿäº†ï¼Œæˆ‘ä»¬ä¸ºå•¥è¿˜è¦å†™è¿™ä¸ªè¯é¢˜ï¼Ÿç¬”è€…è®¤ä¸ºç†å¿µæ˜¯æˆç†Ÿçš„ï¼Œä½†åº”ç”¨çš„ä¸šåŠ¡åœºæ™¯æ˜¯æ—¥æ–°æœˆå¼‚çš„ï¼Œæ€ä¹ˆæŠŠè¿™ä¸€æˆç†Ÿçš„ç†å¿µåº”ç”¨åˆ°å„ç§ä¸šåŠ¡åœºæ™¯ï¼Œè¿˜æ˜¯æœ‰ä¸å°‘æŒ‘æˆ˜çš„ï¼›å†è€…è¿™ä¹Ÿæ˜¯å‚ä¸å„ç§èŒä½ååšçš„ç»éªŒï¼Œç»“åˆChatGPTçš„è§£ç­”ï¼Œæ€»ç»“çš„ç¬”è®°ã€‚ç”±äºæ²¡æœ‰æ¶‰çŒæ‰€æœ‰çš„ç¯èŠ‚å¯¹åº”çš„èŒä½ï¼Œå¦‚æœ‰ä¸å½“ä¹‹å¤„è¯·æŒ‡æ­£ã€‚å¼€ç¯‡ä¹‹å‰ï¼Œå…ˆå¯¹é½ä¸€ä¸‹åŸºæœ¬æ¦‚å¿µã€‚</p><h2 id="DevOps-æ˜¯ä»€ä¹ˆ"><a class="header-anchor" href="#DevOps-æ˜¯ä»€ä¹ˆ"></a>DevOps æ˜¯ä»€ä¹ˆ</h2><blockquote><p>DevOps æ˜¯è½¯ä»¶å¼€å‘ä¸ä¿¡æ¯æŠ€æœ¯è¿ç»´çš„æ•´åˆåŠè‡ªåŠ¨åŒ–å®è·µ[a]ã€‚è¿™ä¸€æ–¹æ³•è®ºæ¶µç›–äº†è½¯ä»¶å¼€å‘çš„å…³é”®ç¯èŠ‚ï¼Œèƒ½æœ‰æ•ˆç¼©çŸ­å¼€å‘å‘¨æœŸå¹¶ä¼˜åŒ–å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†[1]ã€‚Neal FordæŒ‡å‡ºï¼ŒDevOpsï¼ˆå°¤å…¶æ˜¯é€šè¿‡æŒç»­äº¤ä»˜å®ç°æ—¶ï¼‰éµå¾ª&quot;ç—›ç‚¹å‰ç½®&quot;åŸåˆ™â€”â€”é€šè¿‡å°½æ—©å¤„ç†å¤æ‚ä»»åŠ¡ã€æ¨åŠ¨è‡ªåŠ¨åŒ–å»ºè®¾åŠå¿«é€Ÿå‘ç°é—®é¢˜æ¥æå‡æ•ˆç‡[2]ã€‚è½¯ä»¶å·¥ç¨‹å¸ˆä¸æ¶æ„å¸ˆåº”å½“è¿ç”¨é€‚åº”æ€§å‡½æ•°ï¼ˆfitness functionsï¼‰æ¥ç¡®ä¿ç³»ç»Ÿå¥åº·åº¦[3]ã€‚</p><p>å°½ç®¡å­˜åœ¨å­¦æœ¯äº‰è®®[b][c][d][e]ï¼ŒDevOpsä»ä»¥ä¸‰å¤§æ ¸å¿ƒåŸåˆ™ä¸ºç‰¹å¾ï¼šè´£ä»»å…±æ‹…ã€å·¥ä½œæµè‡ªåŠ¨åŒ–åŠå¿«é€Ÿåé¦ˆæœºåˆ¶ã€‚æ¥è‡ªæ¾³å¤§åˆ©äºšè”é‚¦ç§‘å­¦ä¸å·¥ä¸šç ”ç©¶ç»„ç»‡ï¼ˆCSIROï¼‰å’Œè½¯ä»¶å·¥ç¨‹ç ”ç©¶æ‰€çš„ä¸‰ä½è®¡ç®—æœºç§‘å­¦å®¶Len Bassã€Ingo Weberä¸Liming Zhuä»å­¦æœ¯è§’åº¦æå‡ºå®šä¹‰ï¼šâ€œDevOpsæ˜¯ä¸€å¥—æ—¨åœ¨ä¿è¯é«˜è´¨é‡çš„å‰æä¸‹ï¼Œæ˜¾è‘—ç¼©çŸ­ç³»ç»Ÿå˜æ›´æäº¤åˆ°æ­£å¼ç”Ÿäº§ç¯å¢ƒæ‰€ç”¨æ—¶é—´çš„å®è·µé›†åˆâ€[7]ã€‚ä¸è¿‡è¯¥æœ¯è¯­åœ¨å®é™…åº”ç”¨ä¸­å­˜åœ¨å¤šé‡è§£è¯»ã€‚æœ€æˆåŠŸçš„DevOpså®æ–½å¾€å¾€éœ€è¦ç‰¹å®šå®è·µã€æ–‡åŒ–è½¬å‹ä¸å·¥å…·é“¾ä¸‰è€…çš„æœ‰æœºç»“åˆ[8]ã€‚</p><footer><strong>Wikipedia</strong><cite><a href="https://en.wikipedia.org/wiki/DevOps">DevOps</a></cite></footer></blockquote><div align="center"><img width="50%" alt="devops" src="/images/devops/devops-infinite-loop.png" /></div><h2 id="æ™ºèƒ½é©¾é©¶æ˜¯ä»€ä¹ˆ"><a class="header-anchor" href="#æ™ºèƒ½é©¾é©¶æ˜¯ä»€ä¹ˆ"></a>æ™ºèƒ½é©¾é©¶æ˜¯ä»€ä¹ˆ</h2><blockquote><p>æ™ºèƒ½é©¾é©¶ï¼ˆIntelligent Drivingï¼‰ æ˜¯æŒ‡åˆ©ç”¨äººå·¥æ™ºèƒ½ã€ä¼ æ„Ÿå™¨æŠ€æœ¯ã€é€šä¿¡æŠ€æœ¯å’Œè‡ªåŠ¨æ§åˆ¶æŠ€æœ¯ï¼Œä½¿è½¦è¾†å…·å¤‡ æ„ŸçŸ¥ç¯å¢ƒã€ç†è§£äº¤é€šã€åšå‡ºå†³ç­–å¹¶æ‰§è¡Œé©¾é©¶æ“ä½œ çš„èƒ½åŠ›ã€‚å®ƒæ˜¯è‡ªåŠ¨é©¾é©¶ã€æ™ºèƒ½è¾…åŠ©é©¾é©¶ï¼ˆADASï¼‰ç­‰ç³»ç»Ÿçš„ç»Ÿç§°ã€‚</p><p>é€šä¿—çš„è®²ï¼Œæ™ºèƒ½é©¾é©¶å°±æ˜¯è®©â€œè½¦è‡ªå·±èƒ½çœ‹ã€èƒ½æƒ³ã€èƒ½åŠ¨â€ï¼Œåƒä¸€ä¸ªå…·å¤‡åˆçº§æ™ºæ…§çš„å¸æœºé‚£æ ·å®‰å…¨è¡Œé©¶ã€‚</p><p>å›½é™…æ±½è½¦å·¥ç¨‹å¸ˆå­¦ä¼šå‘å¸ƒçš„è‡ªåŠ¨é©¾é©¶åˆ†çº§ L0 - L5ï¼Œå¤§å®¶æ›´ä¸ºç†ŸçŸ¥ï¼Œä»äººå·¥é©¾é©¶åˆ°å®Œå…¨è‡ªåŠ¨é©¾é©¶</p><footer><strong>Wikipedia</strong><cite><a href="https://zh.wikipedia.org/zh-cn/%E8%87%AA%E5%8B%95%E9%A7%95%E9%A7%9B%E6%B1%BD%E8%BB%8A">è‡ªåŠ¨é©¾é©¶æ±½è½¦</a></cite></footer></blockquote><div align="center"><img width="50%" alt="intelligent-driving" src="/images/devops/devops-human-vs-auto.png" /></div><h2 id="æ™ºèƒ½é©¾é©¶-DevOps-æ˜¯ä»€ä¹ˆ"><a class="header-anchor" href="#æ™ºèƒ½é©¾é©¶-DevOps-æ˜¯ä»€ä¹ˆ"></a>æ™ºèƒ½é©¾é©¶ DevOps æ˜¯ä»€ä¹ˆ</h2><p>æ™ºèƒ½é©¾é©¶ DevOps æ˜¯å°† DevOps ç†å¿µå’Œå·¥å…·é“¾åº”ç”¨äºæ™ºèƒ½é©¾é©¶ç³»ç»Ÿçš„å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²å’Œè¿è¥å…¨è¿‡ç¨‹ï¼Œç›®æ ‡æ˜¯ï¼š</p><ul><li>æé«˜ç ”å‘æ•ˆç‡ï¼ˆCI/CD è‡ªåŠ¨åŒ–ï¼‰</li><li>åŠ é€Ÿç‰ˆæœ¬è¿­ä»£ï¼ˆé«˜é¢‘äº¤ä»˜ï¼‰</li><li>ä¿è¯ç³»ç»Ÿè´¨é‡ï¼ˆè‡ªåŠ¨æµ‹è¯•ã€å›å½’ï¼‰</li><li>æ”¯æ’‘å¤šè½¦å‹ã€å¤šå¹³å°ã€å¤§é‡æ•°æ®çš„å¤æ‚å·¥ç¨‹ä½“ç³»</li></ul><p>æ•°æ®æ˜¯æ™ºèƒ½é©¾é©¶çš„åŸºç¡€ã€æ”¯æ’‘ã€å¼•æ“å’Œä¿éšœï¼Œè´¯ç©¿äº†ä»æ¨¡å‹è®­ç»ƒã€åŠŸèƒ½å¼€å‘ã€ä»¿çœŸæµ‹è¯•åˆ°é—®é¢˜å®šä½çš„å…¨ç”Ÿå‘½å‘¨æœŸï¼Œæ•°æ®é—­ç¯æ˜¯æˆ‘ä»¬å¸¸å¬åˆ°çš„æ™ºèƒ½é©¾é©¶å¸¸æçš„ä¸€ä¸ªæ¦‚å¿µï¼Œæ•°æ®é—­ç¯çš„å®ç°ç¦»ä¸å¼€æ™ºèƒ½é©¾é©¶ DevOps çš„ä¸‰é©¾é©¬è½¦ã€‚</p><ul><li>Cloud Service DevOps (äº‘æœåŠ¡ DevOps): æ•°æ®å¹³å°æ˜¯äº‘æœåŠ¡ DevOps çš„å®è·µä½“ç°ï¼Œä»¥æ•°æ®ä¸ºä¸­å¿ƒæ„å»ºçš„äº‘æœåŠ¡å¹³å°ï¼Œæ‰¿è½½åŸºç¡€è®¾æ–½èµ„æºè¿ç»´ã€æ•°æ®ç®¡ç†ã€äº‘æœåŠ¡ä»¥åŠå·¥å…·é“¾çš„å¼€å‘è¿ç»´ï¼›</li><li>Vehicle Soc DevOps (è½¦ç«¯åµŒå…¥å¼ç³»ç»Ÿ DevOps): ä¸åŒäºäº‘æœåŠ¡ï¼ŒåµŒå…¥å¼ç³»ç»Ÿæœ‰å¦ä¸€å¥—å¼€å‘æµç¨‹ï¼Œä¾æ‰˜äºæ•ˆèƒ½äº‘æœåŠ¡ï¼Œæ‰¿è½½äº†è½¦ç«¯ç‰ˆæœ¬è§„åˆ’ã€å¼€å‘ã€æ„å»ºã€æµ‹è¯•ã€å‘å¸ƒçš„æ•´ä¸ªæµç¨‹ï¼ŒåŒæ—¶é‡äº§è½¦äº‘æœåŠ¡æ‰¿è½½äº†è½¦ç«¯ç‰ˆæœ¬çš„è¿ç»´ã€è¿è¥å’Œç›‘æ§ï¼›</li><li>AI Model DevOps (æ¨¡å‹ DevOps): æ•°æ®é‡‡é›†ä¸Šäº‘ã€æ ‡æ³¨ã€æ¨¡å‹è®­ç»ƒã€æ¨¡å‹å‘å¸ƒç­‰AIæœåŠ¡åˆ™æ„å»ºäº†æ¨¡å‹ DevOps çš„æ•´ä½“é“¾è·¯ï¼ŒåŒæ—¶é€šè¿‡è½¦ç«¯ç‰ˆæœ¬æµ‹è¯•å’Œè¿è¥ã€‚</li></ul><div align="center"><img width="70%" alt="auto-devops" src="/images/devops/devops-intelligence-driving-3loops.png" /></div><p>å‰é¢ DevOps æ¦‚å¿µæåˆ°ï¼ŒDevOps æ˜¯è½¯ä»¶å¼€å‘ä¸ä¿¡æ¯æŠ€æœ¯è¿ç»´çš„æ•´åˆåŠè‡ªåŠ¨åŒ–å®è·µã€‚è‡ªåŠ¨åŒ–çš„å‰ææ˜¯ä»€ä¹ˆï¼Œæ˜¯ç­–ç•¥ï¼ˆæˆ–è€…è¯´æ˜¯è§„åˆ™ï¼‰ï¼Œæœ‰ç­–ç•¥æ‰èƒ½å®ç°è‡ªåŠ¨åŒ–ã€‚è¿™æ˜¯å¾ˆé‡è¦çš„ä¸€ç‚¹ï¼Œæ˜¯æˆ‘ä»¬æ•´ä¸ªå®ç°çš„åŸºçŸ³ã€‚åœ¨å¼€å§‹æ¢è®¨DevOpsçš„8ä¸ªæ ¸å¿ƒç¯èŠ‚ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥æ¢è®¨ä¸€ä¸‹å„ä¸ªç¯èŠ‚ç›¸å…³çš„ç­–ç•¥ã€‚</p><h2 id="ç­–ç•¥"><a class="header-anchor" href="#ç­–ç•¥"></a>ç­–ç•¥</h2><h3 id="é…ç½®ç­–ç•¥"><a class="header-anchor" href="#é…ç½®ç­–ç•¥"></a>é…ç½®ç­–ç•¥</h3><p>é…ç½®ç®¡ç†çš„ç›®æ ‡æ˜¯ç¡®ä¿ç³»ç»Ÿé…ç½®çš„è‡ªåŠ¨åŒ–ã€æ ‡å‡†åŒ–å’Œç‰ˆæœ¬æ§åˆ¶ï¼Œç¡®ä¿ç¯å¢ƒçš„ä¸€è‡´æ€§å’Œå¯é‡å¤æ€§ã€‚æ ¸å¿ƒåŸåˆ™å¦‚ä¸‹ï¼š</p><table><thead><tr><th>åŸåˆ™</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>é…ç½®å³ä»£ç ï¼ˆConfiguration as Codeï¼‰</td><td>é…ç½®åº”å†™å…¥ä»£ç ä»“åº“ã€ç‰ˆæœ¬å¯æ§ï¼ˆå¦‚ YAML / JSON / HCLï¼‰</td></tr><tr><td>ç¯å¢ƒä¸€è‡´æ€§</td><td>ä¸åŒç¯å¢ƒï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼Œä»¿çœŸã€å®è½¦ï¼‰é…ç½®åŒæ­¥ï¼Œæ¶ˆé™¤&quot;åœ¨æˆ‘æœºå™¨ä¸Šèƒ½è¿è¡Œ&quot;é—®é¢˜</td></tr><tr><td>ç¯å¢ƒè§£è€¦</td><td>ä¸åŒç¯å¢ƒï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰é…ç½®åˆ†ç¦»ï¼Œä¸åµŒå…¥ä»£ç </td></tr><tr><td>é›†ä¸­ç®¡ç†</td><td>é…ç½®ç»Ÿä¸€ç®¡ç†ï¼Œé˜²æ­¢æ•£ä¹±åˆ†å¸ƒï¼Œå•ä¸€é…ç½®æºï¼Œé˜²æ­¢å¤šä»½é…ç½®ä¸å½’ä¸€</td></tr><tr><td>å¯å®¡è®¡</td><td>é…ç½®æ”¹åŠ¨å¯è¿½æº¯ã€æœ‰è®°å½•ï¼Œæœ‰å˜æ›´å®¡æŸ¥æµç¨‹è§„èŒƒ</td></tr><tr><td>å®‰å…¨éš”ç¦»</td><td>æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ Tokenã€å¯†é’¥ï¼‰é€šè¿‡å®‰å…¨æœºåˆ¶ç®¡ç†</td></tr></tbody></table><p>è¿™äº›åŸåˆ™åœ¨æ™ºèƒ½é©¾é©¶çš„ä¸‰ä¸ª DevOps ä¸­éƒ½é€‚ç”¨ï¼Œé’ˆå¯¹ä¸åŒçš„åœºæ™¯ï¼Œæœ‰ä¸åŒçš„å·¥å…·å¯ä¾›é€‰æ‹©ã€‚</p><ul><li>ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼Œæ ¹æ®æ“ä½œç±»å‹å¯ä»¥é€‰æ‹©Gitã€SVNï¼Œæˆ‘ä»¬é€šå¸¸ç”¨Gitç®¡ç†ä»£ç ï¼Œç”¨SVNç®¡ç†æ–‡æ¡£ï¼Œä»£ç ç®¡ç†ç”¨Gitã€Git LFSã€repoä»¥åŠç›¸åº”çš„ç®¡ç†å¹³å°Gitlabã€Gerritç­‰ã€‚æ¨¡å‹è®­ç»ƒæ•°æ®ã€æ¨¡å‹æœ¬èº«åˆ™é€šè¿‡è‡ªç ”çš„æ•°æ®å¹³å°åšç‰ˆæœ¬æ§åˆ¶ã€‚</li><li>ç¯å¢ƒåŸºç¡€è®¾æ–½ï¼Œæ ¹æ®éš”ç¦»å¼ºå¼±åŠæ€§èƒ½æ•ˆç‡å¯ä»¥é€‰æ‹©KVMã€Dockerä»¥åŠç›¸å…³çš„ç®¡ç†å¹³å°OpenStackã€Kubernetesç­‰ï¼Œæˆ‘ä»¬é€šå¸¸é€‰æ‹©ç”¨Dockerä¿è¯ç¯å¢ƒçš„ä¸€è‡´æ€§ã€éƒ¨ç½²å¾®æœåŠ¡ï¼Œç”¨KVMéƒ¨ç½²è·¨å¹³å°è™šæ‹Ÿæœºã€‚</li><li>é…ç½®ç®¡ç†å·¥å…·ï¼Œåœ¨äº‘æœåŠ¡ DevOps ä¸­ï¼Œé€šå¸¸ä½¿ç”¨Ansibleã€Chefã€Puppetç­‰åšç³»ç»Ÿå±‚é…ç½®ï¼Œç”¨Kubernetesæ¨¡æ¿ç­‰åšåº”ç”¨å±‚é…ç½®ï¼›åœ¨è½¦ç«¯Soc DevOpsä¸­ï¼Œé€šå¸¸ä½¿ç”¨è½¦è¾†é…ç½®å‚æ•°å’Œè¿œç¨‹é…ç½®ç­‰ï¼›ï¼Œåœ¨AI Model DevOpsä¸­ï¼Œé€šå¸¸ä¾èµ–è®­ç»ƒå¹³å°çš„é…ç½®ç®¡ç†ã€‚</li><li>æ•°æ®ç®¡ç†å·¥å…·ï¼Œé€šå¸¸é‡‡ç”¨å¤§æ•°æ®å­˜å‚¨ï¼Œå¦‚å¯¹è±¡å­˜å‚¨OBSç­‰</li></ul><h3 id="ä»£ç ç®¡ç†ç­–ç•¥"><a class="header-anchor" href="#ä»£ç ç®¡ç†ç­–ç•¥"></a>ä»£ç ç®¡ç†ç­–ç•¥</h3><p>æ ¹æ®å›¢é˜Ÿè§„æ¨¡ã€æ¨¡å—è€¦åˆåº¦ã€æƒé™ç®¡ç†ç­‰å¤šæ–¹é¢ç»¼åˆè€ƒè™‘ï¼Œå¯¹äºGitæ¥è®²ï¼Œä¸»è¦æ˜¯æƒé™ç®¡ç†æ–¹é¢çš„éœ€æ±‚ï¼Œå…¶ä»–ç»´åº¦å¯ä»¥é€šè¿‡æµç¨‹è§„èŒƒæ¥çº¦æŸï¼Œå½“ç„¶ç”¨å·¥å…·æ›´å¥½ã€‚æœ‰ä¸¤ç§ä»£ç ç®¡ç†ç­–ç•¥ã€‚</p><table><thead><tr><th>æ¨¡å¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>å¤šä»“ï¼ˆæ¯ä¸ªæ¨¡å—ä¸€ä¸ªä»“ï¼‰</td><td>æ¯ä¸ªæ¨¡å—ç‹¬ç«‹ Git ä»“åº“ï¼Œæ¯ä¸ªæ¨¡å—è®¾ç½®ç‹¬ç«‹çš„æƒé™</td></tr><tr><td>å•ä»“ï¼ˆä¸€ä¸ªä»“å¤šä¸ªç›®å½•ï¼‰</td><td>æ‰€æœ‰æ¨¡å—åœ¨ä¸€ä¸ª Git ä»“ä¸­ï¼Œä»¥ç›®å½•åŒºåˆ†æ¨¡å—ï¼Œæ‰€æœ‰æ¨¡å—å…±äº«ä¸€ä¸ªæƒé™</td></tr></tbody></table><p>è¿™ä¸¤ç§æ–¹å¼å„æœ‰åˆ©å¼Šï¼Œä»ä»¥ä¸‹å„ä¸ªæ–¹é¢æ¥å¯¹æ¯”åˆ†æã€‚æ€»ä½“æ¥è®²å•ä»“å¯¹äºå¼€å‘äººå‘˜æ›´å‹å¥½ï¼Œå¯¹äºCI/CDæ›´ç®€å•ï¼Œä½†å¯¹æ¶æ„å’Œæ§åˆ¶æ›´ä¸å‹å¥½ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬åŸºäºå¼ºæƒé™ç®¡ç†çš„éœ€æ±‚ï¼Œä½¿ç”¨å¤šä»“æ¨¡å¼ã€‚</p><table><thead><tr><th>ç»´åº¦</th><th>å¤šä»“ï¼ˆæ¯ä¸ªæ¨¡å—ä¸€ä¸ªä»“ï¼‰</th><th>å•ä»“ï¼ˆä¸€ä¸ªä»“å¤šä¸ªç›®å½•ï¼‰</th></tr></thead><tbody><tr><td>æ¨¡å—è§£è€¦</td><td>éå¸¸å¼ºï¼Œæ¨¡å—ç‹¬ç«‹ï¼Œä¾¿äºå¤ç”¨</td><td>å¼±ï¼Œæ¨¡å—é—´å®¹æ˜“äº§ç”Ÿéšå¼ä¾èµ–</td></tr><tr><td>ç‰ˆæœ¬æ§åˆ¶</td><td>æ¯ä¸ªæ¨¡å—å•ç‹¬ tag/version</td><td>æ‰€æœ‰æ¨¡å—åŒä¸€ä¸ªç‰ˆæœ¬</td></tr><tr><td>CI/CD åˆ†å¸ƒå¼</td><td>æ„å»ºéœ€å…³å¿ƒä¾èµ–çš„æ¥å£ä»“ã€å…¬å…±ç»„ä»¶ä»“ï¼Œæ¨¡å—å¯å•ç‹¬æ„å»ºæµ‹è¯•</td><td>æ„å»ºéœ€å…³å¿ƒæ¨¡å—çš„åˆ’åˆ†ï¼Œæœ‰ç›¸åº”çš„æ„å»ºé…ç½®è§„åˆ™</td></tr><tr><td>å¼€å‘æ•ˆç‡</td><td>å¤§å›¢é˜Ÿå¼€å‘ã€å¹¶è¡Œæ¨è¿›æ›´æ–¹ä¾¿</td><td>å°å›¢é˜Ÿé›†ä¸­å¼€å‘æ›´æ–¹ä¾¿</td></tr><tr><td>æƒé™æ§åˆ¶</td><td>æ¯ä¸ªæ¨¡å—å¯è®¾ç½®ä¸åŒæƒé™</td><td>æ‰€æœ‰äººå¯¹æ•´ä¸ªä»“éƒ½æœ‰æƒé™</td></tr><tr><td>å­æ¨¡å—ç®¡ç†</td><td>éœ€è¦ç”¨ Git Submodule / Repo / manifest å·¥å…·</td><td>æ— éœ€å¤šä»“ç®¡ç†å·¥å…·</td></tr><tr><td>é€‚åˆåœºæ™¯</td><td>å¾®æœåŠ¡æ¶æ„ / å¤šå›¢é˜Ÿ / DevOps åœºæ™¯</td><td>å•ä¸€å›¢é˜Ÿ / å†…éƒ¨é«˜è€¦åˆé¡¹ç›®</td></tr></tbody></table><h3 id="åˆ†æ”¯ç­–ç•¥"><a class="header-anchor" href="#åˆ†æ”¯ç­–ç•¥"></a>åˆ†æ”¯ç­–ç•¥</h3><p>åˆ†æ”¯çš„åˆ’åˆ†ä¸»è¦å—æ¨¡å—è€¦åˆåº¦ã€å›¢é˜Ÿåˆ’åˆ†ã€é›†æˆæ–¹å¼ã€æµ‹è¯•æ•ˆç‡ç­‰æ–¹é¢çš„å½±å“ï¼Œé›†æˆæ–¹å¼å’Œæµ‹è¯•æ•ˆç‡å†³å®šäº†åˆ†æ”¯çš„å±‚çº§ã€‚</p><p>åœ¨äº‘æœåŠ¡å¼€å‘ä¸­ï¼Œå¾®æœåŠ¡é€šå¸¸æ˜¯ç‹¬ç«‹é›†æˆã€ç‹¬ç«‹éƒ¨ç½²ã€ç‹¬ç«‹æ¼”è¿›çš„ï¼Œå¾®æœåŠ¡çš„ä»£ç åˆ†æ”¯é€šå¸¸å’Œç¯å¢ƒç›¸åŒ¹é…ã€‚</p><table><thead><tr><th>ç¯å¢ƒ</th><th>æ¨è Git åˆ†æ”¯å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>å¼€å‘ç¯å¢ƒ</td><td><code>develop</code> / <code>feature/*</code></td><td>å¼€å‘åŠŸèƒ½ã€å•å…ƒæµ‹è¯•ã€å¤šäººåä½œ</td></tr><tr><td>æµ‹è¯•/é›†æˆç¯å¢ƒ</td><td><code>release/*</code></td><td>è”è°ƒæµ‹è¯•ï¼ŒåŠŸèƒ½å†»ç»“ï¼Œå‡†å¤‡ä¸Šçº¿</td></tr><tr><td>é¢„ç”Ÿäº§ç¯å¢ƒ</td><td><code>pre-release</code> / <code>staging</code></td><td>ç°åº¦éªŒè¯ã€ç¨³å®šæ€§æµ‹è¯•ï¼Œæ¥è¿‘çº¿ä¸Š</td></tr><tr><td>ç”Ÿäº§ç¯å¢ƒ</td><td><code>main</code> / <code>master</code></td><td>æœ€ç»ˆä¸Šçº¿ä»£ç ï¼Œåªæ¥å—ä» pre åˆ†æ”¯ promote çš„æ”¹åŠ¨</td></tr></tbody></table><p><em>æ³¨ï¼šå¯¹äºå†…éƒ¨äº‘æœåŠ¡æ¥è®²ï¼Œå¯ä»¥é€‚å½“å‡å°‘åˆ†æ”¯æ¥è¾¾æˆå¿«é€ŸéªŒè¯å¿«é€Ÿä¸Šçº¿çš„ç›®çš„ï¼Œåœ¨è´¨é‡å’Œæ•ˆç‡å¹³è¡¡ä¸‹ï¼Œå°½é‡ä¿è¯æ¯ä¸ªç¯å¢ƒçš„å¯è¿½æº¯æ€§</em></p><p>æ™ºèƒ½é©¾é©¶è½¯ä»¶ç³»ç»Ÿæ˜¯ä¸€ä¸ªå¾ˆåºå¤§çš„ç³»ç»Ÿï¼Œæœ‰MCUè½¯ä»¶ï¼Œä¹Ÿæœ‰SoCè½¯ä»¶ã€‚</p><ul><li>MCUé€šå¸¸æ˜¯åŸºäºAUTOSAR CPå¼€å‘çš„ä¸€ä¸ªå•ç‰‡æœºç³»ç»Ÿï¼Œé€šè¿‡å·¥å…·å»ºæ¨¡å’Œé…ç½®ç”ŸæˆBSWå’ŒRTEæ¨¡å—ï¼Œ å®ç°ä¸šåŠ¡åº”ç”¨SWCæ¨¡å—ä»£ç ï¼ŒSWCæ¨¡å—æŒ‰é¢†åŸŸåˆ’åˆ†ï¼Œæ¯”å¦‚å¹³å°ã€è§„æ§ç­‰</li><li>SoCè½¯ä»¶ç³»ç»Ÿä»ä¸‹å¾€ä¸Šåˆ†ä¸ºåº•è½¯ã€å¹³å°ã€ä¸šåŠ¡å±‚ï¼Œä¸šåŠ¡å±‚æŒ‰ä¼ ç»Ÿåˆ†å±‚æ¶æ„åˆ†ä¸ºæ„ŸçŸ¥èåˆã€æ„å›¾å®šä½ã€è§„æ§é¢„æµ‹ç­‰ï¼Œåœ¨ç«¯åˆ°ç«¯å¤§æ¨¡å‹ä¸‹ï¼Œè¿™ç§åŠŸèƒ½åˆ†å±‚çš„ç•Œçº¿å¯èƒ½æ¯”è¾ƒæ¨¡ç³Šã€å˜æˆäº†æ¨¡å‹çš„ä¸€éƒ¨åˆ†ã€‚</li></ul><p>æ— è®ºMCUå’ŒSoCï¼Œéƒ½æ¶‰åŠä¸åŒçš„å›¢é˜Ÿã€å¤šä¸ªå­ç³»ç»Ÿæˆ–è€…æ¨¡å—ï¼Œè€ƒè™‘åˆ°å¤šå›¢é˜Ÿã€å¤šå­ç³»ç»Ÿ/æ¨¡å—çš„è§£è€¦ã€åä½œå¼€å‘ï¼Œæˆ‘ä»¬æ›´å€¾å‘äºæŒ‰å­ç³»ç»Ÿå¹¶è¡Œå¼€å‘é€çº§é›†æˆçš„æ–¹å¼ã€‚åˆ†æ”¯è®¾è®¡å¦‚ä¸‹ï¼š</p><table><thead><tr><th>ç³»ç»Ÿå±‚çº§</th><th>Git åˆ†æ”¯</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ¨¡å—</td><td>ä¸ªäººåˆ†æ”¯</td><td>å¼€å‘åŠŸèƒ½ã€å•å…ƒæµ‹è¯•ã€å¤šäººåä½œ</td></tr><tr><td>å­ç³»ç»Ÿ</td><td>å­ç³»ç»Ÿ(é¡¹ç›®å›¢é˜Ÿ)åˆ†æ”¯</td><td>å­ç³»ç»Ÿè”è°ƒæµ‹è¯•ï¼ŒåŠŸèƒ½å†»ç»“ï¼Œå‡†å¤‡å¯¹ç³»ç»Ÿå‘å¸ƒ</td></tr><tr><td>ç³»ç»Ÿ</td><td>ç³»ç»Ÿåˆ†æ”¯(SoCå…¨é‡/MCUå…¨é‡)</td><td>æ•´ç³»ç»Ÿè”è°ƒ,ç¨³å®šæ€§æµ‹è¯•ï¼Œå‡†å¤‡å¯¹è§£å†³æ–¹æ¡ˆå‘å¸ƒ</td></tr><tr><td>è§£å†³æ–¹æ¡ˆ</td><td>NA</td><td>å…¨åŸŸé›†æˆï¼ŒåŠŸèƒ½æµ‹è¯•ï¼Œæœ€ç»ˆå¯¹ç”¨æˆ·å‘å¸ƒ</td></tr></tbody></table><p>åŒæ ·çš„ï¼Œåˆ†æ”¯å‘½åå¯ä»¥æ ¹æ®åˆ¶å®šçš„è§„èŒƒæ¥ï¼Œä¸¾ä¾‹å¦‚ä¸‹ï¼š</p><table><thead><tr><th>ç±»å‹</th><th>æ¨è Git åˆ†æ”¯å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ä¸ªäººåˆ†æ”¯</td><td><code>br_&lt;name&gt;*</code></td><td>ç”¨äºå¼€å‘äººå‘˜å¼€å‘ç‰¹æ€§ã€è§£å†³é—®é¢˜ã€ä¼˜åŒ–ç­‰</td></tr><tr><td>å­ç³»ç»Ÿ(é¡¹ç›®å›¢é˜Ÿ)åˆ†æ”¯</td><td><code>br_develop*</code></td><td>ç”¨äºå­ç³»ç»Ÿé›†æˆã€å­ç³»ç»Ÿæµ‹è¯•</td></tr><tr><td>ç³»ç»Ÿåˆ†æ”¯</td><td><code>master</code> / <code>develop</code></td><td>ç”¨äºç³»ç»Ÿçº§é›†æˆã€ç³»ç»Ÿçº§æµ‹è¯•</td></tr><tr><td>ç‰¹æ€§åˆ†æ”¯</td><td><code>br_feature*</code></td><td>ç”¨äºå¤šæ¨¡å—ç‰¹æ€§å¼€å‘è”è°ƒ</td></tr><tr><td>å‘å¸ƒåˆ†æ”¯</td><td><code>br_release*</code> / <code>br_bugfix*</code></td><td>ç”¨äºç‰ˆæœ¬å‘å¸ƒæˆ–è€…ç‰ˆæœ¬bugfix</td></tr></tbody></table><p>æ¨¡å‹ç›¸å…³çš„ä»£ç æœ‰ä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯è®­ç»ƒä»£ç ï¼Œè·Ÿéšäº‘æœåŠ¡çš„æ–¹å¼ï¼Œä¸€éƒ¨åˆ†æ˜¯è½¦ç«¯éƒ¨ç½²åŠæ¨¡å‹åå¤„ç†ï¼Œè·Ÿéšæ™ºèƒ½é©¾é©¶è½¯ä»¶ã€‚</p><h3 id="é›†æˆç­–ç•¥"><a class="header-anchor" href="#é›†æˆç­–ç•¥"></a>é›†æˆç­–ç•¥</h3><p>è½¯ä»¶æ¶æ„å†³å®šäº†é›†æˆç­–ç•¥ï¼Œæ¯”å¦‚æˆ‘ä»¬é‡‡ç”¨å¾®æœåŠ¡è½¯ä»¶æ¶æ„å’Œå•ä½“æ¶æ„ä½¿ç”¨çš„é›†æˆç­–ç•¥æ˜¯ä¸åŒçš„ã€‚å¯¹äºæ™ºèƒ½é©¾é©¶è¿™æ ·çš„åºå¤§çš„ç³»ç»Ÿï¼Œé€šå¸¸éƒ½æ˜¯å¤šç§é›†æˆæ–¹å¼çš„ç»„åˆç­–ç•¥ã€‚å¸¸è§çš„é›†æˆæ–¹å¼å¦‚ä¸‹ï¼š</p><table><thead><tr><th>é›†æˆæ–¹å¼</th><th>æè¿°</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>æºç é›†æˆ</td><td>æ¨¡å—æºç æ”¾åˆ°åŒä¸€é¡¹ç›®ä¸€èµ·ç¼–è¯‘</td><td>è·¨æ¨¡å—è°ƒè¯•æ–¹ä¾¿ï¼Œæ¥å£ä¸€è‡´æ€§å¼º</td><td>è€¦åˆåº¦é«˜ã€ç¼–è¯‘æ…¢ã€åˆ†æ”¯ç®¡ç†å¤æ‚</td><td>å•å›¢é˜Ÿå¼€å‘ã€å¿«é€Ÿè¿­ä»£</td></tr><tr><td>äºŒè¿›åˆ¶é›†æˆ</td><td>æ¨¡å—æä¾› .so/.dll/.a ç­‰äº§ç‰©ï¼Œé€šè¿‡ ABI è¿æ¥</td><td>ä¿æŠ¤ IPã€ç¼–è¯‘å¿«ã€è·¨å¹³å°äº¤ä»˜</td><td>æ¥å£å˜åŒ–éœ€è¦é€‚é…ï¼Œæ’æŸ¥é—®é¢˜éš¾</td><td>ç¬¬ä¸‰æ–¹ SDKã€ä¾›åº”å•†æ¨¡å‹</td></tr><tr><td>åè®®é›†æˆ</td><td>æ¨¡å—é€šè¿‡ç½‘ç»œã€IPCã€æ¶ˆæ¯ä¸­é—´ä»¶é€šä¿¡</td><td>åˆ†å¸ƒå¼ã€æ¾è€¦åˆã€æ”¯æŒè·¨è¿›ç¨‹æˆ–å¤šæœº</td><td>å®æ—¶æ€§å·®äºæœ¬åœ°è°ƒç”¨ï¼Œæ¥å£ç®¡ç†å¤æ‚</td><td>å¤š ECUã€å¤šè¿›ç¨‹ã€äº‘è¾¹äº¤äº’</td></tr><tr><td>æœåŠ¡åŒ–é›†æˆ</td><td>æ¨¡å—å°è£…ä¸ºæœåŠ¡ï¼Œç”¨ REST/gRPC/RPC/Kafka æ¥å…¥</td><td>ç‹¬ç«‹éƒ¨ç½²ã€å¼¹æ€§ä¼¸ç¼©ã€æ”¯æŒ DevOps æµæ°´çº¿</td><td>éƒ¨ç½²å¤æ‚ã€æœåŠ¡æ²»ç†æˆæœ¬é«˜</td><td>äº‘ç«¯ã€å¾®æœåŠ¡æ¶æ„</td></tr><tr><td>å®¹å™¨åŒ–é›†æˆ</td><td>æ¨¡å—æ‰“åŒ…åˆ° Docker ç­‰å®¹å™¨ä¸­è¿è¡Œ</td><td>ç¯å¢ƒéš”ç¦»ã€æ˜“éƒ¨ç½²ã€å¯ç»“åˆ CI/CD</td><td>å¯¹ç¡¬ä»¶èµ„æºæ•æ„Ÿã€éœ€è¦å®¹å™¨ç¼–æ’</td><td>è·¨ç¯å¢ƒéƒ¨ç½²ã€DevOpsã€äº‘åŸç”Ÿ</td></tr><tr><td>æ’ä»¶åŒ–é›†æˆ</td><td>æ¨¡å—æ‰“åŒ…æˆæ’ä»¶ï¼Œä¸»ç¨‹åºè¿è¡Œæ—¶åŠ¨æ€åŠ è½½</td><td>çƒ­æ’æ‹”çµæ´»ã€å¯é€‰åŠŸèƒ½</td><td>æ¥å£å…¼å®¹æ€§éš¾ç»´æŠ¤ï¼Œå‡ºé”™æ—¶æ˜“å´©æºƒ</td><td>æ¡Œé¢è½¯ä»¶ã€æ¸¸æˆå¼•æ“ã€IDE ç­‰æ’ä»¶ç³»ç»Ÿ</td></tr></tbody></table><p>åœ¨äº‘æœåŠ¡å¼€å‘ä¸­ï¼Œå¾®æœåŠ¡æ¨¡å—é€šè¿‡æºç é›†æˆï¼Œå¾®æœåŠ¡é—´é€šè¿‡æœåŠ¡åŒ–é›†æˆ(REST/gRPC/RPC/Kafka)ï¼Œå¾®æœåŠ¡é€šè¿‡å®¹å™¨åŒ–é›†æˆã€‚</p><p>åœ¨è½¦ç«¯ç³»ç»Ÿä¸­ï¼Œåœ¨åŒä¸€ECUå†…ï¼Œæ¨¡å—å†…é€šè¿‡æºç é›†æˆè‡ªç ”éƒ¨åˆ† + é€šè¿‡äºŒè¿›åˆ¶é›†æˆç¬¬ä¸‰æ–¹äº¤ä»˜ï¼›æ¨¡å—é—´é€šè¿‡æ¥å£åè®®é›†æˆ(ROS2 DDS)ï¼›å¤šECUé€šè¿‡æ¥å£åè®®é›†æˆ(æ¯”å¦‚åº•ç›˜åŸŸé€šè¿‡CAN) + æœåŠ¡åŒ–é›†æˆ(æ¯”å¦‚åœ°å›¾æœåŠ¡)</p><p>å¸¸è§çš„é›†æˆç­–ç•¥å¦‚ä¸‹ï¼š</p><table><thead><tr><th>ç­–ç•¥ç±»å‹</th><th>æè¿°</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>å¤§çˆ†ç‚¸é›†æˆ</td><td>æ‰€æœ‰æ¨¡å—ä¸€èµ·å®Œæˆåä¸€æ¬¡æ€§é›†æˆ</td><td>æ¨¡å—ä¾èµ–å°‘ã€å°é¡¹ç›®</td></tr><tr><td>å¢é‡é›†æˆ</td><td>æ¯æ¬¡é›†æˆéƒ¨åˆ†æ¨¡å—ï¼Œå¹¶å¯¹æ¯æ¬¡é›†æˆç»“æœåšéªŒè¯</td><td>å¤§å‹ç³»ç»Ÿå¼€å‘ã€æ•æ·äº¤ä»˜</td></tr><tr><td>è‡ªé¡¶å‘ä¸‹</td><td>å…ˆæ­å»ºç³»ç»Ÿä¸»å¹²/æ¡†æ¶ï¼Œé€æ­¥é›†æˆåº•å±‚å­æ¨¡å—</td><td>ç³»ç»Ÿæ¶æ„ä¸ç¡®å®šï¼Œéœ€æ—©æœŸåŸå‹</td></tr><tr><td>è‡ªåº•å‘ä¸Š</td><td>å…ˆå°†åº•å±‚ç»„ä»¶é›†æˆå¥½ï¼Œå†é€æ­¥ç»„åˆæˆé«˜å±‚åŠŸèƒ½</td><td>åº•å±‚æˆç†Ÿåº¦é«˜ã€ä¸Šå±‚ä¾èµ–åº•å±‚</td></tr><tr><td>æ²™ç›’é›†æˆ</td><td>å„æ¨¡å—åœ¨ç‹¬ç«‹ç¯å¢ƒï¼ˆæ²™ç›’ï¼‰å…ˆå•ç‹¬éªŒè¯ï¼Œå†åˆå…¥ä¸»åˆ†æ”¯/ä¸»ç³»ç»Ÿ</td><td>å¤§å›¢é˜Ÿå¹¶è¡Œå¼€å‘ï¼Œé¿å…é›†æˆå†²çª</td></tr><tr><td>æŒç»­é›†æˆï¼ˆCIï¼‰</td><td>é€šè¿‡è‡ªåŠ¨åŒ–æµæ°´çº¿åœ¨æ¯æ¬¡ä»£ç æäº¤åè‡ªåŠ¨æ‹‰èµ·ç¼–è¯‘ã€å•å…ƒæµ‹è¯•å’Œéƒ¨åˆ†é›†æˆæµ‹è¯•</td><td>æ•æ·å¼€å‘ã€å¿«é€Ÿåé¦ˆ</td></tr></tbody></table><p>åœ¨è½¦ç«¯ç³»ç»Ÿä¸­ï¼Œæ•´ä½“ä¸Šæˆ‘ä»¬é‡‡ç”¨è‡ªåº•å‘ä¸Šçš„é›†æˆç­–ç•¥ï¼Œåº•å±‚è½¯ä»¶ã€è½¯ä»¶å¹³å°ã€ä¸Šå±‚åº”ç”¨é€çº§é›†æˆã€‚å„ä¸ªå­ç³»ç»Ÿé‡‡ç”¨æ²™ç›’é›†æˆç­–ç•¥ï¼Œåœ¨ç‹¬ç«‹ç¯å¢ƒæˆ–è€…æœ€æ–°çš„å‘å¸ƒç‰ˆæœ¬ç¯å¢ƒä¸­å•ç‹¬éªŒè¯å­ç³»ç»Ÿï¼ŒéªŒè¯é€šè¿‡åå†åˆå…¥ä¸»åˆ†æ”¯é›†æˆã€‚å¯¹äºæ¯ä¸ªæ¨¡å—ï¼Œé€šè¿‡æŒç»­é›†æˆçš„æ–¹å¼åœ¨æ¯æ¬¡ä»£ç åˆå¹¶å‰æ‹‰èµ·ç¼–è¯‘ã€æµ‹è¯•ã€é™æ€æ£€æŸ¥ç­‰æ£€æŸ¥é¡¹ã€‚</p><h3 id="éªŒè¯ç­–ç•¥"><a class="header-anchor" href="#éªŒè¯ç­–ç•¥"></a>éªŒè¯ç­–ç•¥</h3><p>éªŒè¯ç­–ç•¥çš„ç›®æ ‡æ˜¯åœ¨å„ä¸ªé˜¶æ®µåŠæ—©çš„å‘ç°å¹¶ä¿®æ­£é—®é¢˜ï¼Œç¡®ä¿åŠŸèƒ½ç¬¦åˆéœ€æ±‚é¢„æœŸï¼Œä¿è¯ç³»ç»Ÿé²æ£’æ€§ã€‚åŒæ—¶èƒ½å¤Ÿæ”¯æ’‘ç›¸å…³è®¤è¯(å¦‚ISO 26262ã€ASILã€ASPICE)ç­‰ã€‚å¸¸è§çš„ç­–ç•¥å¦‚ä¸‹ï¼š</p><table><thead><tr><th>éªŒè¯ç¯èŠ‚</th><th>éªŒè¯å†…å®¹</th><th>é€‚ç”¨é˜¶æ®µ</th></tr></thead><tbody><tr><td>å•å…ƒæµ‹è¯•ï¼ˆUnit Testï¼‰</td><td>é’ˆå¯¹æœ€å°å¯æµ‹å•å…ƒï¼ˆå‡½æ•°/ç±»ï¼‰åšéªŒè¯</td><td>å¼€å‘é˜¶æ®µ</td></tr><tr><td>æ¨¡å—æµ‹è¯•ï¼ˆModule Testï¼‰</td><td>éªŒè¯å•ä¸€æ¨¡å—åŠŸèƒ½ã€è¾¹ç•Œã€æ¥å£ç¬¦åˆé¢„æœŸ</td><td>æ¨¡å—å®Œæˆå</td></tr><tr><td>é›†æˆæµ‹è¯•ï¼ˆIntegration Testï¼‰</td><td>éªŒè¯æ¨¡å—ä¹‹é—´äº¤äº’ã€æ¥å£å…¼å®¹ã€æ•°æ®ä¼ é€’æ­£ç¡®</td><td>æ¨¡å—é›†æˆé˜¶æ®µ</td></tr><tr><td>ç³»ç»Ÿæµ‹è¯•ï¼ˆSystem Testï¼‰</td><td>éªŒè¯æ•´ä¸ªç³»ç»Ÿçš„åŠŸèƒ½ã€æ€§èƒ½ã€ç¨³å®šæ€§ã€ç”¨æˆ·åœºæ™¯è¦†ç›–</td><td>ç³»ç»Ÿé›†æˆå</td></tr><tr><td>å›å½’æµ‹è¯•ï¼ˆRegression Testï¼‰</td><td>æ¯æ¬¡ä¿®æ”¹åéªŒè¯æ—§åŠŸèƒ½ä¾ç„¶å¯ç”¨</td><td>æŒç»­é›†æˆ/è¿­ä»£äº¤ä»˜ä¸­</td></tr><tr><td>é™æ€åˆ†æï¼ˆStatic Analysisï¼‰</td><td>å·¥å…·åŒ–æ‰«æä»£ç é£æ ¼ã€å†…å­˜å®‰å…¨ã€MISRAã€CERTã€å¤æ‚åº¦ç­‰</td><td>å¼€å‘/æŒç»­é›†æˆ</td></tr><tr><td>åŠ¨æ€åˆ†æï¼ˆDynamic Analysisï¼‰</td><td>è¿è¡Œæ—¶ç›‘æµ‹å†…å­˜ã€CPUã€çº¿ç¨‹ã€æ€§èƒ½çƒ­ç‚¹ã€æ­»é”</td><td>è°ƒè¯•/æ€§èƒ½éªŒè¯</td></tr><tr><td>æ¨¡æ‹Ÿ/ä»¿çœŸï¼ˆSimulationï¼‰</td><td>ç”¨ HIL/SIL/MIL ç­‰æ¨¡æ‹Ÿç¯å¢ƒéªŒè¯ç³»ç»Ÿåœ¨çœŸå®æ¡ä»¶ä¸‹çš„è¡¨ç°</td><td>åµŒå…¥å¼/è½¦è½½å¼€å‘</td></tr><tr><td>åœºæ™¯å›æ”¾éªŒè¯ï¼ˆReplay Testï¼‰</td><td>åœ¨æ„ŸçŸ¥/æ™ºèƒ½é©¾é©¶ä¸­ç”¨å®è½¦æˆ–æ•°æ®é›†å›æ”¾ä¼ æ„Ÿå™¨ã€è½¦è¾†è½¨è¿¹éªŒè¯ç®—æ³•</td><td>æ„ŸçŸ¥/å†³ç­–/è§„åˆ’æ¨¡å—</td></tr><tr><td>å®è½¦éªŒè¯ï¼ˆOn-vehicle Testï¼‰</td><td>å°†ç³»ç»Ÿéƒ¨ç½²åˆ°çœŸå®è½¦è¾†è¿›è¡Œé“è·¯ç¯å¢ƒä¸‹çš„ç»¼åˆéªŒè¯</td><td>éªŒè¯é˜¶æ®µæœ«æœŸ</td></tr></tbody></table><p>å¯¹äºæ¨¡å‹æ¥è¯´ï¼ŒéªŒè¯é¡¹å·®ä¸å¤šï¼ŒéªŒè¯å†…å®¹å˜æˆæ¨¡å‹ç›¸å…³çš„æŒ‡æ ‡ï¼›</p><table><thead><tr><th>éªŒè¯ç¯èŠ‚</th><th>éªŒè¯å†…å®¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>å•å…ƒéªŒè¯</td><td>è®­ç»ƒã€æ¨ç†æ˜¯å¦èƒ½æ­£å¸¸å®Œæˆ</td><td>å«è¾¹ç•Œå€¼ã€å¼‚å¸¸å€¼ç­‰</td></tr><tr><td>åŠŸèƒ½éªŒè¯</td><td>æ¨¡å‹æ˜¯å¦ç¬¦åˆä»»åŠ¡ç›®æ ‡</td><td>å¦‚æ£€æµ‹å¬å›ç‡ã€åˆ†å‰² IoUã€åˆ†ç±»å‡†ç¡®ç‡</td></tr><tr><td>æ€§èƒ½éªŒè¯</td><td>é€Ÿåº¦ã€å†…å­˜ã€å»¶è¿Ÿã€ååé‡æ˜¯å¦è¾¾æ ‡</td><td>ç‰¹åˆ«æ˜¯åœ¨ç›®æ ‡ç¡¬ä»¶ä¸Šå¦‚Orinã€MCU</td></tr><tr><td>å›å½’éªŒè¯</td><td>æ–°æ¨¡å‹å¯¹æ¯”åŸºçº¿æ¨¡å‹æ— æ€§èƒ½é€€åŒ–</td><td>æŒ‡æ ‡ä¸‹é™è¦é˜»æ­¢åˆå…¥</td></tr><tr><td>åœºæ™¯éªŒè¯</td><td>å…¸å‹/æç«¯åœºæ™¯ä¸­æ¨¡å‹è¡¨ç°</td><td>æ™ºèƒ½é©¾é©¶ä¸­å¸¸ç”¨ç¦»çº¿å›æ”¾åœºæ™¯é›†</td></tr><tr><td>é²æ£’æ€§éªŒè¯</td><td>è¾“å…¥å™ªå£°ã€åˆ†è¾¨ç‡å˜åŒ–ã€å…‰ç…§ç­‰å¹²æ‰°ä¸‹è¡¨ç°</td><td>çœŸå®åœºæ™¯ä¸å¯é¿å…æ³¢åŠ¨</td></tr><tr><td>æ³›åŒ–éªŒè¯</td><td>æ–°åœºæ™¯/æœªè§ç¯å¢ƒæ•°æ®ä¸Šçš„æ³›åŒ–èƒ½åŠ›</td><td>é¿å…è¿‡æ‹Ÿåˆ</td></tr><tr><td>åå·®éªŒè¯</td><td>æ•°æ®åˆ†å¸ƒã€é¢„æµ‹ç»“æœä¸­çš„æ½œåœ¨åå·®</td><td>ç¬¦åˆå…¬å¹³æ€§ã€åˆè§„æ€§éœ€æ±‚</td></tr></tbody></table><p><em>æ³¨ï¼šæ¯ä¸ªéªŒè¯é˜¶æ®µéƒ½åº”è¯¥å®šä¹‰ç›¸åº”çš„å‡†å…¥å‡†å‡ºæ¡ä»¶ï¼Œè¿™é‡Œæš‚åšé—ç•™ï¼Œåç»­å•ç‹¬å±•å¼€ã€‚</em></p><h3 id="ç‰ˆæœ¬ç­–ç•¥"><a class="header-anchor" href="#ç‰ˆæœ¬ç­–ç•¥"></a>ç‰ˆæœ¬ç­–ç•¥</h3><p>ç‰ˆæœ¬ç­–ç•¥çš„æ ¸å¿ƒç›®æ ‡æ˜¯ä¿è¯è½¯ä»¶ç‰ˆæœ¬çš„å¯è¿½æº¯æ€§å’Œå¯ç®¡ç†æ€§ï¼Œæ”¯æŒå¹¶è¡Œå¼€å‘ã€å¿«é€Ÿä¿®å¤å’Œç¨³å®šå‘å¸ƒï¼Œæ˜ç¡®ç‰ˆæœ¬è®¡åˆ’å’Œç‰ˆæœ¬ç®¡ç†æ–¹å¼ã€‚</p><table><thead><tr><th>ç­–ç•¥</th><th>è¯´æ˜</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆSemVerï¼‰</td><td>ä½¿ç”¨ MAJOR.MINOR.PATCH è¡¨ç¤ºç ´åæ€§ã€å…¼å®¹æ€§ã€æ–°åŠŸèƒ½</td><td>å…¬å…± APIã€å¯¹å¤– SDK/è½¯ä»¶åŒ…</td></tr><tr><td>æ—¶é—´æˆ³ç‰ˆæœ¬</td><td>ä½¿ç”¨æ—¥æœŸï¼ˆ2024.06.27ï¼‰è¡¨ç¤ºç‰ˆæœ¬</td><td>å†…éƒ¨å¿«é€Ÿè¿­ä»£ã€æ•æ·å¼€å‘</td></tr><tr><td>åˆ†æ”¯ç®¡ç†</td><td>master/dev + feature/hotfix åˆ†æ”¯æ¨¡å‹</td><td>å›¢é˜Ÿè§„æ¨¡åŒ–å¼€å‘ã€ç‰ˆæœ¬å¹¶è¡Œç»´æŠ¤</td></tr><tr><td>æ ‡ç­¾ç®¡ç†</td><td>æ¯æ¬¡é›†æˆæˆåŠŸååœ¨ä¸»åˆ†æ”¯æ‰“ tag</td><td>äº¤ä»˜èŠ‚ç‚¹ã€å›æº¯è°ƒè¯•</td></tr></tbody></table><p>åŸºäºä»¥ä¸Šç­–ç•¥ï¼Œåˆ¶å®šåˆé€‚çš„ç‰ˆæœ¬å·è§„èŒƒå’Œç‰ˆæœ¬æµè½¬æµç¨‹ï¼Œå‰é¢çš„å„ç§ç­–ç•¥æŒ‰ç…§ç‰ˆæœ¬ç®¡ç†æµç¨‹åˆ¶å®šå¯é‡åŒ–çš„è§„åˆ™æ¡ä»¶å¹¶åº”ç”¨äºç‰ˆæœ¬ç®¡ç†ä¸­ã€‚</p><h2 id="æ ¸å¿ƒç¯èŠ‚"><a class="header-anchor" href="#æ ¸å¿ƒç¯èŠ‚"></a>æ ¸å¿ƒç¯èŠ‚</h2><p>DevOps æœ‰ 8 ä¸ªæ ¸å¿ƒç¯èŠ‚ï¼š</p><table><thead><tr><th>é˜¶æ®µ</th><th>è‹±æ–‡æœ¯è¯­</th><th>ä¸»è¦å·¥ä½œå†…å®¹</th></tr></thead><tbody><tr><td>1ï¸âƒ£ è§„åˆ’</td><td>Plan</td><td>éœ€æ±‚åˆ†æã€ä»»åŠ¡è§„åˆ’ã€éœ€æ±‚æ‹†åˆ†ï¼ˆå¦‚ Jiraã€Confluenceï¼‰</td></tr><tr><td>2ï¸âƒ£ å¼€å‘</td><td>Develop</td><td>ç¼–ç ã€ä»£ç æäº¤ã€ç‰ˆæœ¬æ§åˆ¶ï¼ˆå¦‚ Gitã€IDEï¼‰</td></tr><tr><td>3ï¸âƒ£ æ„å»º</td><td>Build</td><td>ç¼–è¯‘ã€æ„å»ºé•œåƒã€ä¾èµ–åˆ†æï¼ˆå¦‚ Make, CMake, Dockerï¼‰</td></tr><tr><td>4ï¸âƒ£ æµ‹è¯•</td><td>Test</td><td>å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€æ¥å£æµ‹è¯•ï¼ˆå¦‚ gtest, pytest, sonarï¼‰</td></tr><tr><td>5ï¸âƒ£ å‘å¸ƒ</td><td>Release/Integrate</td><td>æŒç»­é›†æˆã€ä»£ç åˆå¹¶ã€ç‰ˆæœ¬æ‰“åŒ…ï¼ˆå¦‚ GitLab CI, Jenkinsï¼‰</td></tr><tr><td>6ï¸âƒ£ éƒ¨ç½²</td><td>Deploy</td><td>è‡ªåŠ¨éƒ¨ç½²ã€ç°åº¦å‘å¸ƒã€å›æ»šæœºåˆ¶ï¼ˆå¦‚ K8s, Ansible, Helmï¼‰</td></tr><tr><td>7ï¸âƒ£ è¿è¥</td><td>Operate</td><td>ç³»ç»Ÿè¿ç»´ã€èµ„æºç®¡ç†ã€å®¹å™¨è°ƒåº¦ï¼ˆå¦‚ Prometheus, Kubernetesï¼‰</td></tr><tr><td>8ï¸âƒ£ ç›‘æ§</td><td>Monitor</td><td>æ€§èƒ½æŒ‡æ ‡ã€æ—¥å¿—åˆ†æã€å‘Šè­¦ç³»ç»Ÿï¼ˆå¦‚ Grafana, ELKï¼‰</td></tr></tbody></table><p>å„ç¯èŠ‚æ¶‰åŠçš„è§’è‰²åŠèŒè´£ï¼š</p><table><thead><tr><th>é˜¶æ®µ</th><th>ä¸»è¦è§’è‰²</th><th>èŒè´£è¯´æ˜</th></tr></thead><tbody><tr><td>1ï¸âƒ£ è§„åˆ’</td><td>- äº§å“ç»ç†ï¼ˆPMï¼‰<br>- ç³»ç»Ÿæ¶æ„å¸ˆï¼ˆSAï¼‰<br>- é¡¹ç›®ç»ç†/ç‰ˆæœ¬ç»ç†/EOï¼ˆEngineering Ownerï¼‰<br>- QA</td><td>- å®šä¹‰ç³»ç»Ÿç›®æ ‡ä¸éœ€æ±‚<br>- è§„åˆ’åŠŸèƒ½æ‹†è§£ã€æŠ€æœ¯è·¯å¾„<br>- åˆ¶å®šç‰ˆæœ¬è¿­ä»£èŠ‚å¥<br>- è¯„ä¼°è§„åˆ’å’Œè®¾è®¡è´¨é‡ï¼Œå›æº¯ï¼Œæµç¨‹ä¼˜åŒ–</td></tr><tr><td>2ï¸âƒ£ å¼€å‘</td><td>- æ¨¡å‹è®­ç»ƒ/éƒ¨ç½²å·¥ç¨‹å¸ˆ<br>- ç®—æ³•/å¼€å‘å·¥ç¨‹å¸ˆ<br>- åµŒå…¥å¼å·¥ç¨‹å¸ˆ<br>- ä»¿çœŸå¹³å°å¼€å‘<br>- æµ‹è¯•å¼€å‘å·¥ç¨‹å¸ˆ<br>- QA</td><td>- ç¼–å†™è®­ç»ƒæ¡†æ¶ã€éƒ¨ç½²æ¡†æ¶ï¼Œæ¨¡å‹è®­ç»ƒã€æ ¡å‡†ã€éƒ¨ç½²<br>- ç¼–å†™æ ¸å¿ƒæ¨¡å—ä»£ç ã€å®ç°ç®—æ³•åŠŸèƒ½<br>- é›†æˆä¼ æ„Ÿå™¨ SDKã€èŠ¯ç‰‡ SDK<br>- å®ç°ä»¿çœŸåŠŸèƒ½<br>- ç¼–å†™æµ‹è¯•æ¡†æ¶ã€æµ‹è¯•ç”¨ä¾‹<br>- è¯„ä¼°å¼€å‘è´¨é‡ï¼Œå›æº¯ï¼Œæµç¨‹ä¼˜åŒ–</td></tr><tr><td>3ï¸âƒ£ æ„å»º</td><td>- CI/CD å·¥ç¨‹å¸ˆ<br>- DevOps å·¥ç¨‹å¸ˆ<br>- åŸºç¡€å¹³å°å·¥ç¨‹å¸ˆ<br>- QA</td><td>- é…ç½® CMake ç­‰æ„å»ºç³»ç»Ÿ<br>- å®ç°ç¼–è¯‘æµæ°´çº¿ï¼ˆå¦‚ Jenkins + Dockerï¼‰<br>- ç®¡ç†ä¾èµ–å’Œæ„å»ºç¼“å­˜<br>- è¯„ä¼°æ„å»ºè´¨é‡</td></tr><tr><td>4ï¸âƒ£ æµ‹è¯•</td><td>- æµ‹è¯•å·¥ç¨‹å¸ˆï¼ˆTEï¼‰<br>- ä»¿çœŸæµ‹è¯•å·¥ç¨‹å¸ˆ<br>- QA</td><td>- å•å…ƒæµ‹è¯•/åŠŸèƒ½æµ‹è¯•/å›å½’æµ‹è¯•<br>- åŸºäºä»¿çœŸå¹³å°ä»¿çœŸ<br>- è¯„ä¼°æµ‹è¯•è´¨é‡ï¼ˆè¦†ç›–ç‡ã€æ¼æµ‹ç‡ç­‰ï¼‰ï¼Œå›æº¯ï¼Œæµç¨‹ä¼˜åŒ–</td></tr><tr><td>5ï¸âƒ£ å‘å¸ƒ</td><td>- ç‰ˆæœ¬ç®¡ç†å‘˜<br>- é›†æˆå·¥ç¨‹å¸ˆ<br>- é…ç½®ç®¡ç†å·¥ç¨‹å¸ˆ</td><td>- æ‰“åŒ…å‘å¸ƒè½¯ä»¶ç‰ˆæœ¬<br>- ç®¡ç† OTA ç­–ç•¥<br>- è·Ÿè¸ªä¾èµ–å˜æ›´ã€å›æ»šæœºåˆ¶</td></tr><tr><td>6ï¸âƒ£ éƒ¨ç½²</td><td>- è½¦ç«¯è½¯ä»¶é›†æˆå·¥ç¨‹å¸ˆ<br>- å¹³å°è¿ç»´<br>- éªŒè¯å·¥ç¨‹å¸ˆ</td><td>- å°†ç³»ç»Ÿéƒ¨ç½²è‡³ HIL/SIL/å®è½¦ç¯å¢ƒ<br>- ç®¡ç†ç‰ˆæœ¬å‡çº§ä¸å…¼å®¹æ€§æµ‹è¯•</td></tr><tr><td>7ï¸âƒ£ è¿è¥</td><td>- è¿ç»´å·¥ç¨‹å¸ˆ<br>- æ•°æ®å¹³å°å·¥ç¨‹å¸ˆ<br>- å¸‚åœºè¿è¥<br>- QA</td><td>- å®æ—¶ç›‘æ§ç³»ç»ŸçŠ¶æ€<br>- æ•°æ®é‡‡é›†/æ¸…æ´—/é—­ç¯å›æµ<br>- å¸‚åœºè°ƒç ”ã€å¸‚åœºåé¦ˆã€äº§å“æ¨å¹¿ã€å®¢æˆ·è¿è¥<br>- è¯„ä¼°äº§å“è´¨é‡ï¼Œå›æº¯ï¼Œæµç¨‹ä¼˜åŒ–</td></tr><tr><td>8ï¸âƒ£ ç›‘æ§</td><td>- ç›‘æ§å¹³å°å¼€å‘<br>- è§‚æµ‹å™¨ï¼ˆObserverï¼‰ç³»ç»Ÿå¼€å‘è€…<br>- æ•°æ®åˆ†æå¸ˆ</td><td>- å»ºç«‹è§‚æµ‹ç³»ç»Ÿï¼ˆLog/æŒ‡æ ‡/å¼‚å¸¸è¿½è¸ªï¼‰<br>- å®ç° KPI æŠ¥è­¦ã€è‡ªåŠ¨åŒ– root cause å®šä½<br>- ç›‘æ§æ¨¡å‹æ¼‚ç§»ï¼ˆModel Driftï¼‰</td></tr></tbody></table><h3 id="è§„åˆ’-Plan"><a class="header-anchor" href="#è§„åˆ’-Plan"></a>è§„åˆ’ - Plan</h3><p>Plan é˜¶æ®µæ˜¯ DevOps ç”Ÿå‘½å‘¨æœŸçš„èµ·ç‚¹ï¼Œå…¶æ ¸å¿ƒç›®æ ‡æ˜¯æ”¶é›†å¹¶ç¡®è®¤ä¸šåŠ¡éœ€æ±‚ã€æŠ€æœ¯éœ€æ±‚ï¼Œåˆ¶å®šå¯æ‰§è¡Œçš„å¼€å‘ &amp; è¿ç»´è®¡åˆ’ï¼›å®šä¹‰äº¤ä»˜é‡Œç¨‹ç¢‘ã€éªŒæ”¶æ ‡å‡†ï¼›è§„åˆ’èµ„æºï¼šäººåŠ›ã€ç¡¬ä»¶ã€é¢„ç®—ï¼›æ˜ç¡®æ²Ÿé€šã€å®¡æ‰¹ã€å˜æ›´ç®¡ç†æµç¨‹ã€‚Plan é˜¶æ®µåšå¾—å¥½ï¼Œåç»­çš„ DevOps æµç¨‹æ‰èƒ½é«˜æ•ˆæ— é˜»ã€‚</p><p>Plan é˜¶æ®µçš„å…³é”®æ´»åŠ¨ï¼š</p><table><thead><tr><th>æ´»åŠ¨</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>éœ€æ±‚æ”¶é›†</td><td>ä¸äº§å“/å®¢æˆ·ç¡®è®¤åŠŸèƒ½ã€æ€§èƒ½ã€åˆè§„ç­‰éœ€æ±‚</td></tr><tr><td>ä¼˜å…ˆçº§æ’åº</td><td>ç¡®å®š backlogï¼Œæ’å®šè¿­ä»£è®¡åˆ’</td></tr><tr><td>å·¥ä½œæ‹†è§£</td><td>å°†éœ€æ±‚æ‹†åˆ†ä¸ºæ™ºèƒ½é©¾é©¶ã€æ¨¡å‹ã€äº‘æœåŠ¡å·¥å…·é“¾ä¸‰éƒ¨åˆ†çš„å¯æ‰§è¡Œçš„ä»»åŠ¡ã€Storyã€Bug</td></tr><tr><td>åˆ¶å®šæ—¶é—´è¡¨</td><td>æ˜ç¡®äº¤ä»˜å‘¨æœŸã€é‡Œç¨‹ç¢‘ã€å…³é”®èŠ‚ç‚¹</td></tr><tr><td>é£é™©è¯†åˆ«</td><td>è¯†åˆ«æ½œåœ¨æŠ€æœ¯/èµ„æº/ä¾èµ–é£é™©å¹¶åˆ¶å®šåº”å¯¹æªæ–½</td></tr><tr><td>èµ„æºåˆ†é…</td><td>æ˜ç¡®å¼€å‘ã€æµ‹è¯•ã€è¿ç»´ã€DevOps å¹³å°ç­‰æ‰€éœ€èµ„æº</td></tr><tr><td>ç¯å¢ƒè§„åˆ’</td><td>è®¾è®¡å¼€å‘ã€æµ‹è¯•ã€å°æ¶ã€æµ‹è¯•è½¦ã€é‡‡é›†è½¦ç­‰å„ç¯å¢ƒçš„æ­å»ºå’Œç®¡ç†æ–¹æ¡ˆ</td></tr><tr><td>éªŒæ”¶æ ‡å‡†åˆ¶å®š</td><td>å®šä¹‰åŠŸèƒ½å®Œæˆæ ‡å‡†ã€å›å½’æŒ‡æ ‡ã€ä¸Šçº¿é—¨æ§›</td></tr></tbody></table><p>Plan é˜¶æ®µçš„æ ¸å¿ƒäº§å‡ºï¼š</p><ul><li>äº§å“/åŠŸèƒ½éœ€æ±‚æ–‡æ¡£ï¼Œè®¾è®¡æ–‡æ¡£ï¼Œç¼–ç¨‹è§„èŒƒç­‰</li><li>è¿­ä»£è®¡åˆ’ï¼ˆSprint Planã€Release Planï¼‰</li><li>WBSï¼ˆå·¥ä½œåˆ†è§£ç»“æ„ï¼‰</li><li>å…³é”®é‡Œç¨‹ç¢‘å®šä¹‰</li><li>é£é™©æ¸…å•åŠåº”å¯¹ç­–ç•¥</li><li>ç‰ˆæœ¬è®¡åˆ’ä¸å‘å¸ƒæ’æœŸ</li><li>ç¯å¢ƒå’Œèµ„æºç”³è¯·æ¸…å•</li></ul><h3 id="å¼€å‘-Develop"><a class="header-anchor" href="#å¼€å‘-Develop"></a>å¼€å‘ - Develop</h3><h4 id="è½¯ä»¶ä»£ç "><a class="header-anchor" href="#è½¯ä»¶ä»£ç "></a>è½¯ä»¶ä»£ç </h4><p>Develop é˜¶æ®µçš„æ ¸å¿ƒç›®æ ‡æ˜¯æ ¹æ® Plan é˜¶æ®µçš„éœ€æ±‚ï¼Œå°†åŠŸèƒ½ã€é—®é¢˜æˆ–æ”¹è¿›è½¬åŒ–ä¸ºé«˜è´¨é‡ã€å¯ç»´æŠ¤çš„ä»£ç ï¼›é€šè¿‡ä»£ç å®¡æŸ¥å’Œé™æ€åˆ†æä¿éšœä»£ç è´¨é‡ï¼›ä¿è¯å¼€å‘è¿‡ç¨‹ä¸­çš„ç‰ˆæœ¬ä¸€è‡´æ€§ä¸å¯è¿½æº¯æ€§ï¼›ä¸ºåç»­æŒç»­é›†æˆï¼ˆCIï¼‰å¥ å®šåŸºç¡€ã€‚</p><p>Develop é˜¶æ®µçš„å…³é”®æ´»åŠ¨ï¼š</p><table><thead><tr><th>æ´»åŠ¨</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ç¯å¢ƒå‡†å¤‡</td><td>ç¡®ä¿å¼€å‘ç¯å¢ƒä¸é›†æˆç¯å¢ƒä¸€è‡´ï¼ˆä¾èµ–ç‰ˆæœ¬ã€æ“ä½œç³»ç»Ÿã€ç¼–è¯‘å™¨ç­‰ï¼‰ï¼Œå¦‚ä½¿ç”¨Dockeré•œåƒ</td></tr><tr><td>ä»£ç ç¼–å†™</td><td>æŒ‰ç…§è§„èŒƒã€éœ€æ±‚ç¼–å†™å¯ç»´æŠ¤ã€å¯æ‰©å±•çš„ä»£ç </td></tr><tr><td>å•å…ƒæµ‹è¯•å¼€å‘</td><td>ç¼–å†™å•å…ƒæµ‹è¯•ã€mockï¼Œä¿è¯ä»£ç åŠŸèƒ½ç¬¦åˆé¢„æœŸ</td></tr><tr><td>é™æ€ä»£ç åˆ†æ</td><td>åœ¨æœ¬åœ°æˆ– CI é‡Œé›†æˆ clang-tidyã€cppcheckã€SonarQubeã€coverityã€blackduck ç­‰å·¥å…·</td></tr><tr><td>ä»£ç å®¡æŸ¥ï¼ˆCode Reviewï¼‰</td><td>ä½¿ç”¨ Gerritã€GitLab MR ç­‰åšè¯„å®¡ï¼Œæé«˜ä»£ç è´¨é‡</td></tr><tr><td>ç‰ˆæœ¬ç®¡ç†</td><td>æŒ‰ç…§åˆ†æ”¯ç­–ç•¥æäº¤ã€åˆå¹¶ï¼Œå¹¶å…³è”åˆ°å¯¹åº”çš„éœ€æ±‚ã€ä»»åŠ¡ã€Bugï¼Œä¿è¯å¯å›æº¯</td></tr><tr><td>ç¼–ç è§„èŒƒæ‰§è¡Œ</td><td>ä½¿ç”¨ clang-formatã€pylint åŠäººå·¥å®¡æŸ¥ç­‰åšä»£ç é£æ ¼ç»Ÿä¸€</td></tr><tr><td>æœ¬åœ°éªŒè¯</td><td>åœ¨æœ¬åœ°è¿è¡Œæ„å»ºã€æµ‹è¯•ã€lintï¼Œä¿è¯ä»£ç å¯é€šè¿‡åŸºæœ¬æ£€æŸ¥</td></tr></tbody></table><p>Develop é˜¶æ®µæœ€ä½³å®è·µï¼š</p><ul><li>å°æ­¥æäº¤ï¼šæ¯æ¬¡æäº¤éƒ½åº”å…·å¤‡å¯ç¼–è¯‘ã€å¯é€šè¿‡å•æµ‹çš„è´¨é‡</li><li>åˆ†æ”¯ç®¡ç†ï¼šéµå¾ª Git Flow æˆ– trunk-basedï¼Œé¿å…é•¿æœŸåˆ†æ”¯ç§¯å‹</li><li>æäº¤ä¿¡æ¯è§„èŒƒï¼šä½¿ç”¨è¯­ä¹‰åŒ–æäº¤ï¼Œæ¦‚è¿°æäº¤çš„å†…å®¹</li><li>æµ‹è¯•é©±åŠ¨å¼€å‘ï¼ˆTDDï¼‰ï¼Œæˆ–è€…è‡³å°‘åŒæ—¶å†™å•æµ‹</li><li>è‡ªåŠ¨åŒ–æ£€æŸ¥ï¼šåœ¨æäº¤å‰ hook æˆ–åˆå¹¶å‰æ‰§è¡Œ lintã€æ ¼å¼åŒ–ã€å•æµ‹</li></ul><p>Develop é˜¶æ®µå¸¸è§æŒ‘æˆ˜ï¼š</p><ul><li>Q: ä¸åŒå¼€å‘äººå‘˜ä½¿ç”¨ä¸åŒç¯å¢ƒï¼Œå¯èƒ½å¯¼è‡´â€œworks on my machineâ€é—®é¢˜<ul><li>A: ä½¿ç”¨ Docker å®¹å™¨æˆ– dev container ä¿è¯ä¸€è‡´æ€§</li></ul></li><li>Q: ä»£ç åˆå¹¶æ—¶å¼•å…¥å†²çªæˆ–å›å½’<ul><li>A: é¢‘ç¹æ‹‰å–ä¸»å¹²ã€CI è‡ªåŠ¨å›å½’æµ‹è¯•</li></ul></li><li>Q: ä»£ç è´¨é‡å‚å·®ä¸é½<ul><li>A: å¼ºåˆ¶ä»£ç å®¡æŸ¥ã€é™æ€åˆ†æã€ç»Ÿä¸€é£æ ¼æ£€æŸ¥</li></ul></li></ul><h4 id="æ¨¡å‹"><a class="header-anchor" href="#æ¨¡å‹"></a>æ¨¡å‹</h4><p>æ¨¡å‹ Develop é˜¶æ®µæ ¸å¿ƒç›®æ ‡æ˜¯åŸºäºé‡‡é›†æ•°æ®ç†è§£é—®é¢˜ï¼Œå®Œæˆæ¨¡å‹è®¾è®¡ï¼›å¿«é€Ÿå®ç°æ–°æ¨¡å‹æ¶æ„æˆ–æ”¹è¿›ç°æœ‰æ¨¡å‹ï¼›åœ¨æ ·æœ¬æˆ–å°æ•°æ®é›†ä¸Šåšåˆæ­¥è®­ç»ƒå’ŒéªŒè¯ï¼›åå¤è°ƒä¼˜æ¨¡å‹ç»“æ„ã€æŸå¤±å‡½æ•°ã€åå¤„ç†ç­‰ï¼›è¾“å‡ºç¬¬ä¸€ä¸ªèƒ½åœ¨ä»¿çœŸ/ç¦»çº¿è¯„æµ‹ä¸­å…·å¤‡åˆæ­¥å¯ç”¨æ€§çš„æ¨¡å‹ã€‚</p><p>æ¨¡å‹ Develop é˜¶æ®µçš„å…³é”®æ´»åŠ¨ï¼š</p><table><thead><tr><th>æ´»åŠ¨</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>é—®é¢˜å®šä¹‰</td><td>ç¡®å®šæ¨¡å‹ä»»åŠ¡ï¼ˆå¦‚ç›®æ ‡æ£€æµ‹ã€è¯­ä¹‰åˆ†å‰²ã€è½¨è¿¹é¢„æµ‹ç­‰ï¼‰ï¼Œæ˜ç¡®è¾“å…¥è¾“å‡º</td></tr><tr><td>æ•°æ®æ¢ç´¢</td><td>å¯¹æ ·æœ¬åšå¯è§†åŒ–ã€ç»Ÿè®¡åˆ†æã€åˆ†å¸ƒéªŒè¯ï¼Œå‘ç°æ ·æœ¬é—®é¢˜æˆ–æ¨¡å‹ç›²åŒº</td></tr><tr><td>ç‰¹å¾å·¥ç¨‹</td><td>è®¾è®¡è¾“å…¥ç‰¹å¾ã€å½’ä¸€åŒ–æ–¹æ¡ˆã€æ•°æ®å¢å¼ºç­–ç•¥</td></tr><tr><td>æ¨¡å‹è®¾è®¡</td><td>è®¾è®¡ç¥ç»ç½‘ç»œæ¶æ„ï¼Œå¦‚ YOLO/CenterPoint/Transformer ç­‰</td></tr><tr><td>æ¨¡å‹å®ç°</td><td>åŸºäº PyTorchã€TensorFlowã€MindSpore ç­‰æ¡†æ¶å®ç°</td></tr><tr><td>è®­ç»ƒæµç¨‹</td><td>æ„å»ºåˆæ­¥è®­ç»ƒè„šæœ¬ï¼Œé…ç½®æŸå¤±å‡½æ•°ã€ä¼˜åŒ–å™¨ã€å­¦ä¹ ç‡ç­–ç•¥ç­‰</td></tr><tr><td>éªŒè¯è„šæœ¬</td><td>ç¼–å†™æŒ‡æ ‡è®¡ç®—è„šæœ¬ï¼Œå¦‚å‡†ç¡®ç‡ã€mAPã€IoUã€RMSE ç­‰</td></tr><tr><td>æ€§èƒ½åˆæ­¥è¯„ä¼°</td><td>åœ¨éªŒè¯é›†æˆ–ç‰¹å®šåœºæ™¯æ•°æ®ä¸Šæµ‹è¯•æ¨¡å‹çš„å¯è¡Œæ€§</td></tr><tr><td>ä»£ç è§„èŒƒ</td><td>éµå¾ªå›¢é˜Ÿä»£ç æ ‡å‡†ï¼Œå¹¶å®ŒæˆåŸºç¡€å•å…ƒæµ‹è¯•</td></tr></tbody></table><p>Develop é˜¶æ®µæœ€ä½³å®è·µï¼š</p><ul><li>è®¾è®¡è¾“å…¥è¾“å‡ºæ¥å£å¯¹æ¥æ„ŸçŸ¥/è§„åˆ’æ¨¡å—ï¼Œæå‰è€ƒè™‘ç«¯åˆ°ç«¯éƒ¨ç½²å¯ç”¨æ€§</li><li>ä½¿ç”¨å°è§„æ¨¡å…ˆè¡ŒéªŒè¯æ¨¡å‹æœ‰æ•ˆæ€§ï¼Œé¿å…å¤§è§„æ¨¡è®­ç»ƒèµ„æºæµªè´¹</li><li>æ¨¡å‹åˆç‰ˆå®ç°ä¹Ÿè¦å†™æµ‹è¯•æ ·ä¾‹ï¼Œé˜²æ­¢ early bugs è¿›å…¥åæœŸé›†æˆ</li><li>é€šè¿‡ Notebook + Dashboard å®šæœŸå±•ç¤ºæ¨¡å‹ç»“æœå’Œåœºæ™¯æ ·ä¾‹ï¼Œæ–¹ä¾¿å›¢é˜Ÿåä½œ</li><li>ä¿ç•™æ¨¡å‹ checkpointï¼Œå¹¶é…åˆå…ƒæ•°æ®è®°å½•ç”¨äºåç»­å¯¹æ¯”å’Œè¿½æº¯</li></ul><p>Develop é˜¶æ®µå¸¸è§é—®é¢˜ï¼š</p><ul><li>Q: è¿‡æ‹Ÿåˆå°åœºæ™¯ï¼Œçº¿ä¸Šæ³›åŒ–å·®<ul><li>A: æ•°æ®å¢å¼ºã€å¤šåœºæ™¯æ ·æœ¬æ··åˆè®­ç»ƒã€äº¤å‰éªŒè¯</li></ul></li><li>Q: æ¨¡å‹æŒ‡æ ‡çœ‹èµ·æ¥å¥½ï¼Œä½†ç‰¹å®šåœºæ™¯å¤±æ•ˆ<ul><li>A: è®¾è®¡åœºæ™¯è¦†ç›–åº¦è¯„æµ‹è„šæœ¬ã€åˆ†åœºæ™¯æŒ‡æ ‡ç»Ÿè®¡</li></ul></li><li>Q: è®­ç»ƒæ•°æ®å’Œçº¿ä¸Šç¯å¢ƒä¸ä¸€è‡´<ul><li>A: ä½¿ç”¨ä»¿çœŸæˆ–æ’å…¥ç«¯åˆ°ç«¯å¤„ç†é“¾åšéªŒè¯ï¼Œç¡®ä¿ä¸€è‡´æ€§</li></ul></li></ul><h3 id="æ„å»º-Build"><a class="header-anchor" href="#æ„å»º-Build"></a>æ„å»º - Build</h3><h4 id="è½¯ä»¶ä»£ç -v2"><a class="header-anchor" href="#è½¯ä»¶ä»£ç -v2"></a>è½¯ä»¶ä»£ç </h4><p>Build é˜¶æ®µæ ¸å¿ƒç›®æ ‡æ˜¯æŠŠæºä»£ç è½¬æ¢æˆå¯æ‰§è¡Œæ–‡ä»¶ã€åº“ã€é•œåƒæˆ–å…¶ä»–äº¤ä»˜ç‰©ï¼›ç”Ÿæˆå¯ç”¨äºéƒ¨ç½²ã€æµ‹è¯•çš„å·¥ä»¶ï¼Œå¹¶ä¿è¯å¯é‡ç°æ€§ï¼›åŠæ—¶å‘ç°ç¼–è¯‘é”™è¯¯ã€ä¾èµ–å†²çªç­‰é—®é¢˜ï¼›æä¾›ä¸€è‡´ã€è‡ªåŠ¨åŒ–ã€æ ‡å‡†åŒ–çš„æ„å»ºæµç¨‹ã€‚</p><p>Build é˜¶æ®µå…³é”®æ´»åŠ¨ï¼š</p><table><thead><tr><th>æ´»åŠ¨</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ä¾èµ–ç®¡ç†</td><td>ä¸‹è½½ã€éªŒè¯ä¾èµ–ç‰ˆæœ¬ï¼Œé˜²æ­¢ä¸å…¼å®¹</td></tr><tr><td>ç¼–è¯‘/æ‰“åŒ…</td><td>ç¼–è¯‘æºä»£ç ï¼Œé“¾æ¥ç”Ÿæˆç›®æ ‡æ–‡ä»¶ï¼Œæ‰“åŒ…ä¸ºå®‰è£…åŒ…ã€å®¹å™¨é•œåƒç­‰</td></tr><tr><td>æ„å»ºç¼“å­˜</td><td>åˆ©ç”¨ç¼“å­˜å‡å°‘é‡å¤æ„å»ºæ—¶é—´</td></tr><tr><td>ç‰ˆæœ¬ä¿¡æ¯æ³¨å…¥</td><td>åœ¨æ„å»ºäº§ç‰©ä¸­å†™å…¥ commit IDã€æ—¶é—´ã€åˆ†æ”¯ç­‰å…ƒä¿¡æ¯</td></tr><tr><td>å•å…ƒæµ‹è¯•æ‰§è¡Œ</td><td>æ„å»ºåç«‹å³è·‘å•æµ‹éªŒè¯æ„å»ºæœ‰æ•ˆæ€§</td></tr><tr><td>å·¥ä»¶ç­¾å/å“ˆå¸Œ</td><td>ä¿è¯äº¤ä»˜ç‰©å®Œæ•´æ€§ã€é˜²æ­¢ç¯¡æ”¹</td></tr><tr><td>æ„å»ºäº§ç‰©å­˜å‚¨</td><td>ä¸Šä¼ åˆ° Artifactoryã€Nexusã€Harborã€OBS ç­‰ä»“åº“ç»Ÿä¸€ç®¡ç†</td></tr></tbody></table><p>Build é˜¶æ®µæœ€ä½³å®è·µï¼š</p><ul><li>è‡ªåŠ¨åŒ–æ„å»ºï¼šé€šè¿‡ CI å¹³å°åœ¨æäº¤åˆå¹¶æ—¶è§¦å‘è‡ªåŠ¨æ„å»º</li><li>å¹‚ç­‰æ€§ï¼šåŒæ ·è¾“å…¥ï¼ˆä»£ç ã€é…ç½®ã€ä¾èµ–ï¼‰ç”Ÿæˆçš„å·¥ä»¶è¦ä¸€è‡´</li><li>éš”ç¦»ç¯å¢ƒï¼šæ„å»ºè¿‡ç¨‹åº”åœ¨å¹²å‡€ç¯å¢ƒä¸­è¿è¡Œï¼ˆå¦‚ CI runner æˆ– Dockerï¼‰ï¼Œé¿å…ã€Œæˆ‘æœºå™¨ä¸Šèƒ½ç¼–è¯‘ã€çš„é—®é¢˜</li><li>ç‰ˆæœ¬å…ƒæ•°æ®ï¼šåœ¨æ„å»ºäº§ç‰©ä¸­æ³¨å…¥ commit IDã€åˆ†æ”¯ã€ç¼–è¯‘æ—¶é—´ï¼Œå¦‚å¯æ‰§è¡Œæ–‡ä»¶è¾“å‡ºï¼š</li><li>æ„å»ºç¼“å­˜ï¼šåŠ é€Ÿ CIï¼Œé¿å…æ¯æ¬¡å…¨é‡ä¸‹è½½ä»£ç ï¼Œå…¨é‡ç¼–è¯‘</li></ul><p>Build é˜¶æ®µå¸¸è§æŒ‘æˆ˜ï¼š</p><ul><li>Q: ç¼–è¯‘ç¯å¢ƒä¸ä¸€è‡´ï¼Œå¯¼è‡´ CI é€šè¿‡ä½†ç”Ÿäº§ç¯å¢ƒå¤±è´¥<ul><li>A: åœ¨ CI é‡Œç”¨ Docker ç»Ÿä¸€ç¯å¢ƒ</li></ul></li><li>Q: æ„å»ºæ—¶é—´è¿‡é•¿ï¼Œé™ä½è¿­ä»£æ•ˆç‡<ul><li>A: ä½¿ç”¨åˆ†å¸ƒå¼æ„å»ºã€å¢é‡æ„å»º</li></ul></li><li>Q: å·¥ä»¶ç¼ºä¹ç®¡ç†ï¼Œæ— æ³•å›æ»š<ul><li>A: æ„å»ºäº§ç‰©é›†ä¸­ä¸Šä¼ åˆ°å·¥ä»¶ä»“åº“ï¼Œå¹¶åœ¨ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿé‡Œè®°å½•å¯è¿½æº¯ä¿¡æ¯</li></ul></li><li>Q: å¼€å‘ã€æµ‹è¯•ã€ç‰ˆæœ¬ç­‰ä¸åŒäººå‘˜å¯¹å·¥ä»¶è¯‰æ±‚ä¸ä¸€æ ·<ul><li>A: CI å·¥ç¨‹å¸ˆç†Ÿæ‚‰æ•´ä¸ªå¼€å‘è°ƒæµ‹æµç¨‹ï¼Œæå‡æµç¨‹å„ä¸ªç¯èŠ‚çš„ä½¿ç”¨ä½“éªŒ</li></ul></li></ul><p>Build é˜¶æ®µäº§ç‰©ï¼š</p><ul><li>å¯æ‰§è¡Œæ–‡ä»¶ã€åŠ¨æ€/é™æ€åº“</li><li>å®¹å™¨é•œåƒ</li><li>è½¯ä»¶åŒ…ï¼ˆ.deb/.rpm/.zipï¼‰</li><li>æ–‡æ¡£ã€API è¯´æ˜</li><li>å…ƒä¿¡æ¯æ–‡ä»¶ï¼ˆå«ç‰ˆæœ¬ã€ç¼–è¯‘ç¯å¢ƒç­‰ï¼‰</li><li>å•å…ƒæµ‹è¯•æŠ¥å‘Šï¼Œé™æ€æ‰«ææŠ¥å‘Šç­‰</li><li>å†’çƒŸæµ‹è¯•æŠ¥å‘Š</li></ul><h4 id="æ¨¡å‹-v2"><a class="header-anchor" href="#æ¨¡å‹-v2"></a>æ¨¡å‹</h4><p>Build é˜¶æ®µæ ¸å¿ƒç›®æ ‡æ˜¯å°†æ¨¡å‹è½¬æ¢ä¸ºé«˜æ•ˆçš„éƒ¨ç½²æ ¼å¼ï¼ˆå¦‚ TensorRTã€ONNXã€TFLiteã€æˆ–è‡ªç ”äºŒè¿›åˆ¶æ ¼å¼ï¼‰ï¼›å°†å‰å¤„ç†ã€æ¨¡å‹ã€åå¤„ç†é“¾æ‰“åŒ…æˆä¸€è‡´çš„ pipelineï¼›é™æ€ç¼–è¯‘æˆ–äº¤å‰ç¼–è¯‘æ‰€éœ€çš„ C++/CUDA ç®—å­ï¼ˆè·Ÿéšè½¯ä»¶ä»£ç å¼€å‘ï¼‰ï¼›æ ¡éªŒæ¨¡å‹åœ¨ç›®æ ‡ç¡¬ä»¶ä¸Šçš„æ¨ç†æ­£ç¡®æ€§ä¸æ€§èƒ½ï¼›ä¸º OTAã€å·¥å‚çƒ§å½•ã€ä»¿çœŸç¯å¢ƒæä¾›æ ‡å‡†åŒ–å¯éƒ¨ç½²æ¨¡å‹äº§ç‰©ã€‚</p><p>Build é˜¶æ®µå…³é”®æ´»åŠ¨ï¼š</p><table><thead><tr><th>æ´»åŠ¨</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ¨¡å‹å¯¼å‡º</td><td>å°† PyTorch/TensorFlow æ¨¡å‹å¯¼å‡ºä¸º ONNX æˆ–å…¶ä»–ä¸­é—´æ ¼å¼</td></tr><tr><td>æ¨¡å‹ä¼˜åŒ–</td><td>ä½¿ç”¨ TensorRTã€ONNX Graph Optimization ç­‰åšé‡åŒ–ã€åˆå¹¶ã€èåˆç®—å­</td></tr><tr><td>å¹³å°é€‚é…</td><td>é’ˆå¯¹ Orin/Thor æˆ–å…¶ä»– ECU å¹³å°è¿›è¡Œç¡¬ä»¶å…¼å®¹éªŒè¯</td></tr><tr><td>ç®—å­ç¼–è¯‘</td><td>é’ˆå¯¹è‡ªå®šä¹‰ CUDA/C++ ç®—å­è¿›è¡Œäº¤å‰ç¼–è¯‘ï¼Œç¡®ä¿è½¦ç«¯å¯ç”¨</td></tr><tr><td>Pipeline å°è£…</td><td>å‰å¤„ç†ã€ä¸»æ¨¡å‹ã€åå¤„ç†ç»„æˆæ•´ä½“ pipelineï¼Œæ–¹ä¾¿è°ƒç”¨å’Œé›†æˆ</td></tr><tr><td>åŠŸèƒ½ä¸€è‡´æ€§éªŒè¯</td><td>ç¡®ä¿æ¨¡å‹ä¼˜åŒ–ååœ¨è¾“å‡ºç²¾åº¦ä¸Šä¸è®­ç»ƒæ—¶åŸºæœ¬ä¸€è‡´</td></tr><tr><td>æ€§èƒ½åŸºå‡†æµ‹è¯•</td><td>åœ¨ç›®æ ‡ç¡¬ä»¶ä¸Šæµ‹è¯•æ¨ç†è€—æ—¶ã€èµ„æºå ç”¨ï¼Œå¹¶è¾“å‡ºæ€§èƒ½æŠ¥å‘Š</td></tr><tr><td>äº§ç‰©æ‰“åŒ…</td><td>äº§å‡ºæ¨¡å‹æ–‡ä»¶ã€ç‰ˆæœ¬å…ƒä¿¡æ¯ã€å¿…è¦è„šæœ¬åŠä¾èµ–åº“æ¸…å•</td></tr></tbody></table><p>Build é˜¶æ®µæœ€ä½³å®è·µï¼š</p><ul><li>åœ¨ CI æµæ°´çº¿ä¸­è‡ªåŠ¨åŒ–å®Œæˆæ¨¡å‹è½¬æ¢ã€ä¼˜åŒ–ã€æ‰“åŒ…ã€éªŒè¯</li><li>æ¨¡å‹è¾“å‡ºåœ¨ä¼˜åŒ–å‰åå¿…é¡»åš diffï¼Œç¡®è®¤æ•°å€¼ç²¾åº¦åœ¨å¯æ¥å—èŒƒå›´</li><li>ä¸ºæ¯ä¸ªæ¨¡å‹äº§ç‰©ç”Ÿæˆå”¯ä¸€ hash ä¸å…ƒæ•°æ®ï¼Œæ–¹ä¾¿åç»­è¿½æº¯</li><li>åœ¨ä¸åŒç¡¬ä»¶ç¯å¢ƒï¼ˆOrin/Thor/PCï¼‰ä¸Šéƒ½è¦åšåŸºå‡†æ€§èƒ½éªŒè¯</li><li>å¯¹å¯æ‰§è¡Œæ–‡ä»¶ã€åº“ã€æ¨¡å‹äº§ç‰©è¿›è¡Œç­¾åï¼Œä¿è¯äº¤ä»˜å®‰å…¨æ€§</li></ul><p>Build é˜¶æ®µå¸¸è§æŒ‘æˆ˜ï¼š</p><ul><li>Q: ä¼˜åŒ–åæ¨¡å‹æ•°å€¼æ¼‚ç§»<ul><li>A: åŠ å…¥åŸºçº¿è¾“å‡ºæ¯”å¯¹è„šæœ¬ï¼Œè‡ªåŠ¨æ£€æµ‹è¯¯å·®æ˜¯å¦è¶…æ ‡</li></ul></li><li>Q: ç›®æ ‡ç¡¬ä»¶å…¼å®¹æ€§é—®é¢˜<ul><li>A: ä½¿ç”¨è½¦ç«¯äº¤å‰ç¼–è¯‘ç¯å¢ƒ+ç¡¬ä»¶ in the loopï¼ˆHILï¼‰æµ‹è¯•</li></ul></li><li>Q: ç®—å­ä¸æ”¯æŒä¼˜åŒ–å·¥å…·<ul><li>A: å¼€å‘è‡ªå®šä¹‰ Pluginï¼Œå¹¶é›†æˆåˆ° TensorRT/ONNX Runtime</li></ul></li><li>Q: æ¨¡å‹æ¨ç†å»¶è¿Ÿé«˜<ul><li>A: ä¼˜åŒ–æ¨¡å‹ç»“æ„ï¼Œé€‰æ‹©åˆé€‚çš„ç²¾åº¦ï¼Œä½¿ç”¨é«˜æ•ˆçš„æ¨ç†å¼•æ“ï¼Œç»“åˆæ‰¹å¤„ç†å’Œå¼‚æ­¥å¤„ç†</li></ul></li></ul><h3 id="æµ‹è¯•-Test"><a class="header-anchor" href="#æµ‹è¯•-Test"></a>æµ‹è¯• - Test</h3><h4 id="è½¯ä»¶"><a class="header-anchor" href="#è½¯ä»¶"></a>è½¯ä»¶</h4><p>Test é˜¶æ®µæ ¸å¿ƒç›®æ ‡æ˜¯éªŒè¯æ„å»ºäº§ç‰©æ»¡è¶³åŠŸèƒ½ã€æ€§èƒ½å’ŒéåŠŸèƒ½æ€§éœ€æ±‚ï¼›åŠæ—¶å‘ç°å¹¶åé¦ˆé—®é¢˜ï¼Œé˜»æ­¢ç¼ºé™·è¿›å…¥ç”Ÿäº§ï¼›æä¾›å¯é‡åŒ–ã€å¯è¿½æº¯çš„æµ‹è¯•ç»“æœï¼›å°†æµ‹è¯•è‡ªåŠ¨åŒ–ï¼Œæé«˜è¦†ç›–ç‡ã€é™ä½å›å½’æˆæœ¬ã€‚</p><p>Test é˜¶æ®µå…³é”®æ´»åŠ¨ï¼š</p><table><thead><tr><th>æ´»åŠ¨</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>å•å…ƒæµ‹è¯•</td><td>éªŒè¯æ¯ä¸ªå‡½æ•°/ç±»åœ¨éš”ç¦»ç¯å¢ƒä¸‹çš„æ­£ç¡®æ€§</td></tr><tr><td>é›†æˆæµ‹è¯•</td><td>éªŒè¯å¤šä¸ªæ¨¡å—/ç»„ä»¶ç»„åˆåçš„æ¥å£å’Œåä½œ</td></tr><tr><td>åŠŸèƒ½æµ‹è¯•</td><td>éªŒè¯ç³»ç»Ÿæ»¡è¶³ä¸šåŠ¡éœ€æ±‚çš„åŠŸèƒ½å®Œæ•´æ€§</td></tr><tr><td>å›å½’æµ‹è¯•</td><td>ç¡®ä¿ä¿®æ”¹/æ–°å¢åŠŸèƒ½ä¸ä¼šç ´åå·²æœ‰åŠŸèƒ½</td></tr><tr><td>æ€§èƒ½æµ‹è¯•</td><td>è¯„ä¼°ç³»ç»Ÿåœ¨è´Ÿè½½ä¸‹çš„å“åº”æ—¶é—´ã€ååé‡</td></tr><tr><td>å®‰å…¨æµ‹è¯•</td><td>æ£€æŸ¥å¸¸è§æ¼æ´ï¼ˆXSSã€SQLæ³¨å…¥ã€èº«ä»½éªŒè¯ç¼ºé™·ç­‰ï¼‰</td></tr><tr><td>UI/ç«¯åˆ°ç«¯æµ‹è¯•</td><td>ä»¥ç”¨æˆ·è§†è§’éªŒè¯æ•´ä¸ªæµç¨‹çš„æ­£ç¡®æ€§</td></tr><tr><td>é™æ€ä»£ç æ‰«æ</td><td>åˆ†æä»£ç ç¼ºé™·ã€æ½œåœ¨æ¼æ´</td></tr></tbody></table><p><em>æ³¨ï¼šå…¶ä¸­å•å…ƒæµ‹è¯•ã€é™æ€ä»£ç æ‰«æã€éƒ¨åˆ†é›†æˆæµ‹è¯•ä¸€èˆ¬åœ¨å¼€å‘æ„å»ºé˜¶æ®µå®æ–½ã€‚æ ¹æ®æµ‹è¯•ç­–ç•¥ï¼Œæ„å»ºé˜¶æ®µè‡ªåŠ¨è§¦å‘å†’çƒŸå›å½’æµ‹è¯•ç­‰ã€‚</em></p><p>Test é˜¶æ®µæœ€ä½³å®è·µï¼š</p><ul><li>å·¦ç§»æµ‹è¯•ï¼šè¶Šæ—©å‘ç°é—®é¢˜ï¼Œä¿®å¤æˆæœ¬è¶Šä½ï¼›å•å…ƒæµ‹è¯•åº”åœ¨å¼€å‘æœŸé—´å®Œæˆ</li><li>æµ‹è¯•è‡ªåŠ¨åŒ–ï¼šè®© CI è§¦å‘åèƒ½è‡ªåŠ¨è·‘å•å…ƒã€é›†æˆã€åŠŸèƒ½æµ‹è¯•</li><li>è¦†ç›–ç‡ç›‘æ§ï¼šé‡åŒ–å•å…ƒæµ‹è¯•è¦†ç›–ç‡ï¼Œå¦‚è¡Œè¦†ç›– 80%+ ä¸ºåˆå…¥é—¨æ§›</li><li>åˆ†å±‚æµ‹è¯•ï¼šä¼˜å…ˆè¦†ç›–æ ¸å¿ƒé€»è¾‘çš„å•å…ƒå’Œé›†æˆæµ‹è¯•ï¼Œå†è¡¥å……ç«¯åˆ°ç«¯æµ‹è¯•</li><li>æµ‹è¯•æ•°æ®ç®¡ç†ï¼šä¿è¯æµ‹è¯•æ•°æ®å¯æ§ã€å¯é‡å¤ã€è„±æ•ï¼ˆé˜²æ³„æ¼ï¼‰</li><li>å¹¶è¡ŒåŒ–æ‰§è¡Œï¼šç”¨å¹¶è¡Œä»»åŠ¡æ‰§è¡Œï¼ŒåŠ é€Ÿæµ‹è¯•è¿‡ç¨‹</li><li>ç»“æœæŠ¥å‘Šï¼šCI è‡ªåŠ¨ç”Ÿæˆå¯è¯»çš„æµ‹è¯•æŠ¥å‘Šï¼Œå¹¶èƒ½ä¸Šä¼ åˆ°å¹³å°ä¾›æŸ¥é˜…</li></ul><p>Test é˜¶æ®µå¸¸è§æŒ‘æˆ˜ï¼š</p><ul><li>Q: å•æµ‹è¦†ç›–ç‡ä¸è¶³ â†’ é—æ¼å›å½’é—®é¢˜<ul><li>A: å¼ºåˆ¶è¦†ç›–ç‡æ£€æŸ¥ï¼Œå¹¶çº³å…¥åˆå¹¶é—¨æ§›</li></ul></li><li>Q: æµ‹è¯•æ‰§è¡Œå¤ªæ…¢ â†’ æ‹‰ä½è¿­ä»£æ•ˆç‡<ul><li>A: å°†æµ‹è¯•æ‹†åˆ†åˆ°å¹¶è¡Œä»»åŠ¡æ‰§è¡Œ</li></ul></li><li>Q: ä¾èµ–å¤–éƒ¨æœåŠ¡å¯¼è‡´æµ‹è¯•ä¸ç¨³å®š<ul><li>A: ä½¿ç”¨ mock æˆ– stub éš”ç¦»å¤–éƒ¨ä¾èµ–</li></ul></li><li>Q: ä»…åŠŸèƒ½æµ‹è¯•ç¼ºä¹æ€§èƒ½/å®‰å…¨ä¿éšœ<ul><li>A: ä¸ºæ¯æ¬¡å‘å¸ƒé›†æˆæ€§èƒ½æµ‹è¯•å’Œå®‰å…¨æ‰«æ</li></ul></li></ul><p>Test é˜¶æ®µæ ¸å¿ƒäº§ç‰©</p><ul><li>è‡ªåŠ¨åŒ–æµ‹è¯•æŠ¥å‘Šï¼ˆHTML/JUnit æ ¼å¼ï¼‰</li><li>æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š</li><li>æ€§èƒ½æµ‹è¯•ç»“æœ</li><li>å®‰å…¨æ‰«æç»“æœ</li><li>æµ‹è¯•æ—¥å¿— &amp; å›å½’è¿½è¸ªè®°å½•</li></ul><h4 id="æ¨¡å‹-v3"><a class="header-anchor" href="#æ¨¡å‹-v3"></a>æ¨¡å‹</h4><p>Test é˜¶æ®µæ ¸å¿ƒç›®æ ‡æ˜¯éªŒè¯æ¨¡å‹æ˜¯å¦åœ¨å…¨é‡æ•°æ®é›†å’Œé‡ç‚¹åœºæ™¯ä¸­è¡¨ç°ç¨³å®šï¼›éªŒè¯æ¨¡å‹åœ¨ç›®æ ‡ç¡¬ä»¶ï¼ˆå¦‚ NVIDIA Orin/Thorï¼‰ä¸Šæ€§èƒ½æ˜¯å¦è¾¾æ ‡ï¼›è¯„ä¼° Corner Caseã€é•¿å°¾åœºæ™¯ã€å¤±æ•ˆåœºæ™¯ä¸­çš„è¡¨ç°ï¼›ä¿è¯æ–°ç‰ˆæœ¬ä¸æ—§ç‰ˆæœ¬ä¹‹é—´çš„æ€§èƒ½ä¸€è‡´æ€§ï¼ˆå›å½’æµ‹è¯•ï¼‰ï¼›æ”¯æ’‘è‡ªåŠ¨åŒ– CI æµæ°´çº¿é—­ç¯ï¼Œå½¢æˆä¸Šçº¿å‰â€œè´¨é‡å…³å¡â€ã€‚</p><p>Test é˜¶æ®µå…³é”®æ´»åŠ¨ï¼š</p><table><thead><tr><th>æ´»åŠ¨</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>åŠŸèƒ½æµ‹è¯•</td><td>æ£€æŸ¥æ¨¡å‹è¾“å‡ºæ˜¯å¦åˆç†ï¼Œæ˜¯å¦ç¬¦åˆè¾“å…¥è¾“å‡ºåè®®ã€shapeã€å€¼åŸŸç­‰è¦æ±‚</td></tr><tr><td>ç²¾åº¦è¯„ä¼°</td><td>ä½¿ç”¨æ ‡æ³¨æ•°æ®è®¡ç®— mAPã€IoUã€RMSEã€ADE/FDE ç­‰æŒ‡æ ‡</td></tr><tr><td>åœºæ™¯è¦†ç›–æµ‹è¯•</td><td>åˆ†åŸå¸‚ã€å¤©æ°”ã€å…‰ç…§ã€é“è·¯ç±»å‹ç­‰ç»Ÿè®¡æ¨¡å‹è¡¨ç°</td></tr><tr><td>å¤±æ•ˆæ£€æµ‹</td><td>æ£€æŸ¥æ¨¡å‹æ˜¯å¦åœ¨ç‰¹å®šå¼‚å¸¸è¾“å…¥ä¸‹å´©æºƒæˆ–è¾“å‡ºå¼‚å¸¸ï¼ˆNaNã€Infã€ç©ºï¼‰</td></tr><tr><td>æ€§èƒ½æµ‹è¯•</td><td>æ¨ç†è€—æ—¶ã€å¸§ç‡ã€CPU/GPU ä½¿ç”¨ç‡ã€åŠŸè€—æµ‹è¯•ç­‰</td></tr><tr><td>èµ„æºä¸€è‡´æ€§æµ‹è¯•</td><td>éªŒè¯å†…å­˜æ³„éœ²ã€çº¿ç¨‹æ•°å¼‚å¸¸ç­‰è¿è¡Œæ—¶èµ„æºé—®é¢˜</td></tr><tr><td>å›å½’æµ‹è¯•</td><td>å¯¹æ¯”æ—§æ¨¡å‹ç‰ˆæœ¬ï¼ŒéªŒè¯æ–°æ¨¡å‹æ²¡æœ‰å¼•å…¥æ€§èƒ½æˆ–åŠŸèƒ½é€€åŒ–</td></tr><tr><td>æ¨¡æ‹Ÿæµ‹è¯•</td><td>åœ¨ä»¿çœŸç¯å¢ƒä¸­è¿è¡Œæ¨¡å‹ï¼ŒéªŒè¯æ•´ä½“é©¾é©¶è¡Œä¸ºæ˜¯å¦å®‰å…¨å¯æ§</td></tr></tbody></table><p>Test é˜¶æ®µæœ€ä½³å®è·µï¼š</p><ul><li>æ„å»º CI è‡ªåŠ¨è¯„æµ‹æµæ°´çº¿ï¼šæ¯æ¬¡æäº¤åè·‘å…¨å¥—éªŒè¯æµç¨‹</li><li>è®¾è®¡åˆ†åœºæ™¯è¯„æµ‹æŠ¥å‘Šï¼šæ¯”å¦‚åœ¨â€œéš§é“â€ã€â€œå¤§é›¨â€ã€â€œå¤œæ™šâ€ç­‰é‡ç‚¹åœºæ™¯ä¸‹å•ç‹¬å‡ºæŠ¥è¡¨</li><li>ä¸æ„ŸçŸ¥/è§„åˆ’/æ§åˆ¶ç­‰æ¨¡å—è”æµ‹ï¼šæµ‹è¯•æ¨¡å‹æ˜¯å¦å½±å“ä¸Šä¸‹æ¸¸æ¨¡å—çš„æ­£ç¡®æ€§å’Œé²æ£’æ€§</li><li>æ·»åŠ å®‰å…¨å›å½’ç”¨ä¾‹ï¼šä¿è¯æ¨¡å‹ä¸ä¼šåœ¨ Corner Case ä¸­åå¤å¤±æ•ˆ</li><li>æ€§èƒ½ä¸ç²¾åº¦å…±åŒè¯„ä¼°ï¼šæ€§èƒ½æœªè¾¾æ ‡å³ä½¿ç²¾åº¦é«˜ä¹Ÿä¸èƒ½ä¸Šçº¿</li></ul><p>Test é˜¶æ®µå¸¸è§æŒ‘æˆ˜ï¼š</p><ul><li>Q: æ¨¡å‹æŒ‡æ ‡æå‡ä½†ä¸Šçº¿è¡¨ç°å˜å·®<ul><li>A: éœ€è¦åŠ åœºæ™¯è¯„ä¼°å’Œè”æµ‹é—­ç¯ï¼Œä¸ä»…çœ‹æ•°å­—</li></ul></li><li>Q: æ¨¡å‹å¯¹è¾“å…¥åˆ†å¸ƒåç§»æ•æ„Ÿ<ul><li>A: åŠ å…¥æ•°æ®å¢å¼ºå’Œé²æ£’æ€§è¯„æµ‹</li></ul></li><li>Q: æ–°æ¨¡å‹éƒ¨ç½²æ€§èƒ½ä¸‹é™<ul><li>A: ä¼˜åŒ–åå¤„ç†ã€BatchSizeã€ç»‘å®šCPUäº²å’Œæ€§</li></ul></li></ul><h3 id="å‘å¸ƒ-Release"><a class="header-anchor" href="#å‘å¸ƒ-Release"></a>å‘å¸ƒ - Release</h3><h4 id="äº‘æœåŠ¡"><a class="header-anchor" href="#äº‘æœåŠ¡"></a>äº‘æœåŠ¡</h4><p>Release é˜¶æ®µæ ¸å¿ƒç›®æ ‡æ˜¯ç¡®ä¿ç»è¿‡éªŒè¯çš„å·¥ä»¶è¢«å®‰å…¨ã€ç¨³å®šã€å¯æ§åœ°å‘å¸ƒåˆ°ç”Ÿäº§æˆ–ç›®æ ‡ç¯å¢ƒï¼›ç®¡ç†å‘å¸ƒèŠ‚å¥ï¼Œå‡å°‘å˜æ›´å¯¹ç”Ÿäº§çš„é£é™©ï¼›æä¾›å›æ»šå’Œè¡¥ä¸æœºåˆ¶åº”å¯¹çº¿ä¸Šé—®é¢˜ï¼›æ²Ÿé€šåè°ƒå„è§’è‰²ï¼ˆå¼€å‘ã€æµ‹è¯•ã€è¿ç»´ã€äº§å“ï¼‰åšå¥½ä¸Šçº¿å‡†å¤‡ã€‚</p><p>Release é˜¶æ®µå…³é”®æ´»åŠ¨ï¼š</p><table><thead><tr><th>æ´»åŠ¨</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ç‰ˆæœ¬å½’æ¡£</td><td>æ ‡è®°ç¨³å®šç‰ˆæœ¬ï¼ˆTagï¼‰ã€è®°å½•å…ƒæ•°æ®ï¼ˆcommit IDã€åˆ†æ”¯ã€æ—¶é—´ç­‰ï¼‰</td></tr><tr><td>äº§ç‰©ç­¾å</td><td>å¯¹å‘å¸ƒåŒ…ã€å®¹å™¨é•œåƒç­‰åšå“ˆå¸Œæ ¡éªŒæˆ–æ•°å­—ç­¾å</td></tr><tr><td>å‘å¸ƒæ–‡æ¡£ç¼–å†™</td><td>åŒ…å«å˜æ›´è®°å½•ã€å‡çº§æŒ‡å—ã€å·²çŸ¥é—®é¢˜ã€å…¼å®¹æ€§è¯´æ˜</td></tr><tr><td>å‘å¸ƒæ‰¹å‡†</td><td>ç”±ç ”å‘/äº§å“/è¿ç»´ç­‰è´Ÿè´£äººå…±åŒå®¡æ ¸å¹¶ç­¾å­—/å®¡æ‰¹</td></tr><tr><td>ç°åº¦/è“ç»¿å‘å¸ƒ</td><td>å…ˆå‘éƒ¨åˆ†ç”¨æˆ·å‘å¸ƒè§‚å¯Ÿè¡¨ç°ï¼Œå†é€æ­¥å…¨é‡ä¸Šçº¿</td></tr><tr><td>å›æ»šæ–¹æ¡ˆå‡†å¤‡</td><td>æ˜ç¡®å‘å¸ƒå¤±è´¥æˆ–å›å½’é—®é¢˜æ—¶çš„æ’¤é”€ã€å›æ»šæ­¥éª¤</td></tr><tr><td>å‘å¸ƒé€šçŸ¥</td><td>å‘åˆ©ç›Šç›¸å…³æ–¹åŒæ­¥ç‰ˆæœ¬å˜æ›´ã€ä¸Šçº¿è®¡åˆ’å’ŒçŠ¶æ€</td></tr></tbody></table><p>Release é˜¶æ®µæœ€ä½³å®è·µï¼š</p><ul><li>è‡ªåŠ¨åŒ–å‘å¸ƒæµç¨‹ï¼šRelease æµç¨‹åº”å°½å¯èƒ½åœ¨ CI/CD ä¸­è‡ªåŠ¨åŒ–ï¼Œå‡å°‘äººå·¥æ“ä½œ</li><li>ç¨³å®šçª—å£å‘å¸ƒï¼šé€‰æ‹©ä½å³°æ—¶æ®µæˆ–è¿ç»´çª—å£å‘å¸ƒï¼Œä¾¿äºå¿«é€Ÿå®šä½é—®é¢˜</li><li>å°æ­¥å¿«è·‘ï¼šé¿å…å¤§è§„æ¨¡æ”¹åŠ¨åŒæ—¶ä¸Šçº¿ï¼Œæ§åˆ¶æ¯æ¬¡å˜æ›´èŒƒå›´</li><li>å‘å¸ƒå¯è¿½æº¯ï¼šæ¯ä¸ªå‘å¸ƒè®°å½•éœ€åŒ…å«ç‰ˆæœ¬å·ã€æäº¤ä¿¡æ¯ã€æ‰§è¡Œäººã€æ—¶é—´ç­‰å…ƒæ•°æ®</li><li>å›æ»šæœºåˆ¶ï¼šç”Ÿäº§ç¯å¢ƒå‡ºç°ä¸¥é‡é—®é¢˜æ—¶å¯å¿«é€Ÿå›æ»šåˆ°ä¸Šä¸€ä¸ªç¨³å®šç‰ˆæœ¬</li><li>å¤šç¯å¢ƒéªŒè¯ï¼šåœ¨é¢„ç”Ÿäº§ç¯å¢ƒå®Œæˆå’Œç”Ÿäº§ç¯å¢ƒä¸€è‡´çš„éªŒè¯ï¼Œä¿è¯æ— ç¯å¢ƒå·®å¼‚</li></ul><p>Release é˜¶æ®µå¸¸è§æŒ‘æˆ˜ï¼š</p><ul><li>Q: ç”Ÿäº§ç¯å¢ƒä¸ä¸€è‡´å¯¼è‡´å‘å¸ƒåè¡¨ç°å¼‚å¸¸<ul><li>A: ç”¨åŸºç¡€è®¾æ–½å³ä»£ç ï¼ˆIaCï¼‰ä¿æŒå„ç¯å¢ƒä¸€è‡´</li></ul></li><li>Q: å‘å¸ƒæ­¥éª¤å¤æ‚ã€æ‰‹åŠ¨æ“ä½œæ˜“å‡ºé”™<ul><li>A: ç”¨è„šæœ¬æˆ– CD å¹³å°æ ‡å‡†åŒ–å¹¶è‡ªåŠ¨åŒ–å‘å¸ƒè¿‡ç¨‹</li></ul></li><li>Q: æ— å›æ»šæ–¹æ¡ˆæˆ–å›æ»šå›°éš¾<ul><li>A: æ¯æ¬¡å‘å¸ƒå‰éƒ½æ˜ç¡®å›æ»šæ­¥éª¤å¹¶åœ¨é¢„ç”Ÿäº§ç¯å¢ƒéªŒè¯</li></ul></li><li>Q: å˜æ›´å¯¹å®¢æˆ·æˆ–ä¾èµ–ç³»ç»Ÿå½±å“ä¸å¯æ§<ul><li>A: é‡‡ç”¨ç°åº¦ã€è“ç»¿ç­‰æ¸è¿›å¼å‘å¸ƒï¼Œå¹¶åŠ å¼ºç›‘æ§</li></ul></li></ul><p>Release é˜¶æ®µæ ¸å¿ƒäº§ç‰©ï¼š</p><ul><li>å‘å¸ƒåŒ…ï¼ˆå¯æ‰§è¡Œæ–‡ä»¶ã€Docker é•œåƒã€å®‰è£…åŒ…ç­‰ï¼‰</li><li>å‘å¸ƒè®°å½•ï¼ˆTagã€Release Notesã€å®¡æ‰¹è®°å½•ï¼‰</li><li>å›æ»šæ–¹æ¡ˆåŠéªŒè¯è®°å½•</li><li>å‘å¸ƒè®¡åˆ’/æ’æœŸè¡¨</li><li>å·²çŸ¥é—®é¢˜ &amp; è§£å†³æ–¹æ¡ˆ</li></ul><h4 id="æ™ºé©¾ç³»ç»Ÿ"><a class="header-anchor" href="#æ™ºé©¾ç³»ç»Ÿ"></a>æ™ºé©¾ç³»ç»Ÿ</h4><p>Release é˜¶æ®µæ ¸å¿ƒç›®æ ‡æ˜¯ç¡®è®¤äº¤ä»˜çš„è½¯ä»¶/æ¨¡å‹ç‰ˆæœ¬ç¨³å®šä¸”ç¬¦åˆè´¨é‡æ ‡å‡†ï¼›å®Œæˆç‰ˆæœ¬å°è£…ä¸å…ƒæ•°æ®ç®¡ç†ï¼Œç¡®ä¿å¯è¿½æº¯ï¼›é€šè¿‡å®‰å…¨ã€æ³•è§„åˆè§„æ€§å®¡æ ¸ï¼›åˆ¶å®šç°åº¦å‘å¸ƒã€å›æ»šå’Œé£é™©åº”å¯¹æ–¹æ¡ˆã€‚</p><p>Release é˜¶æ®µå…³é”®æ´»åŠ¨ï¼š</p><table><thead><tr><th>æ´»åŠ¨</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ç‰ˆæœ¬å†»ç»“ä¸æ‰“åŒ…</td><td>å†»ç»“ç‰ˆæœ¬ä»£ç ã€æ¨¡å‹ï¼Œåˆ¶ä½œäº§ç‰©åŒ…ï¼ˆåŒ…å«å…ƒæ•°æ®ã€æ–‡æ¡£ï¼‰</td></tr><tr><td>ç‰ˆæœ¬ç®¡ç†</td><td>ç¡®ä¿ç‰ˆæœ¬å·å”¯ä¸€ä¸”æœ‰è¯¦ç»†å˜æ›´æ—¥å¿—</td></tr><tr><td>åˆè§„å®¡æŸ¥</td><td>ç¬¦åˆISO 26262ã€ASPICEã€å®‰å…¨åˆè§„åŠæ³•è§„è¦æ±‚</td></tr><tr><td>å‘å¸ƒè®¡åˆ’åˆ¶å®š</td><td>åˆ¶å®šç°åº¦ç­–ç•¥ã€åˆ†æ‰¹æ¬¡ä¸Šçº¿ã€ç›‘æ§é¢„æ¡ˆ</td></tr><tr><td>æµ‹è¯•éªŒè¯å¤æ ¸</td><td>å¯¹ç…§æµ‹è¯•æŠ¥å‘Šå¤æ ¸å…³é”®æ€§èƒ½ä¸å®‰å…¨æŒ‡æ ‡</td></tr><tr><td>éƒ¨ç½²å‡†å¤‡</td><td>OTAæ¨é€å‡†å¤‡ã€å·¥å‚çƒ§å½•æµç¨‹ç¡®è®¤</td></tr><tr><td>å›æ»šé¢„æ¡ˆ</td><td>åˆ¶å®šå¼‚å¸¸æƒ…å†µä¸‹çš„å¿«é€Ÿå›é€€æ–¹æ¡ˆ</td></tr></tbody></table><p>Release é˜¶æ®µæœ€ä½³å®è·µï¼š</p><ul><li>ç‰ˆæœ¬ç®¡ç†è§„èŒƒï¼šç‰ˆæœ¬å·éœ€ä¸¥æ ¼éµå¾ªè¯­ä¹‰åŒ–ï¼Œè®°å½•å®Œæ•´å˜æ›´å†å²</li><li>å¤šçº§å®¡æ‰¹æµç¨‹ï¼šå‘å¸ƒå‰å¿…é¡»ç»è¿‡æŠ€æœ¯ã€å®‰å…¨ã€æ³•è§„å¤šéƒ¨é—¨å®¡æ‰¹</li><li>ç°åº¦å‘å¸ƒï¼šå…ˆåœ¨å°èŒƒå›´è½¦é˜Ÿæˆ–ç‰¹å®šåŒºåŸŸéƒ¨ç½²ï¼Œç›‘æ§æ•ˆæœåå†å…¨é‡æ¨å¹¿</li><li>åº”æ€¥å›æ»šï¼šç‰ˆæœ¬ä¸Šçº¿å‰å¿…é¡»å‡†å¤‡å¿«é€Ÿå›æ»šæ–¹æ¡ˆï¼Œä¿è¯å®‰å…¨</li><li>æ•°æ®è¿½è¸ªï¼šä¸Šçº¿åå®æ—¶æ”¶é›†è¿è¡Œæ•°æ®ï¼Œç›‘æ§å¼‚å¸¸å’Œæ¨¡å‹æ€§èƒ½é€€åŒ–</li><li>æ–‡æ¡£é½å¤‡ï¼šåŒ…å«è¯¦ç»†çš„ç‰ˆæœ¬è¯´æ˜ã€å®‰å…¨é£é™©æç¤ºã€å·²çŸ¥é—®é¢˜åˆ—è¡¨</li></ul><p>Release é˜¶æ®µå¸¸è§æŒ‘æˆ˜ï¼š</p><ul><li>Q: ä¸Šçº¿ç‰ˆæœ¬ä¸ç¨³å®š<ul><li>A: åˆ¶å®šä¸¥æ ¼çš„ç°åº¦å’Œå›æ»šæœºåˆ¶</li></ul></li><li>Q: åˆè§„å®¡æ ¸ä¸è¿‡å…³<ul><li>A: æå‰ä»‹å…¥æ³•è§„ä¸“å®¶å‚ä¸ï¼Œç¡®ä¿æ–‡æ¡£é½å…¨</li></ul></li><li>Q: ç‰ˆæœ¬ç®¡ç†æ··ä¹±<ul><li>A: å¼ºåˆ¶ä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·å’Œæµç¨‹ï¼Œé¿å…äººå·¥é”™è¯¯</li></ul></li><li>Q: éƒ¨ç½²å¤±è´¥æˆ–ä¸å…¼å®¹<ul><li>A: å®Œå–„ç¡¬ä»¶å…¼å®¹æ€§æµ‹è¯•ï¼Œæå‰åšå…¨é“¾è·¯é›†æˆæµ‹è¯•</li></ul></li></ul><h3 id="éƒ¨ç½²-Deploy"><a class="header-anchor" href="#éƒ¨ç½²-Deploy"></a>éƒ¨ç½² - Deploy</h3><h4 id="äº‘æœåŠ¡-v2"><a class="header-anchor" href="#äº‘æœåŠ¡-v2"></a>äº‘æœåŠ¡</h4><p>Deploy é˜¶æ®µæ ¸å¿ƒç›®æ ‡æ˜¯å°†éªŒè¯åˆæ ¼çš„ç‰ˆæœ¬å¹³ç¨³ã€å®‰å…¨åœ°éƒ¨ç½²åˆ°ç”Ÿäº§æˆ–ç›®æ ‡ç¯å¢ƒï¼›ä¿è¯éƒ¨ç½²è¿‡ç¨‹å¯é‡å¤ã€è‡ªåŠ¨åŒ–ã€å¯è¿½æº¯ï¼›é™ä½å¯¹ç”¨æˆ·çš„å½±å“ï¼Œå¹¶å…·å¤‡å¿«é€Ÿå›æ»šèƒ½åŠ›ï¼›ä¸ç›‘æ§ã€å‘Šè­¦è”åŠ¨ï¼ŒåŠæ—¶å‘ç°ä¸Šçº¿é—®é¢˜ã€‚</p><p>Deploy é˜¶æ®µå…³é”®æ´»åŠ¨ï¼š</p><table><thead><tr><th>æ´»åŠ¨</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>éƒ¨ç½²å‰å‡†å¤‡</td><td>æ£€æŸ¥ç¯å¢ƒã€ä¾èµ–ã€é…é¢ã€å¥åº·çŠ¶æ€</td></tr><tr><td>è‡ªåŠ¨åŒ–éƒ¨ç½²</td><td>è„šæœ¬æˆ– CD å¹³å°è‡ªåŠ¨åŒ–å°†å·¥ä»¶éƒ¨ç½²åˆ°æœåŠ¡å™¨æˆ–å®¹å™¨</td></tr><tr><td>é…ç½®ç®¡ç†</td><td>ä½¿ç”¨ç»Ÿä¸€é…ç½®ä¸­å¿ƒæˆ–ç¯å¢ƒå˜é‡ç®¡ç†ä¸åŒç¯å¢ƒä¸‹çš„å‚æ•°</td></tr><tr><td>æ•°æ®è¿ç§»</td><td>æ‰§è¡Œæ•°æ®åº“ schemaã€æ•°æ®å¡«å……ç­‰è¿ç§»æ“ä½œ</td></tr><tr><td>å˜æ›´éªŒè¯</td><td>éƒ¨ç½²å®Œæˆååš smoke testï¼Œç¡®è®¤æ ¸å¿ƒåŠŸèƒ½å¯ç”¨</td></tr><tr><td>éƒ¨ç½²ç›‘æ§</td><td>å¯åŠ¨åæŒç»­ç›‘æ§æ—¥å¿—ã€èµ„æºä½¿ç”¨ã€æ ¸å¿ƒæŒ‡æ ‡</td></tr><tr><td>å›æ»šç­–ç•¥</td><td>æ˜ç¡®éƒ¨ç½²å¤±è´¥æ—¶æ’¤é”€çš„æ­¥éª¤</td></tr><tr><td>éƒ¨ç½²åé€šçŸ¥</td><td>å‘ç ”å‘ã€è¿ç»´ã€äº§å“ç­‰ç›¸å…³æ–¹åŒæ­¥ä¸Šçº¿çŠ¶æ€</td></tr></tbody></table><p>Deploy é˜¶æ®µæœ€ä½³å®è·µï¼š</p><ul><li>éƒ¨ç½²è‡ªåŠ¨åŒ–ï¼šé¿å…äººå·¥æ“ä½œï¼Œå‡å°‘é£é™©å¹¶æå‡æ•ˆç‡</li><li>ç¯å¢ƒå¹‚ç­‰æ€§ï¼šé‡å¤éƒ¨ç½²åŒä¸€ä¸ªç‰ˆæœ¬ä¸åº”å¼•å…¥é¢å¤–é—®é¢˜</li><li>æ¸è¿›å¼éƒ¨ç½²ï¼šç°åº¦å‘å¸ƒã€è“ç»¿éƒ¨ç½²æˆ– canaryï¼Œå…ˆéªŒè¯å°æ‰¹æµé‡ï¼Œå†æ‰©å¤§èŒƒå›´</li><li>é…ç½®åˆ†ç¦»ï¼šä»£ç å’Œé…ç½®åˆ†ç¦»ï¼Œé€šè¿‡ç¯å¢ƒå˜é‡ã€é…ç½®ä¸­å¿ƒåˆ‡æ¢ç¯å¢ƒ</li><li>éƒ¨ç½²è‡ªæ£€ï¼šéƒ¨ç½²å®Œç«‹å³è¿è¡Œè‡ªåŠ¨åŒ– smoke test éªŒè¯åŸºæœ¬åŠŸèƒ½</li><li>è”åŠ¨ç›‘æ§ï¼šéƒ¨ç½²åè‡ªåŠ¨æ£€æµ‹ CPU/å†…å­˜/è¯·æ±‚é”™è¯¯ç‡ç­‰å¼‚å¸¸æ³¢åŠ¨</li><li>å›æ»šæœºåˆ¶ï¼šéƒ¨ç½²æµç¨‹åº”æ”¯æŒå¿«é€Ÿå›é€€ï¼Œå¹¶éªŒè¯å›é€€æœ‰æ•ˆæ€§</li></ul><p>Deploy é˜¶æ®µå¸¸è§æŒ‘æˆ˜ï¼š</p><ul><li>Q: éƒ¨ç½²æ—¶é—´è¿‡é•¿ï¼Œå¯¼è‡´æœåŠ¡ä¸­æ–­<ul><li>A: ä½¿ç”¨å®¹å™¨æˆ–åˆ†å¸ƒå¼æ¶æ„ï¼Œé€æ­¥æ›¿æ¢å®ä¾‹å‡å°‘å½±å“</li></ul></li><li>Q: é…ç½®é”™è¯¯å¯¼è‡´éƒ¨ç½²å®Œæˆåå¼‚å¸¸<ul><li>A: åœ¨ CI/CD ä¸­åŠ å…¥é…ç½®æ ¡éªŒæˆ– lint</li></ul></li><li>Q: æ•°æ®åº“ schema å˜æ›´ä¸å…¼å®¹<ul><li>A: æ•°æ®åº“è¿ç§»éœ€è¦å‘åå…¼å®¹æˆ–æ”¯æŒåŒå†™æœŸ</li></ul></li><li>Q: ç¯å¢ƒä¸ä¸€è‡´å¯¼è‡´éƒ¨ç½²åé—®é¢˜<ul><li>A: ç”¨ IaCï¼ˆTerraformã€Ansibleï¼‰ä¿æŒç¯å¢ƒä¸€è‡´</li></ul></li></ul><p>Deploy é˜¶æ®µæ ¸å¿ƒäº§ç‰©ï¼š</p><ul><li>éƒ¨ç½²æ—¥å¿—</li><li>æˆåŠŸ/å¤±è´¥çŠ¶æ€æŠ¥å‘Š</li><li>é…ç½®å˜æ›´è®°å½•</li><li>smoke test ç»“æœ</li><li>éƒ¨ç½²åçš„ç›‘æ§æ•°æ®å¿«ç…§</li></ul><h4 id="æ™ºé©¾ç³»ç»Ÿ-v2"><a class="header-anchor" href="#æ™ºé©¾ç³»ç»Ÿ-v2"></a>æ™ºé©¾ç³»ç»Ÿ</h4><p>Deploy é˜¶æ®µæ ¸å¿ƒç›®æ ‡æ˜¯å°†æ¨¡å‹å’Œè½¯ä»¶å®‰å…¨ã€é«˜æ•ˆåœ°éƒ¨ç½²åˆ°ç›®æ ‡ç¡¬ä»¶ï¼ˆè½¦è½½ECUã€è¾¹ç¼˜è®¾å¤‡ã€ä»¿çœŸå¹³å°ï¼‰ï¼›ä¿è¯éƒ¨ç½²è¿‡ç¨‹è‡ªåŠ¨åŒ–ã€æ ‡å‡†åŒ–ï¼Œé™ä½äººå·¥å¹²é¢„å’Œå‡ºé”™é£é™©ï¼›é…ç½®å¿…è¦çš„è¿è¡Œç¯å¢ƒå’Œä¾èµ–ï¼Œç¡®ä¿è½¯ä»¶ç¨³å®šè¿è¡Œï¼›æ”¯æŒè¿œç¨‹éƒ¨ç½²ï¼ˆOTAï¼‰å’Œæœ¬åœ°åˆ·å†™ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯éœ€æ±‚ï¼›å®æ–½éƒ¨ç½²éªŒè¯ï¼Œç¡®ä¿æ¨¡å‹æ­£å¸¸åŠ è½½ã€æ¨ç†å’Œå“åº”ã€‚</p><p>Deploy é˜¶æ®µå…³é”®æ´»åŠ¨ï¼š</p><table><thead><tr><th>æ´»åŠ¨</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>éƒ¨ç½²åŒ…ä¸‹å‘</td><td>å°†Releaseäº§ç‰©æ¨é€åˆ°ç›®æ ‡è®¾å¤‡æˆ–åˆ·å†™åˆ°å­˜å‚¨ä»‹è´¨</td></tr><tr><td>è¿è¡Œç¯å¢ƒé…ç½®</td><td>é…ç½®æ“ä½œç³»ç»Ÿã€é©±åŠ¨ã€ä¸­é—´ä»¶ã€ä¾èµ–åº“ç‰ˆæœ¬</td></tr><tr><td>OTAéƒ¨ç½²æ”¯æŒ</td><td>å®ç°ç©ºä¸­ä¸‹è½½æ›´æ–°ï¼Œæ”¯æŒå¢é‡å‡çº§å’Œå®‰å…¨å›æ»š</td></tr><tr><td>éƒ¨ç½²è‡ªåŠ¨åŒ–</td><td>ç¼–å†™è‡ªåŠ¨åŒ–è„šæœ¬/æµæ°´çº¿ï¼Œæ”¯æŒæ‰¹é‡è®¾å¤‡å¿«é€Ÿéƒ¨ç½²</td></tr><tr><td>å¯åŠ¨éªŒè¯</td><td>å¯åŠ¨æ¨¡å‹æ¨ç†æœåŠ¡ï¼Œæ£€æŸ¥åˆå§‹åŒ–æˆåŠŸã€æ— å¼‚å¸¸</td></tr><tr><td>èµ„æºç›‘æ§</td><td>ç›‘æ§CPUã€GPUä½¿ç”¨ç‡ã€å†…å­˜å ç”¨åŠæ¸©åº¦ç­‰æŒ‡æ ‡</td></tr><tr><td>æ—¥å¿—é‡‡é›†</td><td>é…ç½®æ—¥å¿—ä¸Šä¼ å’Œè¿œç¨‹è¯Šæ–­æ¥å£ï¼Œä¾¿äºåç»­æ’æŸ¥</td></tr><tr><td>éƒ¨ç½²æ–‡æ¡£</td><td>åˆ¶å®šè¯¦ç»†éƒ¨ç½²æ‰‹å†Œå’Œåº”æ€¥æ¢å¤æ–¹æ¡ˆ</td></tr></tbody></table><p>Deploy é˜¶æ®µæœ€ä½³å®è·µï¼š</p><ul><li>è‡ªåŠ¨åŒ–éƒ¨ç½²æµæ°´çº¿ï¼Œå‡å°‘æ‰‹åŠ¨é”™è¯¯ï¼Œæå‡æ•ˆç‡å’Œä¸€è‡´æ€§</li><li>å¤šç¯å¢ƒé€‚é…ï¼Œé’ˆå¯¹ä¸åŒç¡¬ä»¶å¹³å°åšå·®å¼‚åŒ–é…ç½®å’ŒéªŒè¯</li><li>ç°åº¦å‘å¸ƒä¸ç›‘æ§ï¼Œé€æ­¥æ‰©å¤§éƒ¨ç½²èŒƒå›´ï¼Œå®æ—¶ç›‘æ§å…³é”®æŒ‡æ ‡</li><li>å®‰å…¨ä¿éšœï¼Œé€šè¿‡ç­¾åæ ¡éªŒã€é˜²ç¯¡æ”¹å’Œå®‰å…¨å¯åŠ¨ä¿è¯éƒ¨ç½²å®‰å…¨</li><li>æ—¥å¿—ä¸è¯Šæ–­ï¼Œéƒ¨ç½²æ—¶å³é…ç½®å¥½æ—¥å¿—é‡‡é›†ï¼Œæ–¹ä¾¿åç»­è¿ç»´æ”¯æŒ</li></ul><p>Deploy é˜¶æ®µå¸¸è§æŒ‘æˆ˜ï¼š</p><ul><li>Q: ä¸åŒç¡¬ä»¶å…¼å®¹æ€§<ul><li>A: ç»´æŠ¤ç¡¬ä»¶é…ç½®æ¸…å•ï¼Œè‡ªåŠ¨é€‚é…éƒ¨ç½²åŒ…</li></ul></li><li>Q: éƒ¨ç½²å¤±è´¥éš¾æ’æŸ¥<ul><li>A: è¯¦ç»†æ—¥å¿—ï¼Œè¿œç¨‹è¯Šæ–­èƒ½åŠ›ï¼Œè‡ªåŠ¨å›æ»šæœºåˆ¶</li></ul></li><li>Q: OTAå‡çº§å¤±è´¥é£é™©<ul><li>A: å¢é‡å‡çº§ã€æ ¡éªŒæœºåˆ¶ã€ç°åº¦å‘å¸ƒç­–ç•¥</li></ul></li><li>Q: ç¯å¢ƒä¾èµ–å¤æ‚<ul><li>A: æŒ‰è½¦å‹ç»Ÿä¸€è§£å†³æ–¹æ¡ˆï¼Œå¤æ‚ç¯å¢ƒä¾èµ–é…å¥—ç‰ˆæœ¬åŒ–</li></ul></li></ul><h3 id="è¿è¥-Operate"><a class="header-anchor" href="#è¿è¥-Operate"></a>è¿è¥ - Operate</h3><h4 id="äº‘æœåŠ¡-v3"><a class="header-anchor" href="#äº‘æœåŠ¡-v3"></a>äº‘æœåŠ¡</h4><p>Operate é˜¶æ®µæ ¸å¿ƒç›®æ ‡æ˜¯ç¡®ä¿ç”Ÿäº§ç¯å¢ƒç³»ç»Ÿé•¿æœŸç¨³å®šã€æ€§èƒ½è¾¾æ ‡ã€é«˜å¯ç”¨ï¼›ä¸»åŠ¨ç›‘æ§ç³»ç»Ÿå¥åº·çŠ¶å†µï¼Œå¿«é€Ÿæ£€æµ‹å¹¶ä¿®å¤æ•…éšœï¼›æ”¶é›†è¿è¡ŒæŒ‡æ ‡ï¼Œä¸ºåç»­ä¼˜åŒ–ã€æ‰©å®¹ã€å›å½’åˆ†ææä¾›ä¾æ®ï¼›æŒç»­è¿›è¡Œå®‰å…¨åŠ å›ºå’Œèµ„æºç®¡ç†ï¼Œä¿éšœæœåŠ¡å®‰å…¨ã€æˆæœ¬å¯æ§ã€‚</p><p>Operate é˜¶æ®µå…³é”®æ´»åŠ¨ï¼š</p><table><thead><tr><th>æ´»åŠ¨</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ç³»ç»Ÿç›‘æ§</td><td>æ”¶é›† CPUã€å†…å­˜ã€IOã€QPSã€å»¶è¿Ÿã€é”™è¯¯ç‡ç­‰æŒ‡æ ‡</td></tr><tr><td>æ—¥å¿—é‡‡é›†ä¸åˆ†æ</td><td>é›†ä¸­æ”¶é›†åº”ç”¨ã€ç³»ç»Ÿã€å®¡è®¡æ—¥å¿—ï¼Œæ”¯æŒé—®é¢˜æ’æŸ¥</td></tr><tr><td>èµ„æºç®¡ç†</td><td>åŠ¨æ€ç®¡ç† CPUã€å†…å­˜ã€å¸¦å®½ã€å­˜å‚¨ç­‰èµ„æºï¼Œé¿å…èµ„æºç“¶é¢ˆ</td></tr><tr><td>å¼‚å¸¸æ£€æµ‹ä¸å‘Šè­¦</td><td>é…ç½®é˜ˆå€¼ã€å‘Šè­¦è§„åˆ™ï¼Œå®ç°è‡ªåŠ¨åŒ–å‘Šè­¦</td></tr><tr><td>è‡ªåŠ¨åŒ–è¿ç»´è„šæœ¬</td><td>å¸¸ç”¨ä»»åŠ¡ï¼ˆæ‰©å®¹ã€å¤‡ä»½ã€ä¿®å¤ï¼‰çš„è„šæœ¬åŒ–ï¼Œé™ä½äººå·¥æ“ä½œé£é™©</td></tr><tr><td>å®‰å…¨ç®¡ç†</td><td>åŠæ—¶æ›´æ–°è¡¥ä¸ã€ç®¡ç†å‡­æ®ã€æ£€æµ‹å…¥ä¾µ</td></tr><tr><td>SLA/SLO ç›‘æ§</td><td>ç›‘æ§å¹¶è¯„ä¼°æœåŠ¡å¯ç”¨æ€§å’Œæ€§èƒ½æ˜¯å¦ç¬¦åˆå¯¹ç”¨æˆ·æ‰¿è¯ºçš„ SLA/SLO</td></tr><tr><td>æˆæœ¬ä¼˜åŒ–</td><td>æ ¹æ®æŒ‡æ ‡åˆ†æï¼Œé‡Šæ”¾æˆ–è°ƒæ•´èµ„æºï¼Œé™ä½è¿è¥æˆæœ¬</td></tr></tbody></table><p>Operate é˜¶æ®µæœ€ä½³å®è·µï¼š</p><ul><li>å¯è§‚æµ‹æ€§å»ºè®¾ï¼šä¸‰å¤§æ”¯æŸ±ï¼šæ—¥å¿—ï¼ˆLoggingï¼‰ã€æŒ‡æ ‡ï¼ˆMetricsï¼‰ã€è¿½è¸ªï¼ˆTracingï¼‰</li><li>è‡ªåŠ¨åŒ–ä¿®å¤ï¼šæ•…éšœè‡ªåŠ¨æ¢å¤è„šæœ¬ï¼Œå¦‚ pod å®•æœºè‡ªåŠ¨é‡å¯</li><li>æœ€å°æƒé™åŸåˆ™ï¼šç”Ÿäº§ç¯å¢ƒè´¦å·ã€API token ç­‰æƒé™æœ€å°åŒ–</li><li>ç¾å¤‡æ¼”ç»ƒï¼šå®šæœŸåœ¨é¢„ç”Ÿäº§ç¯å¢ƒåšç¾éš¾æ¢å¤æ¼”ç»ƒ</li><li>SLA/SLO æŒç»­ç›‘æ§ï¼šå°†ä¸šåŠ¡æŒ‡æ ‡è½¬åŒ–ä¸º SLOï¼Œå¹¶ä¸å‘Šè­¦ç³»ç»Ÿè”åŠ¨</li><li>å®¹é‡è§„åˆ’ï¼šæ ¹æ®è¶‹åŠ¿é¢„ä¼°æœªæ¥èµ„æºéœ€æ±‚ï¼Œæå‰æ‰©å®¹æˆ–ä¼˜åŒ–æ¶æ„</li></ul><p>Operate é˜¶æ®µå¸¸è§æŒ‘æˆ˜ï¼š</p><ul><li>Q: æŒ‡æ ‡/æ—¥å¿—æ”¶é›†ä¸å…¨ â†’ æ— æ³•å‡†ç¡®å®šä½çº¿ä¸Šé—®é¢˜<ul><li>A: å®Œå–„å¯è§‚æµ‹æ€§ä½“ç³»ï¼Œå¹¶å®šæœŸéªŒè¯è¦†ç›–ç‡</li></ul></li><li>Q: å‘Šè­¦é£æš´ â†’ å¤ªå¤šæ— æ•ˆå‘Šè­¦æ©ç›–çœŸæ­£é—®é¢˜<ul><li>A: ä¼˜åŒ–å‘Šè­¦è§„åˆ™ã€è®¾ç½®åˆç†é˜ˆå€¼ã€å¼•å…¥å‘Šè­¦åˆå¹¶</li></ul></li><li>Q: ç¼ºä¹è‡ªåŠ¨åŒ– â†’ æ•…éšœå¤„ç†ä¾èµ–äººå·¥ï¼Œå“åº”æ…¢<ul><li>A: ç”¨è‡ªåŠ¨åŒ–è¿ç»´è„šæœ¬å’Œè‡ªæ„ˆç³»ç»Ÿæ›¿ä»£é‡å¤äººå·¥æ“ä½œ</li></ul></li><li>Q: å®‰å…¨æ¼æ´æš´éœ² â†’ é•¿æœŸæœªæ›´æ–°ä¾èµ–æˆ–ç³»ç»Ÿè¡¥ä¸<ul><li>A: å®šæœŸæ‰«æå¹¶è‡ªåŠ¨åŒ–è¡¥ä¸æ›´æ–°</li></ul></li></ul><p>Operate é˜¶æ®µæ ¸å¿ƒäº§ç‰©ï¼š</p><ul><li>ç³»ç»Ÿè¿è¡ŒæŒ‡æ ‡å¤§ç›˜ï¼ˆå¦‚ Grafana Dashboardsï¼‰</li><li>æ—¥å¿—å½’æ¡£ä¸æ£€ç´¢æ¥å£</li><li>å‘Šè­¦è®°å½•ä¸å¤„ç†æŠ¥å‘Š</li><li>å®‰å…¨å®¡è®¡æ—¥å¿—</li><li>èµ„æºä½¿ç”¨å’Œæˆæœ¬åˆ†ææŠ¥å‘Š</li></ul><h4 id="æ™ºé©¾è½¯ä»¶"><a class="header-anchor" href="#æ™ºé©¾è½¯ä»¶"></a>æ™ºé©¾è½¯ä»¶</h4><p>Operate é˜¶æ®µæ ¸å¿ƒç›®æ ‡æ˜¯ä¿è¯æ™ºèƒ½é©¾é©¶åŠŸèƒ½åœ¨ç”Ÿäº§è½¦è¾†ä¸Šçš„é•¿æœŸç¨³å®šæ€§ã€å®‰å…¨æ€§ã€å¯é æ€§ï¼›å®æ—¶ç›‘æ§è½¦è¾†çŠ¶æ€ã€æ¨¡å—å¥åº·ã€ç¯å¢ƒå˜åŒ–ï¼ŒåŠæ—¶å‘ç°å¹¶å¤„ç†å¼‚å¸¸ï¼›æŒç»­æ”¶é›†æ•°æ®ï¼Œæ”¯æŒæ¨¡å‹è¿­ä»£å’ŒåŠŸèƒ½ä¼˜åŒ–ï¼›é€šè¿‡ OTAï¼ˆOver-The-Airï¼‰ç»´æŠ¤å’Œæ›´æ–°è½¯ä»¶ã€‚</p><p>Operate é˜¶æ®µå…³é”®æ´»åŠ¨ï¼š</p><table><thead><tr><th>æ´»åŠ¨</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>è½¦è¾†åœ¨çº¿ç›‘æ§</td><td>å®æ—¶ä¸ŠæŠ¥å„ ECUã€ä¼ æ„Ÿå™¨ã€æ™ºèƒ½é©¾é©¶åŸŸæ§ï¼ˆDCUï¼‰å¥åº·çŠ¶æ€</td></tr><tr><td>å…³é”®æŒ‡æ ‡é‡‡é›†</td><td>å¦‚æ„ŸçŸ¥å»¶è¿Ÿã€è§„åˆ’é¢‘ç‡ã€è½¦è¾†æ§åˆ¶è¯¯å·®ã€å®šä½æ¼‚ç§»ç­‰</td></tr><tr><td>å®‰å…¨çŠ¶æ€ç®¡ç†</td><td>å®šæ—¶åšè‡ªæ£€ï¼ŒåŒ…æ‹¬ä¼ æ„Ÿå™¨è‡ªè¯Šæ–­ã€åŠŸèƒ½å®‰å…¨æœºåˆ¶ï¼ˆASILï¼‰æ£€æµ‹</td></tr><tr><td>OTA ç®¡ç†</td><td>è¿œç¨‹æ›´æ–°è½¯ä»¶ç‰ˆæœ¬ã€å‚æ•°é…ç½®ï¼Œå¹¶è®°å½•æ›´æ–°çŠ¶æ€</td></tr><tr><td>å¼‚å¸¸æ—¥å¿—é‡‡é›†</td><td>å‘ç”Ÿæ•…éšœæ—¶æŠ“å–ç³»ç»Ÿå¿«ç…§ï¼ˆsensor dumpã€core dumpï¼‰ç”¨äºæ’æŸ¥</td></tr><tr><td>æ•°æ®å›ä¼ </td><td>æ”¶é›†ç‰¹å®šè·¯å†µã€Corner Case ç­‰æ•°æ®ï¼Œç”¨äºæ¨¡å‹å†è®­ç»ƒ</td></tr><tr><td>è¿œç¨‹ååŠ©å’Œè¯Šæ–­</td><td>å½“å‡ºç°ç–‘éš¾é—®é¢˜ï¼Œå¯è¿œç¨‹æ¥ç®¡æˆ–è¾…åŠ©åˆ†æ</td></tr><tr><td>å®‰å…¨ä¿éšœæœºåˆ¶</td><td>å¦‚ L3/L4 è½¦è¾†åœ¨æ¨¡å—å¼‚å¸¸æ—¶å¹³ç¨³é€€å‡ºè‡ªåŠ¨é©¾é©¶æ¨¡å¼</td></tr></tbody></table><p>Operate é˜¶æ®µæœ€ä½³å®è·µï¼š</p><ul><li>å¤šå±‚ç›‘æ§ä½“ç³»ï¼šECU çº§ã€åŸŸæ§çº§ã€æ•´è½¦çº§ï¼Œä¸‰çº§ç›‘æ§ä¿è¯å…¨é“¾è·¯å¥åº·</li><li>æ¨¡å—å¥åº·è‡ªæ£€æµ‹ï¼šå‘¨æœŸæ€§å¯¹æ„ŸçŸ¥ã€å®šä½ã€è§„åˆ’æ¨¡å—åšè‡ªæ£€</li><li>é—­ç¯æ•°æ®æµï¼šä»è½¦è¾†åˆ°äº‘ç«¯çš„æ•°æ®è‡ªåŠ¨å›ä¼ ã€è‡ªåŠ¨åˆ†æã€è‡ªåŠ¨è§¦å‘æ”¹è¿›</li><li>åˆ†çº§å‘Šè­¦æœºåˆ¶ï¼šä¸¥é‡å‘Šè­¦ï¼ˆå¦‚æ„ŸçŸ¥å¤±æ•ˆï¼‰ç›´æ¥è§¦å‘ç´§æ€¥åœè½¦ï¼Œä¸­ä½çº§å‘Šè­¦é€šçŸ¥åå°</li><li>è‡ªåŠ¨ OTA å›æ»šï¼šOTA æ›´æ–°å¤±è´¥æ—¶å¯è‡ªåŠ¨å›é€€åˆ°ä¸Šä¸€ä¸ªç¨³å®šç‰ˆæœ¬</li><li>æ³•è§„åˆè§„æ€§ï¼šä¿è¯ç¬¦åˆ ISO 26262ã€ISO/PAS 21448ï¼ˆSOTIFï¼‰ã€UN-R155/156 ç­‰æ ‡å‡†</li></ul><p>Operate é˜¶æ®µå¸¸è§æŒ‘æˆ˜ï¼š</p><ul><li>Q: å¤§è§„æ¨¡è½¦é˜Ÿä¸­è½¦è¾†åˆ†å¸ƒå¹¿ï¼Œè¿ç»´æˆæœ¬é«˜<ul><li>A: é‡‡ç”¨é›†ä¸­äº‘ç®¡å¹³å° + OTA + è¿œç¨‹è¯Šæ–­</li></ul></li><li>Q: Corner Case è§¦å‘æ¦‚ç‡ä½ï¼Œéš¾ä»¥ä¸»åŠ¨å‘ç°<ul><li>A: é€šè¿‡æ™ºèƒ½æ•°æ®æ ‡æ³¨å’Œäº‘ç«¯èšç±»ï¼Œè¯†åˆ«æ½œåœ¨é—®é¢˜</li></ul></li><li>Q: å®è½¦ç¯å¢ƒå˜åŒ–å¤§ï¼ˆå¤©æ°”ã€å…‰çº¿ã€é“è·¯ï¼‰å¯¼è‡´ç³»ç»Ÿä¸ç¨³å®š<ul><li>A: æŒç»­å›ä¼ å¤šæ ·åŒ–æ•°æ®ï¼Œæ›´æ–°æ¨¡å‹å¹¶ç°åº¦éƒ¨ç½²éªŒè¯</li></ul></li></ul><h4 id="æ™ºé©¾æ¨¡å‹"><a class="header-anchor" href="#æ™ºé©¾æ¨¡å‹"></a>æ™ºé©¾æ¨¡å‹</h4><p>Operate é˜¶æ®µæ ¸å¿ƒç›®æ ‡æ˜¯éƒ¨ç½²åœ¨è½¦ç«¯æˆ–è¾¹ç¼˜ç«¯åï¼Œéœ€ä¿æŒç¨³å®šã€ä½å»¶è¿Ÿã€èµ„æºå ç”¨å—æ§ï¼›å®æ—¶ç›‘æ§æ¨ç†è€—æ—¶ã€å‡†ç¡®ç‡å˜åŒ–ã€ç½®ä¿¡åº¦åˆ†å¸ƒã€Corner Case å‡ºç°é¢‘ç‡ç­‰ï¼›æ¨¡å‹è¾“å‡ºä¸åˆç†ï¼ˆå¦‚å¤§é¢ç§¯æ¼æ£€ï¼‰æ—¶è§¦å‘å‘Šè­¦å¹¶è®°å½•ä¸Šä¸‹æ–‡æ•°æ®ï¼›å°†å¤±è´¥æ ·æœ¬ã€ä½ç½®ä¿¡æ ·æœ¬ã€ç‰¹å®šç¯å¢ƒæ•°æ®å›ä¼ åˆ°äº‘ç«¯ç”¨äºæŒç»­è¿­ä»£ï¼›æ¨¡å‹æ”¯æŒ OTAã€ç°åº¦å‘å¸ƒï¼Œç¡®ä¿æ–°æ¨¡å‹ä¸Šçº¿ä¸ä¼šå¸¦æ¥å¤§é¢ç§¯å›å½’ã€‚</p><p>Operate é˜¶æ®µæ ¸å¿ƒæ´»åŠ¨ï¼š</p><table><thead><tr><th>ç±»åˆ«</th><th>æ´»åŠ¨</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ¨¡å‹ç›‘æ§</td><td>æ¨¡å‹æ¨ç†è€—æ—¶ç›‘æ§</td><td>CPU/GPU/DLA ç«¯æ¨ç†æ—¶é—´ç¨³å®šæ€§</td></tr><tr><td></td><td>æ¨¡å‹ç»“æœç›‘æ§</td><td>æ¼æ£€ç‡ã€è¯¯æ£€ç‡ã€ç½®ä¿¡åº¦æ¼‚ç§»ï¼Œè¾“å‡ºç»“æœä¸€è‡´æ€§</td></tr><tr><td></td><td>èµ„æºå ç”¨</td><td>æ¨ç†è¿›ç¨‹å†…å­˜å ç”¨ã€æ˜¾å­˜ã€æ¸©åº¦ç­‰</td></tr><tr><td>å¼‚å¸¸å¤„ç†</td><td>åŠ¨æ€ Fallback</td><td>å¦‚æ„ŸçŸ¥æ¨¡å‹å¤±æ•ˆå¯åˆ‡å…¥è§„åˆ™é€»è¾‘æˆ–ç®€åŒ–æ¨¡å‹</td></tr><tr><td></td><td>è‡ªåŠ¨æ—¥å¿—&amp;æ•°æ®æ‰“åŒ…</td><td>å‡ºç°å¼‚å¸¸ç»“æœæ—¶è‡ªåŠ¨ä¸Šä¼ æ¨¡å‹è¾“å…¥ã€è¾“å‡ºã€ä¸Šä¸‹æ–‡</td></tr><tr><td>æ•°æ®é—­ç¯</td><td>åœºæ™¯è§¦å‘å›ä¼ </td><td>ç‰¹å®šå¤©æ°”/å…‰ç…§/è·¯å†µç­‰åœºæ™¯è‡ªåŠ¨é‡‡é›†ä¸Šä¼ </td></tr><tr><td></td><td>æ ‡æ³¨ä¸è®­ç»ƒè”åŠ¨</td><td>æ ‡æ³¨å›¢é˜Ÿå¯¹åé¦ˆæ•°æ®å¿«é€Ÿå¤„ç†å¹¶è§¦å‘æ–°ä¸€è½®è®­ç»ƒ</td></tr><tr><td>OTA æ”¯æŒ</td><td>æ¨¡å‹çƒ­æ›´æ–°</td><td>æ¨¡å‹æ”¯æŒåŠ¨æ€åŠ è½½æˆ–é‡å¯åŠ è½½ï¼ˆå¦‚ TensorRTã€ONNXï¼‰</td></tr><tr><td></td><td>æ¨¡å‹ç‰ˆæœ¬ç®¡ç†</td><td>æ”¯æŒ hash æ ¡éªŒã€åˆ‡æ¢å›æ»šã€ç‰ˆæœ¬å®¡è®¡ç­‰èƒ½åŠ›</td></tr></tbody></table><p><em>æ³¨ï¼šæ¨¡å‹OTAä¸€èˆ¬è·Ÿéšæ™ºé©¾è½¯ä»¶ï¼Œæ•´ä¸ªæ™ºé©¾ç³»ç»ŸOTAï¼Œæ¨¡å‹å¾€å¾€ä¸å‰åå¤„ç†ä»£ç å¼ºç›¸å…³ã€‚</em></p><p>Operate é˜¶æ®µæœ€ä½³å®è·µï¼š</p><ul><li>è¾¹è½¦æ¨¡å‹è§‚æµ‹å™¨è®¾è®¡ï¼šåœ¨æ„ŸçŸ¥/é¢„æµ‹æ¨¡å—æ—éƒ¨ç½²è½»é‡ agentï¼Œä¸“é—¨é‡‡é›†æ¨¡å‹è¾“å‡ºç»Ÿè®¡ä¿¡æ¯ä¸æ¨ç†æŒ‡æ ‡</li><li>Corner Case æ•æ‰ç­–ç•¥ï¼šæ¯”å¦‚æ£€æµ‹ç©ºè½¦é“è¯¯è¯†åˆ«ä¸ºè¡Œäººã€çº¢ç»¿ç¯è¯¯åˆ¤ç­‰ï¼Œæ ‡è®°å›ä¼ </li><li>ç°åº¦æ¨¡å‹ä¸Šçº¿æµç¨‹ï¼šåŸºäº VIN ç™½åå•/åœ°å›¾åŒºåŸŸé€æ­¥éƒ¨ç½²ï¼Œä¿éšœæ§åˆ¶å®‰å…¨æ€§</li><li>ä¸ CI/CD æµæ°´çº¿è”åŠ¨ï¼šæ¨¡å‹ä¸Šçº¿å‰åè‡ªåŠ¨éªŒè¯å…³é”®è·¯å¾„ï¼Œç¡®ä¿æ— å›å½’</li><li>åœºæ™¯æ ‡ç­¾åŒ–åé¦ˆæ•°æ®ï¼šä¸ºé‡‡é›†å›æ¥çš„æ•°æ®æ‰“ä¸Šæ ‡ç­¾ï¼ˆå¦‚â€œå¤œé—´-é›¨å¤©-é®æŒ¡â€ï¼‰ï¼Œæ–¹ä¾¿ä¸‹ä¸€è½®è®­ç»ƒç²¾å‡†é€‰æ ·</li></ul><h3 id="ç›‘æ§-Monitor"><a class="header-anchor" href="#ç›‘æ§-Monitor"></a>ç›‘æ§ - Monitor</h3><h4 id="äº‘æœåŠ¡-v4"><a class="header-anchor" href="#äº‘æœåŠ¡-v4"></a>äº‘æœåŠ¡</h4><p>Monitor é˜¶æ®µæ ¸å¿ƒç›®æ ‡æ˜¯å®æ—¶ã€å…¨é¢åœ°è§‚å¯Ÿç³»ç»Ÿå’Œä¸šåŠ¡çŠ¶æ€ï¼›åŠæ—¶å‘ç°æ€§èƒ½ã€å¯ç”¨æ€§ã€å¼‚å¸¸è¶‹åŠ¿ï¼›æä¾›é‡åŒ–æ•°æ®æ”¯æŒåç»­ä¼˜åŒ–ã€å®¹é‡è§„åˆ’ã€äº§å“è¿­ä»£ï¼›å½¢æˆè‡ªåŠ¨åŒ–å‘Šè­¦ä½“ç³»ï¼Œå°†é—®é¢˜ç¬¬ä¸€æ—¶é—´æ¨é€åˆ°è´£ä»»äººã€‚</p><p>Monitor é˜¶æ®µå…³é”®æ´»åŠ¨ï¼š</p><table><thead><tr><th>æ´»åŠ¨</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æŒ‡æ ‡æ”¶é›†</td><td>é‡‡é›†ç³»ç»Ÿå’Œåº”ç”¨çš„ CPUã€å†…å­˜ã€IOã€å“åº”æ—¶é—´ã€QPS ç­‰æŒ‡æ ‡</td></tr><tr><td>æ—¥å¿—æ”¶é›†</td><td>é›†ä¸­æ”¶é›†ã€å­˜å‚¨å¹¶åˆ†æåº”ç”¨å’Œç³»ç»Ÿæ—¥å¿—</td></tr><tr><td>åˆ†å¸ƒå¼è¿½è¸ª</td><td>è®°å½•è¯·æ±‚åœ¨å¤šç³»ç»Ÿé—´æµè½¬çš„è¿‡ç¨‹ï¼Œå®šä½é“¾è·¯ç“¶é¢ˆ</td></tr><tr><td>ç”¨æˆ·ä½“éªŒç›‘æµ‹</td><td>æ£€æµ‹é¡µé¢åŠ è½½é€Ÿåº¦ã€API å¤±è´¥ç‡ã€App å´©æºƒç‡ç­‰</td></tr><tr><td>SLA/SLO ç›‘æ§</td><td>è·Ÿè¸ªå¹¶éªŒè¯æœåŠ¡å¯ç”¨æ€§æ˜¯å¦è¾¾æˆå¯¹å®¢æˆ·æ‰¿è¯º</td></tr><tr><td>å‘Šè­¦ç³»ç»Ÿé›†æˆ</td><td>å¯¹è¶…é˜ˆå€¼æˆ–å¼‚å¸¸æŒ‡æ ‡è‡ªåŠ¨è§¦å‘å‘Šè­¦å¹¶é€šçŸ¥ç›¸å…³äººå‘˜</td></tr><tr><td>ä»ªè¡¨ç›˜ä¸å¯è§†åŒ–</td><td>ä»¥å›¾è¡¨ã€çœ‹æ¿å½¢å¼å±•ç¤ºæ ¸å¿ƒæŒ‡æ ‡ï¼Œä¾¿äºæŒç»­å…³æ³¨å’Œå¯¹æ¯”</td></tr></tbody></table><p>Monitor é˜¶æ®µæœ€ä½³å®è·µï¼š</p><ul><li>è¦†ç›–å…¨æ ˆç›‘æ§ï¼šåº”ç”¨ã€æ•°æ®åº“ã€ä¸­é—´ä»¶ã€ç½‘ç»œã€ä¸»æœºæŒ‡æ ‡éƒ½åº”è¦†ç›–</li><li>ä¸‰å¤§å¯è§‚æµ‹æ€§æ”¯æŸ±ï¼šæŒ‡æ ‡ï¼ˆMetricsï¼‰ã€æ—¥å¿—ï¼ˆLogsï¼‰ã€è¿½è¸ªï¼ˆTracingï¼‰ç»Ÿä¸€åˆ†æ</li><li>å‘Šè­¦é™å™ªï¼šé¿å…å‘Šè­¦é£æš´ï¼Œé€šè¿‡å‘Šè­¦åˆå¹¶ã€é™é»˜æœŸã€ä¼˜å…ˆçº§ç­‰å‡å°‘è¯¯æŠ¥</li><li>æœåŠ¡çº§åˆ«ç›®æ ‡ï¼ˆSLOï¼‰ï¼šå°†å¯ç”¨æ€§æŒ‡æ ‡ä¸ä¸šåŠ¡ç›®æ ‡æŒ‚é’©ï¼Œæ¯”å¦‚ã€Œ99.9% çš„ API æˆåŠŸç‡ã€</li><li>ä¸ CI/CD è”åŠ¨ï¼šä¸Šçº¿åæŒç»­è§‚å¯Ÿæ ¸å¿ƒæŒ‡æ ‡ï¼Œè‡ªåŠ¨å›æ»šæœ‰é—®é¢˜çš„ç‰ˆæœ¬</li><li>è‡ªåŠ¨åŒ–å®¹é‡é¢„æµ‹ï¼šç”¨ç›‘æ§æ•°æ®é©±åŠ¨èµ„æºæ‰©å®¹æˆ–æ¶æ„ä¼˜åŒ–</li></ul><p>Monitor é˜¶æ®µå¸¸è§æŒ‘æˆ˜ï¼š</p><ul><li>Q: åªç›‘æ§ç³»ç»Ÿå±‚é¢ï¼Œç¼ºä¹ä¸šåŠ¡æŒ‡æ ‡<ul><li>A: åœ¨åº”ç”¨ä¸­åŸ‹ç‚¹ï¼Œé‡‡é›†å…³é”®ä¸šåŠ¡æµç¨‹æŒ‡æ ‡</li></ul></li><li>Q: æŒ‡æ ‡ä¸ä¸€è‡´æˆ–æ ‡å‡†æ··ä¹±<ul><li>A: åˆ¶å®šç»Ÿä¸€çš„ç›‘æ§æŒ‡æ ‡è§„èŒƒ</li></ul></li><li>Q: å‘Šè­¦é¢‘ç¹è¯¯æŠ¥ï¼Œå¯¼è‡´è¿ç»´ç–²åŠ³<ul><li>A: ä¼˜åŒ–é˜ˆå€¼ã€é‡‡ç”¨è‡ªé€‚åº”å‘Šè­¦æˆ–åŸºäºæœºå™¨å­¦ä¹ çš„å¼‚å¸¸æ£€æµ‹</li></ul></li><li>Q: å¯è§‚æµ‹æ€§å­¤å²›ï¼šæŒ‡æ ‡ã€æ—¥å¿—ã€è¿½è¸ªåˆ†æ•£åœ¨ä¸åŒç³»ç»Ÿ<ul><li>A: é‡‡ç”¨é›†ä¸­å¯è§‚æµ‹æ€§å¹³å°ï¼ˆå¦‚ Elastic Observabilityã€Grafana Cloudã€Datadogï¼‰</li></ul></li></ul><p>Monitor é˜¶æ®µæ ¸å¿ƒäº§ç‰©ï¼š</p><ul><li>ç›‘æ§ä»ªè¡¨ç›˜ï¼ˆDashboardï¼‰</li><li>æŒ‡æ ‡æ—¶åºæ•°æ®åº“ï¼ˆTSDBï¼‰</li><li>å‘Šè­¦è§„åˆ™é…ç½®å’Œè®°å½•</li><li>SLA/SLO æŠ¥è¡¨</li><li>è¿½è¸ªæ•°æ®å’Œé“¾è·¯æ‹“æ‰‘</li><li>åˆ†ææŠ¥å‘Šï¼ˆå‘¨/æœˆ/å­£åº¦å¥åº·åº¦</li></ul><h4 id="æ™ºé©¾è½¯ä»¶-v2"><a class="header-anchor" href="#æ™ºé©¾è½¯ä»¶-v2"></a>æ™ºé©¾è½¯ä»¶</h4><p>Monitor é˜¶æ®µæ ¸å¿ƒç›®æ ‡æ˜¯æŒç»­æ”¶é›†å¹¶å¯è§†åŒ–æ•´è½¦å’Œæ ¸å¿ƒç®—æ³•æ¨¡å—çš„è¿è¡ŒçŠ¶æ€ï¼›å¿«é€Ÿå‘ç°æ„ŸçŸ¥ã€å®šä½ã€è§„åˆ’ã€æ§åˆ¶ç­‰å…³é”®æ¨¡å—çš„æ€§èƒ½å¼‚å¸¸ï¼›è®°å½•ç¯å¢ƒã€é©¾é©¶è¡Œä¸ºã€Corner Case ç­‰æƒ…å†µï¼Œä¸ºæ¨¡å‹è¿­ä»£æä¾›æ•°æ®ï¼›æ”¯æŒå¼‚å¸¸è‡ªåŠ¨å‘Šè­¦ï¼Œæå‰å‘ç°æ½œåœ¨é£é™©å¹¶è”åŠ¨è‡ªåŠ¨åŒ–å¤„ç†ã€‚</p><p>Monitor é˜¶æ®µå…³é”®æ´»åŠ¨ï¼š</p><table><thead><tr><th>æ´»åŠ¨</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ç³»ç»Ÿå¥åº·ç›‘æ§</td><td>ç›‘æ§åŸŸæ§ï¼ˆDCUï¼‰ã€å„ ECUã€ç”µæºã€ä¼ æ„Ÿå™¨ç¡¬ä»¶çŠ¶æ€</td></tr><tr><td>æ¨¡å—æ€§èƒ½ç›‘æ§</td><td>ç›‘æµ‹æ„ŸçŸ¥å¸§ç‡ã€å»¶è¿Ÿã€å®šä½ç²¾åº¦ã€è§„åˆ’é¢‘ç‡ã€æ§åˆ¶è¯¯å·®ç­‰æŒ‡æ ‡</td></tr><tr><td>ç¯å¢ƒä¸é©¾é©¶çŠ¶æ€ç›‘æ§</td><td>è®°å½•å¤©æ°”ã€å…‰çº¿ã€è·¯é¢çŠ¶å†µã€é©¾é©¶å‘˜æ¥ç®¡é¢‘ç‡ç­‰</td></tr><tr><td>è½¦é˜ŸçŠ¶æ€èšåˆ</td><td>äº‘ç«¯æ±‡æ€»æ¯è¾†è½¦ä¸Šä¼ çš„æ•°æ®ï¼Œå½¢æˆå…¨è½¦é˜Ÿå¥åº·å¤§ç›˜</td></tr><tr><td>æ•°æ®å¯è§†åŒ–</td><td>åœ¨äº‘ç«¯ä»ªè¡¨ç›˜ä¸Šå®æ—¶å±•ç¤ºè½¦è¾†çŠ¶æ€ã€æ ¸å¿ƒæŒ‡æ ‡ã€å‘Šè­¦åˆ†å¸ƒ</td></tr><tr><td>å¼‚å¸¸å‘Šè­¦</td><td>é…ç½®æŒ‡æ ‡é˜ˆå€¼ï¼Œè‡ªåŠ¨è§¦å‘æœ¬åœ°æˆ–äº‘ç«¯å‘Šè­¦</td></tr><tr><td>æ—¥å¿—å’Œæ•°æ®å½’æ¡£</td><td>å¼‚å¸¸æƒ…å†µä¸‹ä¿å­˜å¿«ç…§ç”¨äºæ’æŸ¥ï¼Œæ­£å¸¸è¿è¡Œä¸­åšå®šæœŸå½’æ¡£</td></tr></tbody></table><p>Monitor é˜¶æ®µæœ€ä½³å®è·µï¼š</p><ul><li>å¤šçº§ç›‘æ§ï¼šè½¦è½½æœ¬åœ°å®æ—¶ç›‘æ§ + äº‘ç«¯æ±‡æ€»ç›‘æ§</li><li>æŒ‡æ ‡ä¸äº‹ä»¶ç»“åˆï¼šå¯¹è¿ç»­å¼‚å¸¸ï¼ˆå¦‚å®šä½æ¼‚ç§»ï¼‰å’Œçªå‘äº‹ä»¶ï¼ˆä¼ æ„Ÿå™¨æ‰çº¿ï¼‰éƒ½è¦ç›‘æµ‹</li><li>æŒ‡æ ‡é˜ˆå€¼åŠ¨æ€è°ƒæ•´ï¼šç¯å¢ƒå·®å¼‚å¤§ï¼Œå¯ç”¨ AI æˆ–å¤§æ•°æ®ç»Ÿè®¡å®ç°è‡ªé€‚åº”å‘Šè­¦é˜ˆå€¼</li><li>SLA/SLO å®šä¹‰ï¼šä¾‹å¦‚ã€Œæ„ŸçŸ¥æ¨¡å—å¹³å‡å»¶è¿Ÿ â‰¤ 50msã€ï¼Œå¹¶ç›‘æµ‹æ˜¯å¦è¾¾æˆ</li><li>å¯è§†åŒ–ä¸€ä½“åŒ–ï¼šæ•´åˆè½¦é˜ŸçŠ¶æ€ã€å•è½¦å†å²ã€å‘Šè­¦è®°å½•ã€æ€§èƒ½è¶‹åŠ¿åˆ°åŒä¸€çœ‹æ¿</li><li>æ•°æ®åˆè§„ï¼šåˆè§„å¤„ç†æ¶‰åŠåœ°ç†ä½ç½®ã€é©¾é©¶è¡Œä¸ºæ•°æ®ï¼Œæ»¡è¶³æ•°æ®å®‰å…¨å’Œéšç§æ³•è§„</li></ul><p>Monitor é˜¶æ®µå¸¸è§æŒ‘æˆ˜ï¼š</p><ul><li>Q: æ•°æ®é‡å·¨å¤§ã€ä¸Šä¼ å¸¦å®½å—é™<ul><li>A: è¾¹ç¼˜è®¡ç®— + æ•°æ®åˆ†çº§ä¸ŠæŠ¥ï¼ˆåªä¸Šä¼ å…³é”®æŒ‡æ ‡æˆ–å¼‚å¸¸æ—¶å…¨é‡ä¸Šä¼ ï¼‰+ æŒ‰éœ€æ‹‰å–</li></ul></li><li>Q: ä¸åŒè½¦å‹ã€ä¸åŒç¡¬ä»¶å¹³å°çš„æŒ‡æ ‡æ ‡å‡†ä¸ä¸€è‡´<ul><li>A: åˆ¶å®šç»Ÿä¸€æŒ‡æ ‡æ ‡å‡†ï¼Œæˆ–åœ¨äº‘ç«¯åšå¤šè½¦å‹å…¼å®¹</li></ul></li><li>Q: æœ¬åœ°å‘Šè­¦å»¶è¿Ÿé«˜æˆ–ä¸¢å¤±<ul><li>A: é‡‡ç”¨æœ¬åœ°ç¼“å­˜+æ–­ç‚¹ç»­ä¼ +ä¼˜å…ˆçº§ä¸ŠæŠ¥</li></ul></li></ul><h4 id="æ™ºé©¾æ¨¡å‹-v2"><a class="header-anchor" href="#æ™ºé©¾æ¨¡å‹-v2"></a>æ™ºé©¾æ¨¡å‹</h4><p>Monitor é˜¶æ®µæ ¸å¿ƒç›®æ ‡æ˜¯å®æ—¶æŒæ¡æ¨¡å‹æ¨ç†æ€§èƒ½ï¼šå»¶è¿Ÿã€é¢‘ç‡ã€ç¡¬ä»¶èµ„æºå ç”¨ï¼›ç›‘æµ‹æ¨¡å‹ç»“æœçš„å‡†ç¡®æ€§ã€ç¨³å®šæ€§å’Œä¸€è‡´æ€§ï¼›æ•è·æ¨¡å‹å¤±æ•ˆæˆ–è¾“å‡ºå¼‚å¸¸ï¼›ç»Ÿè®¡åœºæ™¯åˆ†å¸ƒã€ç½®ä¿¡åº¦åˆ†å¸ƒç­‰è¶‹åŠ¿æŒ‡æ ‡ï¼›å½¢æˆå¯è§†åŒ–åˆ†æä¸è‡ªåŠ¨åŒ–å‘Šè­¦é—­ç¯ï¼›ä¸ºæ•°æ®å›æµå’Œæ¨¡å‹è¿­ä»£æä¾›å¯é ä¾æ®ã€‚</p><p>Monitor é˜¶æ®µå…³é”®æ´»åŠ¨ï¼š</p><table><thead><tr><th>æ´»åŠ¨</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ¨¡å‹æ¨ç†æ€§èƒ½ç›‘æ§</td><td>è·Ÿè¸ªæ¯æ¬¡æ¨ç†çš„è€—æ—¶ã€å†…å­˜/æ˜¾å­˜å ç”¨ã€æ¨ç†å¸§ç‡ï¼Œå‘ç°æ€§èƒ½ä¸‹é™æˆ–æ³¢åŠ¨</td></tr><tr><td>æ¨¡å‹è¾“å‡ºç›‘æ§</td><td>åˆ†ææ¨¡å‹è¾“å‡ºçš„ç½®ä¿¡åº¦åˆ†å¸ƒã€ç±»åˆ«æ¦‚ç‡ã€è¿ç»­å¸§ä¸€è‡´æ€§</td></tr><tr><td>ç»“æœåˆç†æ€§æ£€æµ‹</td><td>ä¾‹å¦‚æ£€æµ‹ç›®æ ‡çªç„¶æ¶ˆå¤±/æ¼‚ç§»ï¼Œé¢„æµ‹è½¨è¿¹çªå˜ï¼Œè§„åˆ’æ„å›¾å¼‚å¸¸ç­‰</td></tr><tr><td>Corner Case é‡‡é›†</td><td>è¯†åˆ«æ˜“é”™åœºæ™¯å¹¶è®°å½•ç¯å¢ƒã€ä¼ æ„Ÿå™¨è¾“å…¥ã€æ¨¡å‹è¾“å‡ºä¸Šä¸‹æ–‡</td></tr><tr><td>è‡ªåŠ¨åŒ–å‘Šè­¦</td><td>æ¨¡å‹æ€§èƒ½/ç»“æœå‡ºç°é˜ˆå€¼å¤–å¼‚å¸¸æ—¶æ¨é€å‘Šè­¦ç»™è¿ç»´/ç ”å‘äººå‘˜</td></tr><tr><td>åœºæ™¯ç»Ÿè®¡</td><td>æ ¹æ®å¤©æ°”ã€å…‰ç…§ã€è·¯å†µç­‰æ ‡ç­¾ç»Ÿè®¡æ¨¡å‹è¡¨ç°ï¼Œæ‰¾å‡ºæ¨¡å‹å¼±ç‚¹</td></tr></tbody></table><p>Monitor é˜¶æ®µæœ€ä½³å®è·µï¼š</p><ul><li>æŒ‡æ ‡å®æ—¶é‡‡é›† + ä¸ŠæŠ¥ï¼šä¸è¦åªåšæ—¥å¿—è®°å½•ï¼Œè¦èƒ½å®æ—¶æ±‡æ€»åˆ°äº‘ç«¯</li><li>ç«¯åˆ°ç«¯ä¸€è‡´æ€§æ£€æµ‹ï¼šæ„ŸçŸ¥-é¢„æµ‹-è§„åˆ’æ¨¡å‹ä¸²è”è¾“å‡ºæ˜¯å¦è‡ªæ´½</li><li>åŠ¨æ€é˜ˆå€¼å‘Šè­¦ï¼šä¸åŒè½¦å‹ã€ä¸åŒå·¥å†µå¯ä»¥æœ‰ä¸åŒçš„å‘Šè­¦é˜ˆå€¼</li><li>ä¸ç¯å¢ƒå…³è”ï¼šç»“åˆ GPSã€IMUã€æ‘„åƒå¤´ç­‰æ•°æ®ï¼Œå°†æ¨¡å‹è¡¨ç°å’Œç¯å¢ƒå…³è”èµ·æ¥</li><li>å¯è§†åŒ–ï¼šå¯¹è½¦é˜Ÿä¸­å„è½¦å‹ã€ä¸åŒåŒºåŸŸçš„æ¨¡å‹è¡¨ç°å½¢æˆè¶‹åŠ¿å›¾ï¼Œæ–¹ä¾¿å¿«é€Ÿå®šä½é—®é¢˜</li></ul><p>Monitor é˜¶æ®µå¸¸è§æŒ‘æˆ˜ï¼š</p><ul><li>Q: æ•°æ®é‡å¤§ï¼Œä¸Šä¼ æˆæœ¬é«˜<ul><li>A: åªåœ¨å¼‚å¸¸æˆ–å¼±åœºæ™¯ä¸­åšå…³é”®æ•°æ®å›ä¼ </li></ul></li><li>Q: ä¸åŒç‰ˆæœ¬æ¨¡å‹æ··ç”¨ï¼Œéš¾ä»¥ç»Ÿä¸€ç›‘æ§<ul><li>A: å¼ºåˆ¶ä¸ŠæŠ¥æ¨¡å‹ç‰ˆæœ¬å·ï¼Œå¹¶åœ¨äº‘ç«¯å¯¹ä¸åŒç‰ˆæœ¬åšåˆ†ç»„å¯¹æ¯”</li></ul></li><li>Q: ç°åœºé—®é¢˜éš¾ä»¥é‡ç°<ul><li>A: æŠ“å–æ¨¡å‹è¾“å…¥ã€è¾“å‡ºã€ç¯å¢ƒå…ƒæ•°æ®ï¼Œå¹¶å¯åœ¨ä»¿çœŸç¯å¢ƒä¸­é‡æ”¾</li></ul></li></ul><p>ä¸Šè¿°å„é˜¶æ®µä¸­ï¼Œæœ‰æ ¹æ®ä»£ç ã€æ¨¡å‹ç»´åº¦åˆ†ç±»ï¼Œä¹Ÿæœ‰æ ¹æ®äº‘æœåŠ¡ã€æ™ºé©¾è½¯ä»¶ã€æ™ºé©¾æ¨¡å‹ç»´åº¦åˆ†ç±»ï¼Œä¸åŒåˆ†ç±»çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†æ›´æœ‰é’ˆå¯¹æ€§çš„å±•ç°è¯¥é˜¶æ®µçš„ä¸»è¦å†…å®¹ã€‚è™½ç„¶åšäº†ä¸€å®šçš„åˆ’åˆ†ï¼Œæœ¬è´¨ä¸ŠåŒºåˆ«ä¸å¤§ï¼Œä¸»è¦æ˜¯å…³æ³¨çš„ç»´åº¦ä¸åŒã€‚</p><p>ä»¥ä¸Šå¯¹ DevOps æ— é™å¾ªç¯å›¾çš„ 8 ä¸ªç¯èŠ‚åšäº†æ¦‚è§ˆæ€§çš„æè¿°ï¼Œæ¯ä¸€ä¸ªç¯èŠ‚éƒ½å¯ä»¥å±•å¼€å…·ä½“å®è·µï¼ŒæœŸå¾…åç»­çš„ç¯‡ç« ã€‚</p><h2 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://en.wikipedia.org/wiki/DevOps">DevOps - Wikipedia</a></li><li><a href="https://zh.wikipedia.org/zh-cn/%E8%87%AA%E5%8B%95%E9%A7%95%E9%A7%9B%E6%B1%BD%E8%BB%8A">è‡ªåŠ¨é©¾é©¶æ±½è½¦ - Wikipedia</a></li><li><a href="https://pagertree.com/learn/devops/what-is-devops">What is DevOps?</a></li><li><a href="https://chatgpt.com/">ChatGPT å„ç§ç›¸å…³ prompt çš„å›ç­”</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;DevOps è¿™ä¸€å¼€å‘ç†å¿µåœ¨2009å¹´è¢«æå‡ºåï¼Œç»è¿‡åå‡ å¹´çš„å‘å±•ï¼Œå·²ç»éå¸¸æˆç†Ÿäº†ï¼Œç‰¹åˆ«æ˜¯åœ¨å¾®æœåŠ¡æ¶æ„è¢«æå‡ºå¹¶æµè¡Œå¼€æ¥ï¼Œè¿›ä¸€æ­¥æ¨åŠ¨ DevOps å®è·µæ·±å…¥å‘å±•ã€‚DevOps æ—¢ç„¶å·²ç»è¿™ä¹ˆæˆç†Ÿäº†ï¼Œæˆ‘ä»¬ä¸ºå•¥è¿˜è¦å†™è¿™ä¸ªè¯é¢˜ï¼Ÿç¬”è€…è®¤ä¸ºç†å¿µæ˜¯æˆç†Ÿçš„ï¼Œä½†åº”ç”¨çš„ä¸šåŠ¡åœºæ™¯æ˜¯æ—¥æ–°æœˆå¼‚çš„ï¼Œæ€ä¹ˆæŠŠ</summary>
      
    
    
    
    <category term="æŠ€æœ¯ç§¯ç´¯" scheme="http://blog.cuicc.com/categories/%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/"/>
    
    
    <category term="æ™ºèƒ½é©¾é©¶" scheme="http://blog.cuicc.com/tags/%E6%99%BA%E8%83%BD%E9%A9%BE%E9%A9%B6/"/>
    
    <category term="DevOps" scheme="http://blog.cuicc.com/tags/DevOps/"/>
    
    <category term="CI/CD" scheme="http://blog.cuicc.com/tags/CI-CD/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨C++æ¨¡æ¿çš„ä¸€äº›æŠ€å·§</title>
    <link href="http://blog.cuicc.com/blog/2021/12/25/some-tips-for-cpp-template/"/>
    <id>http://blog.cuicc.com/blog/2021/12/25/some-tips-for-cpp-template/</id>
    <published>2021-12-25T13:45:06.000Z</published>
    <updated>2025-03-16T07:58:25.552Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ¨¡æ¿æ˜¯ä»€ä¹ˆ"><a class="header-anchor" href="#æ¨¡æ¿æ˜¯ä»€ä¹ˆ"></a>æ¨¡æ¿æ˜¯ä»€ä¹ˆ</h2><blockquote><p>æ¨¡æ¿ï¼ˆTemplateï¼‰åœ¨C++ ç¨‹åºè®¾è®¡è¯­è¨€ä¸­ï¼Œæ˜¯æŒ‡å‡½æ•°æ¨¡æ¿ä¸ç±»æ¨¡æ¿[1]ï¼Œæ˜¯ä¸€ç§å‚æ•°åŒ–ç±»å‹æœºåˆ¶ã€‚Javaå’ŒCï¼ƒä¸­çš„æ³›å‹ä¸C++ çš„æ¨¡æ¿å¤§ä½“å¯¹åº”ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›åŠŸèƒ½ä¸Šçš„æ˜¾è‘—å·®å¼‚ï¼ˆC++ æ¨¡æ¿æ”¯æŒä¸¤è€…æ²¡æœ‰æ˜ç¡®å¯¹åº”çš„æ¨¡æ¿æ¨¡æ¿å‚æ•°å’Œæ¨¡æ¿éç±»å‹å‚æ•°ï¼Œä½†ä¸æ”¯æŒJavaçš„é€šé…ç¬¦ä»¥åŠC#çš„æ³›å‹ç±»å‹çº¦æŸï¼‰ã€‚æ¨¡æ¿æ˜¯C++ çš„æ³›å‹ç¼–ç¨‹ä¸­ä¸å¯ç¼ºå°‘çš„ä¸€éƒ¨åˆ†ã€‚</p><footer><strong>https://zh.wikipedia.org/wiki/%E6%A8%A1%E6%9D%BF_(C%2B%2B)</strong></footer></blockquote><p>ç®€å•è¯´ï¼Œæ¨¡æ¿çš„åŸºæœ¬ç”¨æ³•æ˜¯å¯ä»¥ç®€åŒ–å‚æ•°ç±»å‹ä¸åŒä½†é€»è¾‘ç›¸åŒçš„ä»£ç ï¼Œç‰¹åˆ«æ˜¯ä¸åŒå‚æ•°ç±»å‹çš„é‡è½½å‡½æ•°ã€‚</p><h2 id="é‡åˆ°çš„é—®é¢˜"><a class="header-anchor" href="#é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h2><p>æœ€è¿‘æœ‰ä¸€ä¸ªç‰¹æ€§é‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œå¸®ä»–ä»¬ä¼˜åŒ–ï¼Œé¡ºä¾¿æ•´ç†ä¸€ä¸‹ã€‚è¿™ä¸ªç‰¹æ€§ç”±åŸæ¥çš„å•ä¸ªactionå˜æˆäº†å¤šä¸ªactionï¼Œè¿™é‡Œé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æœ‰ä¸€ä¸ªå…¥å‚å¯¹è±¡éœ€è¦å’Œå¯¹åº”çš„actionåšå…³è”æ›´æ–°ï¼Œåªå­˜ä¸€ä»½è¿™ä¸ªå¯¹è±¡æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œè€Œå¯¹è±¡åˆæ¯”è¾ƒå¤§ï¼Œæ‹·è´å¤šä»½çš„è¯ï¼Œæµªè´¹äº†å¤§é‡å†…å­˜ã€‚æœ€åçš„æ–¹æ¡ˆæ˜¯æŠŠä¼šæ›´æ–°çš„éƒ¨åˆ†å•ç‹¬æ‹¿å‡ºæ¥åšäº†å¤šä»½ï¼Œåªè¯»çš„éƒ¨åˆ†è¿˜æ˜¯å…±ç”¨åŸæ¥è¿™ä¸ªå¯¹è±¡ï¼Œæœ€åæŠŠæ›´æ–°çš„éƒ¨åˆ†æ•´åˆå›å»ç»™ä¸‹æ¸¸ç”¨ã€‚ç®€å•ç”¨ä¼ªç è¡¨ç¤ºå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># åŸå¯¹è±¡ç»“æ„</span><br><span class="line">struct Example1 &#123;</span><br><span class="line">    type var1; // æ›´æ–°</span><br><span class="line">    type var2; // æ›´æ–°</span><br><span class="line">    ...</span><br><span class="line">    type varn; // åªè¯»</span><br><span class="line">&#125;;</span><br><span class="line"># å¤šä»½å¯¹è±¡ç»“æ„</span><br><span class="line">struct NewExample1 &#123;</span><br><span class="line">    type var1;</span><br><span class="line">    type var2;</span><br><span class="line">    ...</span><br><span class="line">    Example1* e1; // åªè¯»</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¸ºäº†ä¸å½±å“åŸæœ‰çš„åŠŸèƒ½ï¼Œç‰¹æ€§ç®—æ³•å¼€å‘ç›´æ¥æŠŠç›¸å…³å‡½æ•°æ‹·è´å‡ºæ¥ä¸€ä»½ï¼Œä½¿ç”¨æ–°å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œæ‹·è´ä¸€ä»½æ˜¯å› ä¸ºç±»å‹ä¸ä¸€æ ·äº†ï¼Œä¸”è¯»å–æ•°æ®çš„æ–¹å¼ä¹Ÿä¸åŒã€‚è¿™æ ·å¸¦æ¥ä¸€ä¸ªé—®é¢˜ï¼Œæ¯æ¬¡ç‰¹æ€§åˆ†æ”¯åŒæ­¥ä¸»å¹²æ—¶ï¼Œè¿™éƒ¨åˆ†æ‹·è´å‡ºæ¥çš„ä»£ç éƒ½ä¸ä¼šè¢«æ›´æ–°ï¼Œéœ€è¦äººå·¥å’ŒåŸå‡½æ•°æ ¡å¯¹ä¿®æ”¹ï¼ŒåŒæ—¶å¤§é‡çš„é‡å¤ä»£ç ä¹Ÿç»™ç»´æŠ¤ä»£ç å¸¦æ¥äº†å¾ˆå¤§çš„æˆæœ¬ã€‚</p><p>å®é™…ä¸Šï¼Œè¿™ä¸¤ç§ç±»å‹çš„å¤„ç†é€»è¾‘æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯ç±»å‹ä¸åŒä¸”è®¿é—®çš„æ•°æ®æºå½¢å¼ä¸å¤ªä¸€æ ·ï¼Œæ¯”å¦‚ä½¿ç”¨<code>NewExample1</code>ç±»å‹æ—¶ï¼Œå…¶æ•°æ®æºæœ‰æœ¬èº«å¯èƒ½æ›´æ–°çš„<code>var1</code>, ä¹Ÿæœ‰ä¸å˜çš„éƒ¨åˆ†æ¯”å¦‚<code>e1-&gt;varn</code>ã€‚è¿™æ­£æ˜¯æ³›å‹ç¼–ç¨‹å¯ä»¥å‘æŒ¥çš„åœºæ™¯ï¼Œä½¿ç”¨æ¨¡æ¿å¯ä»¥å»æ‰å¤§é‡çš„é‡å¤é€»è¾‘ã€‚</p><h2 id="æ³›å‹ç¼–ç¨‹"><a class="header-anchor" href="#æ³›å‹ç¼–ç¨‹"></a>æ³›å‹ç¼–ç¨‹</h2><p>æ³›å‹ç¼–ç¨‹æ˜¯æŒ‡ä½¿ç”¨ä¸€ç§ç‹¬ç«‹äºä»»ä½•å…·ä½“ç±»å‹çš„æ–¹å¼è¿›è¡Œç¼–ç ï¼Œæ¨¡æ¿æ˜¯æ³›å‹ç¼–ç¨‹çš„åŸºç¡€ã€‚ä½¿ç”¨æ¨¡æ¿å‰éœ€è¦ææ¸…æ¥šçš„æ˜¯ï¼Œæ¨¡æ¿çš„æ¨å¯¼æ˜¯ç¼–è¯‘æœŸå®Œæˆçš„ï¼Œç¼–è¯‘å®Œæˆåå°±ç”Ÿæˆäº†å¯¹åº”ç±»å‹çš„ç‰¹åŒ–å®ç°ï¼Œå¹¶ä¸æ˜¯è¿è¡ŒæœŸåŠ¨æ€ç‰¹åŒ–ã€‚</p><p>æ‰€ä»¥æ¨¡æ¿å‡½æ•°å®ç°ä¸€èˆ¬æ”¾åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œç¼–è¯‘å™¨åœ¨ç±»å‹æ£€æŸ¥æ—¶ï¼Œåªæœ‰çœ‹åˆ°å‡½æ•°å®ç°æ‰èƒ½ç‰¹åŒ–å‡ºå…·ä½“ç±»å‹çš„å‡½æ•°ã€‚å¦‚æœæ¨¡æ¿å‡½æ•°å£°æ˜å’Œå®ç°åˆ†å¼€ï¼Œä¼šå¯¼è‡´é“¾æ¥æ—¶æ‰¾ä¸åˆ°å‡½æ•°å®ç°ã€‚</p><p>ä»ä¸Šé¢çš„ç‰¹æ€§å¼€å‘å¾—çŸ¥ï¼Œç‰¹æ€§åˆ†æ”¯éœ€è¦åŒæ­¥ä¸»å¹²ä»£ç ï¼Œé‚£ä¹ˆå¦‚æœåœ¨ç‰¹æ€§åˆ†æ”¯ä¸ŠæŠŠæ¨¡æ¿å‡½æ•°å®ç°éƒ½ç§»å…¥å¤´æ–‡ä»¶ï¼Œä¹Ÿä¼šç»™åŒæ­¥é€ æˆå¾ˆå¤§çš„é—®é¢˜ï¼Œä¹Ÿéœ€è¦äººå·¥æ ¡å¯¹å¤´æ–‡ä»¶çš„æ¨¡æ¿å‡½æ•°å’Œcppé‡Œçš„å‡½æ•°ï¼Œæœ€å¥½çš„æ–¹å¼å°±æ˜¯å°±åœ°(cppä¸­)æ¨¡æ¿åŒ–ã€‚</p><h3 id="åœ¨cppä¸­æ¨¡æ¿åŒ–"><a class="header-anchor" href="#åœ¨cppä¸­æ¨¡æ¿åŒ–"></a>åœ¨cppä¸­æ¨¡æ¿åŒ–</h3><p>å¦‚ä½•å®ç°æ¨¡æ¿å£°æ˜å’Œå®ç°çš„åˆ†ç¦»ï¼Œåœ¨cppæ–‡ä»¶ä¸­å®ç°å‡½æ•°ã€‚æ£€ç´¢é€šè¿‡<code>stackoverflow</code>æ‰¾ä¸ªäº†æ–¹æ¡ˆï¼šåœ¨cppä¸­å®ç°æ—¶ï¼Œéœ€è¦å£°æ˜è¦ç‰¹åŒ–çš„ç±»å‹ï¼Œè¿™æ ·åœ¨ç¼–è¯‘æ—¶å°±èƒ½æ ¹æ®ç‰¹åŒ–å£°æ˜æ¥ç‰¹åŒ–å‡½æ•°å®ç°ã€‚å½“ç„¶è¿™æ ·å°±ä¸æ˜¯å¹¿ä¹‰çš„æ³›å‹äº†ï¼Œåªæ”¯æŒå£°æ˜ç‰¹åŒ–çš„å‡ ç§ç±»å‹ï¼Œè¯¦ç»†å†…å®¹çœ‹<code>stackoverflow</code>åŠå…¶æœ€ä½³ç­”æ¡ˆé‡Œçš„é“¾æ¥ã€‚åœ¨è¿™ä¸ªç‰¹æ€§ä¸­ï¼Œè¿™ç§æ–¹å¼æ»¡è¶³å½“å‰çš„ä½¿ç”¨ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># .h</span><br><span class="line"># æ¨¡æ¿ç±»</span><br><span class="line">template &lt;class T&gt;</span><br><span class="line">class Example &#123;</span><br><span class="line">    void Func1(T&amp; t);</span><br><span class="line">    ...</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"># æ¨¡æ¿å‡½æ•°</span><br><span class="line">template &lt;class T&gt;</span><br><span class="line">void ExampleFunc(T&amp; t);</span><br><span class="line"></span><br><span class="line"># .cpp</span><br><span class="line"># æ¨¡æ¿ç±»å®ç°</span><br><span class="line">template &lt;class T&gt;</span><br><span class="line">void Example&lt;T&gt;::Func1(T&amp; t) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">## æ˜ç¡®ç±»ç‰¹åŒ–</span><br><span class="line">template class Example&lt;Example1&gt;;</span><br><span class="line">template class Example&lt;NewExample1&gt;;</span><br><span class="line"></span><br><span class="line"># æ¨¡æ¿å‡½æ•°å®ç°</span><br><span class="line">template &lt;class T&gt;</span><br><span class="line">void ExampleFunc(T&amp; t) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># æ˜ç¡®å‡½æ•°ç‰¹åŒ–</span><br><span class="line">template void ExampleFunc&lt;Example1&gt;(T&amp; t);</span><br><span class="line">template void ExampleFunc&lt;NewExample1&gt;(T&amp; t);</span><br></pre></td></tr></table></figure><p>ç»“åˆä¸Šè¿°ç±»å‹ï¼Œæˆ‘ä»¬ç‰¹åŒ–äº†<code>Example1</code>å’Œ<code>NewExample1</code>ä¸¤ç§å®ç°ï¼Œæ»¡è¶³æˆ‘ä»¬å½“å‰çš„ä½¿ç”¨éœ€æ±‚ã€‚è¿™æ ·èƒ½æ¶ˆé™¤å¤§éƒ¨åˆ†çš„é‡å¤é€»è¾‘ï¼Œä»…ä»…å¢åŠ äº†ä¸¤ç§ç‰¹åŒ–å£°æ˜ã€‚</p><h3 id="ç±»å‹å·®å¼‚å¤„ç†"><a class="header-anchor" href="#ç±»å‹å·®å¼‚å¤„ç†"></a>ç±»å‹å·®å¼‚å¤„ç†</h3><p>å‰æ–‡æåˆ°ï¼Œå› ä¸ºæˆ‘ä»¬ä¸¤ç§ç±»å‹ä»…ä»…æ˜¯ä¸ºäº†é¿å…å¤§é‡å†—ä½™åªè¯»çš„éƒ¨åˆ†ï¼Œæˆ‘ä»¬æœ‰äº›é€»è¾‘è·å–æ•°æ®æºæ˜¯å’Œç±»å‹å¼ºå…³è”çš„ï¼Œç›´æ¥ä¸Šä¾‹å­æ›´ç›´è§‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># Example1ç±»å‹å¤„ç†</span><br><span class="line">void Example::Func1(Example1&amp; t) &#123;</span><br><span class="line">    return t.var1 + t.varn;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># NewExample1ç±»å‹å¤„ç†, åªè¯»éƒ¨åˆ†é€šè¿‡æŒ‡é’ˆè®¿é—®Example1</span><br><span class="line">void Example::Func1(NewExample1&amp; t) &#123;</span><br><span class="line">    return t.var1 + t.e1-&gt;varn;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œå¯¹äºè¯»å†™éƒ¨åˆ†ï¼Œä¸¤ç§ç±»å‹çš„è¯»å–ä»£ç ä¸€æ‘¸ä¸€æ ·ï¼Œå¯¹äºåªè¯»éƒ¨åˆ†ï¼Œå°±å‡ºç°äº†å·®å¼‚ã€‚åœ¨ä¸è€ƒè™‘å¤æ‚æ¨¡æ¿çš„æƒ…å†µä¸‹ï¼Œæƒ³åˆ°çš„ä¸€ç§æŠ˜ä¸­æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># æ¨¡æ¿å‡½æ•°å®ç°</span><br><span class="line">template &lt;class T&gt;</span><br><span class="line">void Example&lt;T&gt;::Func1(const Example1&amp; t1, T&amp; t2) &#123;</span><br><span class="line">    return t2.var1 + t1.varn;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># å…¨ç‰¹åŒ–ä¸¤ç§ç±»å‹çš„å®ç°ï¼Œå°è£…å…·ä½“å·®å¼‚éƒ¨åˆ†</span><br><span class="line">template &lt;&gt;</span><br><span class="line">void Example&lt;Example1&gt;::Func1(Example1&amp; t) &#123;</span><br><span class="line">    return Func1(t, t);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">template &lt;&gt;</span><br><span class="line">void Example&lt;NewExample1&gt;::Func1(NewExample1&amp; t) &#123;</span><br><span class="line">    return Func1(*t.e1, t);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åªå¢åŠ äº†å‡½æ•°è°ƒç”¨çš„å°è£…ï¼Œå±è”½ç±»å‹å¼•èµ·çš„å·®å¼‚ã€‚åœ¨æ¶ˆé™¤é‡å¤ä»£ç çš„æƒ…å†µä¸‹ï¼Œå¢åŠ äº†ä¸€ç‚¹å‡½æ•°å°è£…çš„ä»£ç ï¼Œå½“å‰ä¹Ÿè¿˜å¯ä»¥æ¥å—ã€‚å½“ç„¶ï¼Œè¿™ç§æ–¹æ³•ï¼Œåªé€‚ç”¨äºæ˜ç¡®çŸ¥é“å‡ ç§ç±»å‹çš„æƒ…å†µä¸‹ï¼Œå¦‚æœæ³›åŒ–çš„ç±»å‹æ¯”è¾ƒå¤šï¼Œå°±ä¸æ˜¯ä¸€ç§å¾ˆå¥½çš„æ–¹æ³•äº†ã€‚</p><h3 id="æ›´å¥½çš„æ–¹æ³•ï¼Ÿ"><a class="header-anchor" href="#æ›´å¥½çš„æ–¹æ³•ï¼Ÿ"></a>æ›´å¥½çš„æ–¹æ³•ï¼Ÿ</h3><p>é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥åœ¨æ¨¡æ¿ä¸­å¤„ç†ç±»å‹å¸¦æ¥çš„é€»è¾‘å·®å¼‚å‘¢ã€‚æ˜¯ä¸æ˜¯åªèƒ½é€šè¿‡æ¨¡æ¿å…ƒç¼–ç¨‹æ¥è§£å†³å‘¢ï¼Ÿè¿˜åœ¨ç ”ç©¶ä¸­ã€‚ã€‚ã€‚</p><h2 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><p><a href="https://en.cppreference.com/w/cpp/language/templates">Templates - cppreference.com</a></p><p><a href="https://stackoverflow.com/questions/115703/storing-c-template-function-definitions-in-a-cpp-file">Storing C++ template function definitions in a .CPP file</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;æ¨¡æ¿æ˜¯ä»€ä¹ˆ&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#æ¨¡æ¿æ˜¯ä»€ä¹ˆ&quot;&gt;&lt;/a&gt;æ¨¡æ¿æ˜¯ä»€ä¹ˆ&lt;/h2&gt;
&lt;blockquote&gt;&lt;p&gt;æ¨¡æ¿ï¼ˆTemplateï¼‰åœ¨C++ ç¨‹åºè®¾è®¡è¯­è¨€ä¸­ï¼Œæ˜¯æŒ‡å‡½æ•°æ¨¡æ¿ä¸ç±»æ¨¡æ¿[1]ï¼Œæ˜¯ä¸€ç§å‚æ•°åŒ–ç±»å‹æœºåˆ¶ã€‚Javaå’ŒC</summary>
      
    
    
    
    <category term="æŠ€æœ¯ç§¯ç´¯" scheme="http://blog.cuicc.com/categories/%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/"/>
    
    
    <category term="C/C++" scheme="http://blog.cuicc.com/tags/C-C/"/>
    
  </entry>
  
  <entry>
    <title>è®°ä¸€æ¬¡å†…å­˜æ³„æ¼å®šä½</title>
    <link href="http://blog.cuicc.com/blog/2021/12/10/checking-for-mem-leaks/"/>
    <id>http://blog.cuicc.com/blog/2021/12/10/checking-for-mem-leaks/</id>
    <published>2021-12-10T14:21:44.000Z</published>
    <updated>2025-03-16T07:58:25.536Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘æµ‹è¯•æ—¶å‘ç°ï¼Œè¿è¡Œç›¸å¯¹è¾ƒé•¿ä¸€æ®µæ—¶é—´åè¿›ç¨‹å› å†…å­˜ä½¿ç”¨è¶…è¿‡é…é¢ä¸Šé™è€Œè¢«æ€æ‰ï¼Œè¿™åº”è¯¥æ˜¯å†…å­˜ç¼“æ…¢å¢é•¿å¯¼è‡´çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å‡ºç°äº†å†…å­˜æ³„æ¼ã€‚è¿™ä¸ªè¿›ç¨‹ä»£ç æ˜¯ç”¨C++å®ç°çš„ï¼Œä¸”åŸºæœ¬æ²¡æœ‰ä½¿ç”¨<code>malloc/free</code>, <code>new/delete</code>ç­‰æ˜¾å¼çš„å†…å­˜ç”³è¯·é‡Šæ”¾ï¼Œä½†ä»£ç ä¸­å¤§é‡ä½¿ç”¨äº†æ ‡å‡†åº“çš„å®¹å™¨ç±»ã€‚è¿™ç§å› ä¸ºä¸šåŠ¡é€»è¾‘å¯¼è‡´å®¹å™¨æ²¡æœ‰æ¸…é™¤å¯¼è‡´çš„å†…å­˜æ³„éœ²ï¼Œä¹‹å‰ä¸€ç›´æ²¡æœ‰æ‰¾åˆ°å¾ˆå¥½çš„å®šä½æ‰‹æ®µï¼Œå·²çŸ¥çš„å·¥å…·<code>valgrind</code>è²Œä¼¼ä¸èƒ½ç”¨æ¥å®šä½è¿™ç§æ–¹å¼çš„æ³„éœ²ã€‚</p><p>é€šè¿‡å†…å¤–ç½‘æœç´¢ï¼Œæ‰¾åˆ°äº†ä¸€äº›åŸºäºå†…å­˜é‡‡æ ·çš„åˆ†æå·¥å…·ï¼Œå¦‚<code>google-perftools</code>é‡Œçš„<code>tcmalloc</code>ï¼ŒåŠ<code>bytehound</code>ï¼Œæœ¬æ–‡ä¸»è¦è®°å½•ä¸‹ä½¿ç”¨<code>tcmalloc</code>å®šä½å†…å­˜æ³„æ¼çš„æ–¹æ³•ã€‚</p><h2 id="google-perftools"><a class="header-anchor" href="#google-perftools"></a>google-perftools</h2><p><a href="https://github.com/gperftools/gperftools">google-perftools</a>æ˜¯Googleå¼€æºçš„ä¸€ä¸ªé«˜æ€§èƒ½çš„å¤šçº¿ç¨‹çš„<code>malloc</code>å®ç°é›†ï¼Œå·ç§°å½“å‰æœ€å¿«çš„<code>malloc</code>ï¼Œä½¿ç”¨å®ƒå¯ä»¥æé«˜å†…å­˜è®¿é—®æ€§èƒ½ï¼Œåœ¨æˆ‘ä»¬çš„æµ‹è¯•ä¸­ï¼Œæœ‰å¤§çº¦å•æ ¸10%çš„CPUæ€§èƒ½æå‡ã€‚åŒæ—¶ï¼Œå®ƒè¿˜é›†æˆäº†<code>heap-checker</code>ï¼Œ<code>heap-profiler</code>ï¼Œ<code>cpu-profiler</code>ç­‰å†…å­˜å’Œcpuæ£€æŸ¥<a href="https://github.com/gperftools/gperftools/wiki">åˆ†æå·¥å…·</a>ã€‚è¿™é‡Œä¸»è¦ä½¿ç”¨<code>heap-profiler</code>æ¥å®šä½å†…å­˜æ³„æ¼é—®é¢˜ã€‚</p><h3 id="tcmallocåº“"><a class="header-anchor" href="#tcmallocåº“"></a>tcmallocåº“</h3><p>ubuntuä¸Šå¯ä»¥ç›´æ¥é€šè¿‡<code>apt</code>å®‰è£…</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt install -y google-perftools</span><br><span class="line"></span><br><span class="line"># ç›¸å…³è·¯å¾„å¦‚ä¸‹</span><br><span class="line"># /usr/bin/google-pprof</span><br><span class="line"># /usr/lib/x86_64-linux-gnu/libtcmalloc.so.4</span><br></pre></td></tr></table></figure><p>æœ‰ä¸¤ç§æ–¹å¼æ¥ä½¿ç”¨tcmallocåº“ï¼Œä¸€ç§æ˜¯åœ¨ç¼–è¯‘æ—¶é“¾æ¥ï¼Œç„¶åè¿è¡Œæ—¶é€šè¿‡ç¯å¢ƒå˜é‡å¯ç”¨ä¸åŒçš„å·¥å…·ï¼Œå®˜æ–¹wikiçœ‹èµ·æ¥æ˜¯æ¨èè¿™ç§æ–¹å¼çš„ã€‚å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">gcc [...] -o myprogram -ltcmalloc</span><br><span class="line"># HEAPPROFILEè®¾ç½®è¾“å‡ºåˆ†ææ–‡ä»¶çš„å‰ç¼€</span><br><span class="line">HEAPPROFILE=/tmp/myprogram ./myprogram</span><br></pre></td></tr></table></figure><p>å¦ä¸€ç§æ–¹å¼æ˜¯é€šè¿‡<code>PRELOAD</code>çš„æ–¹å¼ä¼˜å…ˆåŠ è½½è¯¥åŠ¨æ€é“¾æ¥åº“ï¼Œå¥½å¤„æ˜¯å®ƒä¸ç”¨é‡æ–°ç¼–è¯‘ä»£ç ï¼Œä¸”å¯ä»¥è¦†ç›–è¯¥ç¨‹åºåŠå…¶ä»–åœ¨æ­¤ä¹‹åé“¾æ¥åº“é‡Œçš„ç›¸åŒå‡½æ•°å®ç°ï¼Œå®ç°å…¨å±€ä½¿ç”¨çš„ç›®çš„ã€‚å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">env LD_PRELOAD=&quot;/usr/lib/libtcmalloc.so&quot; HEAPPROFILE=/tmp/myprogram ./myprogram</span><br></pre></td></tr></table></figure><h3 id="å†…å­˜åˆ†æ"><a class="header-anchor" href="#å†…å­˜åˆ†æ"></a>å†…å­˜åˆ†æ</h3><p>é€šè¿‡ä¸Šè¿°å¯åŠ¨ç¨‹åºåï¼Œæ¯éš”10sé’Ÿä¼šåœ¨æŒ‡å®šçš„è¾“å‡ºè·¯å¾„è¾“å‡ºå†…å­˜é‡‡æ ·æ–‡ä»¶ï¼Œå¦‚<code>/tmp/myprogram.0001.heap</code>ã€‚é€šè¿‡ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ç¨‹åºçœ‹ä¸‹å…¶è¿‡ç¨‹ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># test.cpp</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;cstdlib&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">void test() &#123;</span><br><span class="line">    vector&lt;int&gt; testv;</span><br><span class="line">    for (int i = 0; i &lt; 10000; i++) &#123;</span><br><span class="line">        testv.push_back(i);</span><br><span class="line">    &#125;</span><br><span class="line">    # é€€å‡ºä¸é‡Šæ”¾å†…å­˜</span><br><span class="line">    exit(1);</span><br><span class="line">&#125;</span><br><span class="line">int main(void) &#123;</span><br><span class="line">    test();</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥ç¤ºä¾‹é€šè¿‡<code>vector</code>ç”³è¯·äº†<code>10000*sizeof(int)</code>å¤§å°å·¦å³çš„å†…å­˜ï¼Œç„¶åæ²¡æœ‰é‡Šæ”¾ã€‚ç¼–è¯‘å¹¶é¢„åŠ è½½<code>tcmalloc</code>æ‰§è¡Œã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">g++ test.cpp -o test</span><br><span class="line">env LD_PRELOAD=&quot;/usr/lib/x86_64-linux-gnu/libtcmalloc.so.4&quot; HEAPPROFILE=/tmp/test ./test</span><br><span class="line"># æ‰§è¡Œå®Œæˆåçœ‹åˆ°ä»¥ä¸‹æ–‡ä»¶</span><br><span class="line">/tmp/test.0001.heap</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>google-pprof</code>æŸ¥çœ‹å¯ä»¥è¯¥æ–‡ä»¶ï¼Œé€šè¿‡ä¸åŒçš„å‚æ•°å¯ä»¥æŒ‡å®šæ˜¾ç¤ºæ–¹å¼ï¼Œç”šè‡³webæ˜¾ç¤ºä¹Ÿå¯ä»¥ã€‚æ¯”å¦‚ç”¨<code>--test</code>å‚æ•°æ˜¾ç¤ºæˆæ–‡æœ¬ï¼Œç”¨<code>--gv</code>æˆ–è€…<code>--pdf</code>å¯ä»¥å›¾å½¢åŒ–æ˜¾ç¤ºï¼Œå¦‚è¿™é‡Œå­˜åˆ°pdfæ–‡ä»¶ä¸­ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ google-pprof --pdf test /tmp/test.0001.heap &gt; test.0001.heap.pdf</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä¸‹å›¾å¯ä»¥ç›´è§‚çš„çœ‹åˆ°<code>test</code>å‡½æ•°<code>alloc</code>äº†å†…å­˜ï¼Œæ²¡æœ‰<code>dealloc</code>è¿‡ã€‚</p><p><img src="/images/test-0001-heap-pdf.png" alt=""></p><h3 id="å†…å­˜æ³„æ¼å®šä½"><a class="header-anchor" href="#å†…å­˜æ³„æ¼å®šä½"></a>å†…å­˜æ³„æ¼å®šä½</h3><p>é‚£ä¹ˆï¼Œåœ¨å¤æ‚çš„ç¨‹åºä¸­ï¼Œæ—¢æœ‰ç”³è¯·åˆæœ‰é‡Šæ”¾ï¼Œå†…å­˜ä¸€ç›´ç¼“æ…¢å¢é•¿è¯¥æ€ä¹ˆå–åˆ†æå®šä½å‘¢ï¼Ÿå¦‚æœç›´æ¥æŸ¥çœ‹å•ä¸ªæ–‡ä»¶ï¼Œå¹¶æ— æ³•è¯´æ˜å†…å­˜åªæœ‰ç”³è¯·æ²¡æœ‰é‡Šæ”¾ã€‚è¿™é‡Œä¼šç”¨åˆ°<code>pprof</code>æ¯”è¾ƒä¸¤ä¸ªheapæ–‡ä»¶æŸ¥çœ‹å·®å¼‚çš„æ–¹æ³•ã€‚æ¯”å¦‚è¿è¡Œç›¸å¯¹è¾ƒé•¿æ—¶é—´ç¨‹åºï¼Œè·å¾—äº†<code>myprogram.0001.heap ... myprogram.0234.heap</code> è¿™äº›é‡‡æ ·æ•°æ®ï¼ŒåŒæ—¶é€šè¿‡è§‚å¯Ÿè¿›ç¨‹å†…å­˜åœ¨è¿™æ®µæ—¶é—´å†…æ˜æ˜¾å¢é•¿ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯¹æ¯”ä¸¤ä¸ªæ–‡ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ google-pprof --pdf --base /tmp/test.0010.heap test /tmp/test.0234.heap &gt; test.compare.pdf</span><br></pre></td></tr></table></figure><p>ç”Ÿæˆçš„pdfå’Œä¸Šå›¾ç±»ä¼¼ï¼Œä¸åŒç‚¹åœ¨äºè¯¥pdfä¸­æ˜¾ç¤ºçš„ç›¸å¯¹å€¼ï¼Œå°±æ˜¯0234ç”³è¯·çš„å†…å­˜å‡å»0010ç”³è¯·çš„å€¼ã€‚å¯ä»¥ç›´è§‚çš„çœ‹åˆ°å“ªäº›å‡½æ•°ç›¸å¯¹ç”³è¯·äº†å æ¯”å¤§çš„å†…å­˜ï¼Œå¤§å¤§ç¼©å°äº†æ’æŸ¥èŒƒå›´ï¼Œç„¶åé€šè¿‡é˜…è¯»è¿™äº›å‡½æ•°å°±å¯ä»¥æ‰¾åˆ°å…·ä½“å“ªäº›å®¹å™¨å­˜åœ¨æœªæ¸…é™¤çš„é—®é¢˜ï¼Œæ¯”å¦‚æ²¡æœ‰<code>clear</code>æˆ–<code>erase</code>ã€‚</p><p>è¿™é‡Œå–ç¬¬0010ä¸ªheapæ–‡ä»¶æ˜¯å› ä¸ºç¨‹åºå‰æœŸåˆå§‹åŒ–ç­‰ç”³è¯·ä¸€äº›å†…å­˜ï¼Œè¿™éƒ¨åˆ†å…ˆæ’é™¤åœ¨å¤–ï¼Œé¿å…å¤§é‡å®šä½ã€‚è¿™é‡Œå¯ä»¥çµæ´»è¿ç”¨ï¼Œæ¯”å¦‚å¯ä»¥å…ˆçœ‹å•ä¸ªæ–‡ä»¶å“ªäº›ç”³è¯·äº†å¤§é‡å†…å­˜å†åšæ¯”è¾ƒã€‚</p><h2 id="bytehound"><a class="header-anchor" href="#bytehound"></a>bytehound</h2><p><a href="https://github.com/koute/bytehound">bytehound</a>æ˜¯ä¸€æ¬¾<code>Linux</code>å¹³å°çš„å†…å­˜åˆ†æå·¥å…·ï¼Œå…·æœ‰ä¸°å¯Œçš„å‰ç«¯ç•Œé¢ï¼Œå¯ä»¥çœ‹è¶‹åŠ¿å›¾ã€ç«ç„°å›¾ã€å†…å­˜ç”³è¯·è°ƒç”¨æ ˆç­‰ç­‰ã€‚ä¸ä¸Šé¢ä¸åŒçš„æ˜¯å®ƒé€šè¿‡ç»­å†™çš„æ–¹å¼ç”Ÿæˆä¸€ä¸ª<code>.dat</code>æ–‡ä»¶ã€‚</p><p>å®ƒçš„ç¼ºç‚¹æ˜¯ç”Ÿæˆçš„æ–‡ä»¶éå¸¸å¤§ï¼Œä»ç¬”è€…çš„æµ‹è¯•çœ‹ï¼Œè¯¥æ–‡ä»¶ä¸€åˆ†é’Ÿå¢åŠ 2Gå·¦å³ï¼Œå¯¹äºç¼“æ…¢å¢é•¿æ¥è¯´ï¼Œè¿è¡Œå‡ ä¸ªå°æ—¶æ–‡ä»¶å¤§å°åƒä¸æ¶ˆã€‚å†è€…ï¼Œè™½ç„¶ç«ç„°å›¾æ¯”è¾ƒç›´è§‚å¯ä»¥çœ‹å‡ºå†…å­˜çƒ­ç‚¹(ç±»ä¼¼cpuæ€§èƒ½çƒ­ç‚¹åˆ†æ)ï¼Œä½†æ˜¯æ²¡æœ‰å†…å­˜ç”³è¯·æ¯”è¾ƒï¼Œä¸å¤ªå®¹æ˜“ç¼©å°æ’æŸ¥èŒƒå›´ã€‚</p><p>å› ä¸ºç”Ÿæˆæ–‡ä»¶å¤ªå¤§çš„é—®é¢˜ï¼Œæ²¡æœ‰è¯¦ç»†ä½¿ç”¨è¯¥å·¥å…·ï¼Œå¦‚æœ‰å…´è¶£ï¼Œå¯ä»¥å‚è€ƒä»–çš„<a href="https://koute.github.io/bytehound/">è¯¦ç»†æ–‡æ¡£</a></p><h2 id="æ‰©å±•èµ„æ–™"><a class="header-anchor" href="#æ‰©å±•èµ„æ–™"></a>æ‰©å±•èµ„æ–™</h2><ol><li><a href="https://github.com/gperftools/gperftools/wiki">google-perftoolså®˜æ–¹wiki</a> - å®˜æ–¹wikiå¯¹è¯¥å·¥å…·å„æ–¹é¢éƒ½æœ‰è¯¦å°½çš„è¯´æ˜ï¼Œæƒ³äº†è§£å…¶ä»–åŠŸèƒ½ç»†èŠ‚å¯ä»¥å‚çœ‹</li><li><a href="https://segmentfault.com/a/1190000040982400">å†…å­˜æ³„æ¼çš„å®šä½ä¸æ’æŸ¥ï¼šHeap Profiling åŸç†è§£æ</a> - è¯¥æ–‡ç« è¯¦ç»†ä»‹ç»äº†<code>heap profile</code>çš„åŸç†ï¼Œä¸»æµå·¥å…·<code>profile</code>çš„å®ç°ç»†èŠ‚ç­‰ï¼Œè¯¥æ–‡ä¸­è¿˜æåˆ°äº†<code> gprof, Valgrind and gperftools</code>ç­‰å·¥å…·è¯„ä¼°é“¾æ¥ï¼Œå¯¹äºæƒ³äº†è§£åŸç†çš„åŒå­¦å»ºè®®é˜…è¯»ã€‚</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æœ€è¿‘æµ‹è¯•æ—¶å‘ç°ï¼Œè¿è¡Œç›¸å¯¹è¾ƒé•¿ä¸€æ®µæ—¶é—´åè¿›ç¨‹å› å†…å­˜ä½¿ç”¨è¶…è¿‡é…é¢ä¸Šé™è€Œè¢«æ€æ‰ï¼Œè¿™åº”è¯¥æ˜¯å†…å­˜ç¼“æ…¢å¢é•¿å¯¼è‡´çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å‡ºç°äº†å†…å­˜æ³„æ¼ã€‚è¿™ä¸ªè¿›ç¨‹ä»£ç æ˜¯ç”¨C++å®ç°çš„ï¼Œä¸”åŸºæœ¬æ²¡æœ‰ä½¿ç”¨&lt;code&gt;malloc/free&lt;/code&gt;, &lt;code&gt;new/delete&lt;/code&gt;ç­‰æ˜¾å¼</summary>
      
    
    
    
    <category term="æŠ€æœ¯ç§¯ç´¯" scheme="http://blog.cuicc.com/categories/%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/"/>
    
    
    <category term="C/C++" scheme="http://blog.cuicc.com/tags/C-C/"/>
    
  </entry>
  
  <entry>
    <title>çº¿ç¨‹æ± å¹¶è¡ŒåŒ–é‡æ„</title>
    <link href="http://blog.cuicc.com/blog/2021/12/03/refactor-in-parallel-with-multi-threads/"/>
    <id>http://blog.cuicc.com/blog/2021/12/03/refactor-in-parallel-with-multi-threads/</id>
    <published>2021-12-03T14:24:56.000Z</published>
    <updated>2025-03-16T07:58:25.536Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘ä¸šåŠ¡æ–°ç‰¹æ€§å¼€å‘ï¼Œç”±åŸæ¥çš„å•ä¸ªactionå˜æˆäº†å¤šä¸ªactionï¼Œæœ€åå–ä¸€ä¸ªæœ€ä¼˜actionã€‚ç”±äºactionå˜å¤šï¼Œè¿è¡Œæ—¶é—´ä¹Ÿç›¸åº”å¤šäº†å‡ å€ï¼Œactionä¹‹é—´æ˜¯ç›¸äº’ç‹¬ç«‹ï¼Œäº’ä¸å½±å“çš„ï¼Œé‚£ä¹ˆå°±æƒ³é€šè¿‡å¹¶è¡ŒåŒ–çš„æ–¹æ³•æå‡ä¸‹æ€§èƒ½ï¼Œè¿™ä¸ªæ—¶å€™è‡ªç„¶è€Œç„¶å°±æƒ³åˆ°äº†çº¿ç¨‹æ± ã€‚æœ¬æ–‡è®°å½•ä¸€ä¸‹æ­¤æ¬¡å¹¶è¡ŒåŒ–é‡æ„ä¸šåŠ¡ä»£ç æ—¶é‡åˆ°çš„ä¸€äº›æœ‰æ„æ€çš„ç‚¹ã€‚</p><h2 id="çº¿ç¨‹æ± "><a class="header-anchor" href="#çº¿ç¨‹æ± "></a>çº¿ç¨‹æ± </h2><p>æ¨¡å—ä¸­æœ¬æ¥å°±åŒ…å«çº¿ç¨‹æ¡†æ¶ï¼Œå¯ä»¥é€‚å½“ä¿®æ”¹æ”¯æŒçº¿ç¨‹æ± ï¼Œè¿™é‡Œæ²¡å•¥å¤§é—®é¢˜ã€‚ä¸šåŠ¡ä»£ç actionå¤„ç†å‡½æ•°çš„æ”¹é€ ä¸»è¦åœ¨äºå‡½æ•°è¾“å‡ºï¼Œç”±åŸæ¥çš„ä¸²è¡Œæ‰§è¡Œä½¿ç”¨çš„æˆå‘˜å˜é‡æ”¹ä¸ºå˜é‡æ•°ç»„ï¼Œå¯¹åº”äºçº¿ç¨‹æ± çš„ä¸ªæ•°ã€‚åŸæœ‰çš„ä¾æ¬¡æ¯”è¾ƒæ”¹æˆæœ€åéå†æ•°ç»„æ¯”è¾ƒå–æœ€ä¼˜ã€‚è¿™å—é‡æ„é—®é¢˜ä¸»è¦æ˜¯å†…å­˜é—®é¢˜ï¼Œæœ‰äº›è¾“å‡ºå˜é‡æ˜¯å¯¹è¾“å…¥å˜é‡çš„å±€éƒ¨æ›´æ–°ï¼Œä½†æ˜¯è¯¥å˜é‡æ˜¯å¾ˆå¤§çš„æ•°æ®ç»“æ„ï¼Œç›´æ¥å˜æˆæ•°ç»„ï¼Œé€ æˆå†…å­˜ä½¿ç”¨å¢åŠ å¾ˆå¤šï¼Œå½“å‰é€šè¿‡å¢åŠ è¾“å‡ºæ•°æ®ç»“æ„è§£å†³ï¼Œè¿™é‡Œçš„å‘å’Œå¤šçº¿ç¨‹æ— å…³ï¼Œå¦å¤–å•ç‹¬ä»‹ç»ã€‚</p><h2 id="å•ä¾‹"><a class="header-anchor" href="#å•ä¾‹"></a>å•ä¾‹</h2><p>è¿™å—ä¸šåŠ¡ä»£ç æœ‰ä¸€ä¸ªç‰¹è‰²ï¼Œå°±æ˜¯å•ä¾‹ä½¿ç”¨ç‰¹åˆ«å¤šï¼Œä¸”å•ä¾‹ä¸ä»…ä»…æ˜¯çŠ¶æ€èµ„æºç®¡ç†ç±»ï¼ŒåŒæ—¶è¿˜æ˜¯ä¸šåŠ¡åŠŸèƒ½ç±»ã€‚è¿™é‡Œå•ä¾‹ä½¿ç”¨çš„æ˜¯å¦åˆç†ï¼Œè½¯ä»¶æ¶æ„è®¾è®¡çš„æ˜¯å¦åˆç†ä¸åšæ·±å…¥è®¨è®ºã€‚å½“å‰åªè®¨è®ºæ€ä¹ˆé‡æ„æ”¯æŒå¤šçº¿ç¨‹ã€‚</p><h3 id="é‡æ„ä¸ºç±»æˆå‘˜å˜é‡"><a class="header-anchor" href="#é‡æ„ä¸ºç±»æˆå‘˜å˜é‡"></a>é‡æ„ä¸ºç±»æˆå‘˜å˜é‡</h3><p>é¦–å…ˆæƒ³åˆ°çš„æ–¹æ³•æ˜¯ï¼Œæ—¢ç„¶ä¸æ˜¯å…¨å±€çš„çŠ¶æ€èµ„æºç®¡ç†ç±»ï¼Œé‚£ä¹ˆæ”¹æˆç±»æˆå‘˜æ¯”è¾ƒåˆç†ï¼Œè¿™æ ·å¤šçº¿ç¨‹å¤„ç†æ—¶å¯ä»¥åƒä¸Šé¢çš„å‡½æ•°è¾“å‡ºï¼Œæ”¹æˆæ•°ç»„å°±èƒ½æ»¡è¶³éœ€æ±‚ã€‚ä½†é€šè¿‡é˜…è¯»ä»£ç å‘ç°å•ä¾‹äº’ç›¸è°ƒç”¨ï¼Œéšå¤„è°ƒç”¨ç­‰ç­‰ï¼Œè¿™ç§æ–¹æ³•éš¾ä»¥å®ç°ã€‚</p><h3 id="é‡æ„ä¸ºå¤šå•ä¾‹"><a class="header-anchor" href="#é‡æ„ä¸ºå¤šå•ä¾‹"></a>é‡æ„ä¸ºå¤šå•ä¾‹</h3><p>è¿™ç§æ–¹æ³•æ¯”è¾ƒçœäº‹ï¼ŒæŠŠåŸæ¥çš„é™æ€å®ä¾‹å˜æˆé™æ€å®ä¾‹æ•°ç»„ï¼Œè·å–å•ä¾‹æ¥å£é€šè¿‡å¢åŠ å‚æ•°æ¥åŒºåˆ†è·å–çš„æ˜¯å“ªä¸€ä¸ªå®ä¾‹ï¼Œä»è€Œå’Œçº¿ç¨‹å¯¹åº”èµ·æ¥ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">static const MyClass&amp; GetInstance(uint8_t threadIndex) &#123;</span><br><span class="line">    static MyClass instance[THREAD_POOL_SIZE];</span><br><span class="line">    return instance[threadIndex];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¤šçº¿ç¨‹å¤„ç†æ²¡æœ‰é—®é¢˜äº†ï¼Œç°åœ¨çš„é—®é¢˜å˜æˆå¦‚ä½•è·å–<code>threadIndex</code>ã€‚</p><p>ä¸€ä¸ªæ–¹æ³•æ˜¯ç»™çº¿ç¨‹æ± çš„å„çº¿ç¨‹å‘½åï¼Œå»ºç«‹çº¿ç¨‹åç§°ä¸<code>threadIndex</code>çš„mapå…³ç³»ï¼Œè¿™æ ·åœ¨çº¿ç¨‹å†…å¯ä»¥é€šè¿‡ç³»ç»Ÿæ¥å£è·å–çº¿ç¨‹åç§°ï¼Œå†é€šè¿‡mapå¾—åˆ°<code>threadIndex</code>ã€‚è¿™ç§æ–¹æ³•ä½¿ç”¨èµ·æ¥æ¯”è¾ƒæ–¹ä¾¿ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå•ä¾‹ç‰¹åˆ«å¤šä¸”é«˜é¢‘è°ƒç”¨ï¼Œé¢‘ç¹è°ƒç”¨ç³»ç»Ÿæ¥å£æ¯”è¾ƒå½±å“æ€§èƒ½ã€‚</p><p>å¦ä¸€ç§æ–¹æ³•æ˜¯é€šè¿‡å‚æ•°ä¼ é€’è¿›å»ï¼Œæ ¹æ®ä¸šåŠ¡ä»£ç ç‰¹ç‚¹ï¼Œæ¯ä¸ªç±»éƒ½æœ‰ä¸€ä¸ªåˆå§‹åŒ–é…ç½®æ¥å£<code>InitConfig</code>ï¼Œè¿™ä¸ªæ¥å£åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶æ‰§è¡Œä¸€æ¬¡ã€‚é‚£ä¹ˆå¯ä»¥ç»™æ¯ä¸ªç±»å¢åŠ ä¸€ä¸ªæˆå‘˜å˜é‡<code>threadIndex_</code>ï¼Œåœ¨çº¿ç¨‹å…¥å£å‡½æ•°ç±»çš„åˆå§‹åŒ–æ—¶ï¼Œéå†å…¥å£å¤šå•ä¾‹å¹¶æŠŠ<code>index</code>ä¼ å…¥ã€‚åœ¨æŠŠactionå¤„ç†å‡½æ•°æäº¤ç»™çº¿ç¨‹æ± å¤„ç†æ—¶ï¼Œå¢åŠ <code>index</code>å‚æ•°ï¼Œè¿™æ ·æ¯ä¸ªç±»åœ¨è°ƒç”¨å•ä¾‹æ—¶éƒ½æ˜¯é€šè¿‡ä¼ å…¥çš„<code>index</code>è°ƒç”¨çš„ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">MyClass::InitConfig(uint8_t index) &#123;</span><br><span class="line">    threadIndex_ = index;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># å…¥å£åˆå§‹åŒ–æ—¶å¯¹å¤šå•ä¾‹çš„åˆå§‹åŒ–</span><br><span class="line">for (uint8_t i = 0; i &lt; THREAD_POOL_SIZE) &#123;</span><br><span class="line">    MyClass::GetInstance(i).InitConfig(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># MyClassç±»ä¸­è°ƒç”¨å…¶ä»–å•ä¾‹æ—¶</span><br><span class="line">OtherClass::GetInstance(threadIndex_).HandleFunc(...)</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹æ³•ç›¸å¯¹æ¯”è¾ƒå¯è¡Œï¼Œå°±æ˜¯ä¿®æ”¹éå¸¸å¤šï¼Œæ¯ä¸€ä¸ªè°ƒç”¨å•ä¾‹ä¸”ä¼šæ›´æ–°çš„ç±»éƒ½è¦ä¿®æ”¹ã€‚</p><p>å•ä¾‹ä¿®æ”¹å®Œæˆåï¼Œä½¿ç”¨çº¿ç¨‹æ± è°ƒå¼æ—¶å‘ç°è¿˜æ˜¯ä¼šcoredumpï¼Œä¸ç”¨æƒ³è‚¯å®šæ˜¯å¤šçº¿ç¨‹åŒæ—¶è¯»å†™åŒä¸€ä»½æ•°æ®é€ æˆçš„ã€‚é€šè¿‡è°ƒç”¨æ ˆçœ‹åˆ°çš„å‡½æ•°è°ƒç”¨å…³ç³»ï¼Œçœ‹ä¸å‡ºæ¥å…·ä½“é—®é¢˜ç‚¹åœ¨å“ªé‡Œï¼Œè™½ç„¶æ¯æ¬¡è°ƒç”¨æ ˆéƒ½ä¸å¤ªä¸€æ ·ï¼Œä½†æ˜¯å‡ºé—®é¢˜çš„ç±»åŠå‡½æ•°æ˜¯ç›¸åŒçš„ï¼Œä¸”çœ‹åˆ°æ˜¯åŒä¸€ä¸ªç»“æ„é‡Œçš„å®¹å™¨æ‹·è´å‡ºäº†é—®é¢˜ã€‚é€šè¿‡å¢åŠ æ‰“å°åŠé˜…è¯»ä»£ç ï¼Œå‘ç°äº†å¦ä¸€ä¸ªå‘â€¦</p><h2 id="staticå˜é‡"><a class="header-anchor" href="#staticå˜é‡"></a>staticå˜é‡</h2><p>æŸäº›ç±»æˆå‘˜å‡½æ•°ä¸­ï¼Œå±€éƒ¨å˜é‡å®šä¹‰æ—¶ä½¿ç”¨äº†staticï¼Œä½†æ˜¯æ²¡æœ‰ä½¿ç”¨å†å²å€¼ï¼ŒçŒœæµ‹æ˜¯æƒ³ä¸ºäº†é¿å…é¢‘ç¹æ„é€ ææ„è¯¥å˜é‡ã€‚ä½†æ˜¯C++ä¸­ç±»ä¸­å‡ºç°çš„staticå˜é‡ï¼Œä¸ç®¡æ˜¯ç±»æˆå‘˜å˜é‡è¿˜æ˜¯å‡½æ•°å±€éƒ¨å˜é‡ï¼Œæ˜¯ç‹¬ç«‹äºç±»å®ä¾‹çš„ï¼Œæ‰€æœ‰è¯¥ç±»çš„å®ä¾‹å…±äº«ä¸€ä»½staticå˜é‡ã€‚è¿™å°±å¾ˆæ¸…æ¥šäº†ï¼Œå¤šçº¿ç¨‹è°ƒç”¨æ—¶ï¼Œè¿™äº›çº¿ç¨‹å…±äº«äº†è¿™ä¸€ä¸ªå˜é‡ï¼ŒåŒæ—¶è¯»å†™æ—¶å‡ºç°è¸©å†…å­˜é—®é¢˜ã€‚</p><p>å›åˆ°å±€éƒ¨å˜é‡ä½¿ç”¨staticä¸Šï¼Œåœ¨é¢å‘è¿‡ç¨‹å®ç°ä¸­ï¼Œstaitcå±€éƒ¨å˜é‡å¯ä»¥ä¿è¯è¯¥å˜é‡çš„ä½œç”¨åŸŸåªåœ¨å‡½æ•°å†…ï¼Œé¿å…ä½¿ç”¨å…¨å±€å˜é‡é€ æˆå…¨å±€å¯è§ï¼Œèµ·åˆ°å¾ˆå¥½çš„å°è£…ä½œç”¨ã€‚ä½†æ˜¯åœ¨é¢å‘å¯¹è±¡å®ç°ä¸­ï¼Œè¿™ç§éšè—åœ¨å±‚å±‚é€»è¾‘ä¸‹çš„staticå±€éƒ¨å˜é‡æ˜¯æœ‰å¾ˆå¤§çš„éšæ‚£çš„ï¼Œå› ä¸ºå®ƒä¸æ˜¯ç±»çš„æˆå‘˜å˜é‡ï¼Œå´åˆæ‰€æœ‰å®ä¾‹å…±äº«ä¸€ä»½ã€‚å®šä¹‰æˆæ™®é€šç±»æˆå‘˜å˜é‡ä¸€æ ·å¯ä»¥é¿å…é¢‘ç¹æ„é€ ææ„ï¼Œä¸”é‡ç”¨è¯¥å˜é‡çš„å€¼ã€‚</p><p>é€šè¿‡ä»¥ä¸Šä¿®æ”¹ï¼Œç»ˆäºè°ƒé€šäº†å¹¶è¡ŒåŒ–~</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æœ€è¿‘ä¸šåŠ¡æ–°ç‰¹æ€§å¼€å‘ï¼Œç”±åŸæ¥çš„å•ä¸ªactionå˜æˆäº†å¤šä¸ªactionï¼Œæœ€åå–ä¸€ä¸ªæœ€ä¼˜actionã€‚ç”±äºactionå˜å¤šï¼Œè¿è¡Œæ—¶é—´ä¹Ÿç›¸åº”å¤šäº†å‡ å€ï¼Œactionä¹‹é—´æ˜¯ç›¸äº’ç‹¬ç«‹ï¼Œäº’ä¸å½±å“çš„ï¼Œé‚£ä¹ˆå°±æƒ³é€šè¿‡å¹¶è¡ŒåŒ–çš„æ–¹æ³•æå‡ä¸‹æ€§èƒ½ï¼Œè¿™ä¸ªæ—¶å€™è‡ªç„¶è€Œç„¶å°±æƒ³åˆ°äº†çº¿ç¨‹æ± ã€‚æœ¬æ–‡è®°å½•ä¸€ä¸‹æ­¤æ¬¡å¹¶è¡ŒåŒ–é‡</summary>
      
    
    
    
    <category term="æŠ€æœ¯ç§¯ç´¯" scheme="http://blog.cuicc.com/categories/%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/"/>
    
    
    <category term="C/C++" scheme="http://blog.cuicc.com/tags/C-C/"/>
    
  </entry>
  
  <entry>
    <title>æ¢å¤Hexoåšå®¢ç¯å¢ƒ</title>
    <link href="http://blog.cuicc.com/blog/2021/11/30/recover-environment-for-writing/"/>
    <id>http://blog.cuicc.com/blog/2021/11/30/recover-environment-for-writing/</id>
    <published>2021-11-30T12:31:47.000Z</published>
    <updated>2025-03-16T07:58:25.520Z</updated>
    
    <content type="html"><![CDATA[<p>åšå®¢è’åºŸäº†å¥½äº›å¹´äº†ï¼Œè¿™æ®µæ—¶é—´è§‰å¾—æ²¡æœ‰å¤§çš„ã€å¥½çš„ä¸»é¢˜å¯ä»¥å†™ï¼Œå°±ä¸€ç›´å¤„äºæ–­æ›´çŠ¶æ€ã€‚æœ€è¿‘å‘ç°å°±å½“ç¬”è®°è®°å½•ä¸€äº›ä¸œè¥¿å¤‡æŸ¥ä¹Ÿæ˜¯æŒºå¥½ï¼Œå¦‚æœå†æ¬¡è¿‡ç¨‹ä¸­è¿˜èƒ½å¯¹ä»–äººæœ‰ä¸€ç‚¹å¸®åŠ©ï¼Œé‚£å°±æ›´å¥½äº†ã€‚æ˜¯æ—¶å€™æ¡èµ·æ¥ç»§ç»­äº†ï¼Œé¦–å…ˆè¦æ¢å¤å‡ºæœ¬åœ°çš„å†™ä½œåŠéƒ¨ç½²ç¯å¢ƒï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ä»¥å¤‡ä¸‹æ¬¡ä½¿ç”¨â€¦</p><h2 id="WSLç¯å¢ƒ"><a class="header-anchor" href="#WSLç¯å¢ƒ"></a>WSLç¯å¢ƒ</h2><p>å¦‚æœç›´æ¥ä½¿ç”¨Windowsæˆ–Macç­‰åŸç”Ÿç³»ç»Ÿï¼Œå¯ä»¥è·³è¿‡æ­¤æ­¥ã€‚ä»Windowsæ”¯æŒLinuxç¯å¢ƒåï¼Œä¸ªäººä¹ æƒ¯ç”¨<code>WSL</code>ï¼Œå³ä¿ç•™Windowsæ¡Œé¢çš„ä¾¿æ·æ€§ï¼Œåˆèƒ½å…¼é¡¾Linuxé«˜æ•ˆçš„å‘½ä»¤æ“ä½œã€‚<br>å®‰è£…æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>æ‰“å¼€â€œå¯ç”¨æˆ–å…³é—­WindowsåŠŸèƒ½â€ï¼Œå‹¾é€‰â€œé€‚ç”¨äºLinuxçš„Windowså­ç³»ç»Ÿâ€ã€‚</li><li>ä»Microsoft Storeä¸­æœç´¢ä½ å–œæ¬¢çš„Linuxç‰ˆæœ¬ï¼Œæ¯”å¦‚Ubuntuï¼Œç„¶åå®‰è£…ã€‚</li></ol><p>å®‰è£…å®Œæˆåï¼Œå®‰è£…powerlineå­—ä½“ï¼Œå‚è€ƒ<a href="https://github.com/powerline/fonts">å®˜æ–¹æŒ‡å—</a>ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯å› ä¸ºä½¿ç”¨çš„terminalæ˜¯Windowsçš„ï¼Œæ‰€ä»¥è¦åœ¨Windowsä¸­å®‰è£…ï¼Œç„¶ååœ¨terminalçš„å­—ä½“è®¾ç½®ä¸­é€‰æ‹©powerlineç›¸å…³å­—ä½“ã€‚</p><p>ä¸ªäººæ¯”è¾ƒå–œæ¬¢ç”¨<code>oh-my-zsh</code>ï¼Œå®‰è£…å®Œæˆåä¿®æ”¹ä¸»é¢˜ä¸º<code>ZSH_THEME=&quot;agnoster&quot;</code>ã€‚enjoy it~</p><h2 id="Hexoç¯å¢ƒ"><a class="header-anchor" href="#Hexoç¯å¢ƒ"></a>Hexoç¯å¢ƒ</h2><p>è¿™ä¸€æ­¥æ²¡ä»€ä¹ˆèŠ±å¤´ï¼Œç›´æ¥å‚ç…§<a href="https://hexo.io/zh-cn/docs/">å®˜æ–¹æŒ‡å—</a>å®‰è£…Node.jså’ŒGitï¼Œç„¶åé€šè¿‡npmå®‰è£…Hexoå³å¯ã€‚</p><h2 id="é…ç½®Hexoå·¥ç¨‹"><a class="header-anchor" href="#é…ç½®Hexoå·¥ç¨‹"></a>é…ç½®Hexoå·¥ç¨‹</h2><p>å¦‚æœæœ¬åœ°æ²¡æœ‰å­˜å‚¨Sourceå¤‡ä»½ï¼Œéœ€è¦ä»Githubç«¯cloneä¸€ä»½</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -b &lt;Sourceåˆ†æ”¯å&gt; https://github.com/&lt;ç”¨æˆ·å&gt;/&lt;Gitåº“å&gt;.git</span><br></pre></td></tr></table></figure><p>å…¶ä¸‹æ“ä½œæ­¥éª¤ä¸€æ ·ï¼Œè¿›å…¥Gitä»“åº“ç›®å½•ï¼Œæ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure><p>ç”±äºä¹‹å‰çš„package.jsonæ¯”è¾ƒè€ï¼Œæ‰§è¡Œinstallä¹‹åæŠ¥äº†ä¸€å †npmçš„é”™è¯¯ï¼Œå½¢å¦‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">found XXX vulnerabilities (XXX low, XXX moderate, XXX high)</span><br><span class="line">run `npm audit fix` to fix them</span><br><span class="line">......</span><br></pre></td></tr></table></figure><p>åœ¨æ‰§è¡Œ<code>npm audit fix</code>æˆ–<code>npm audit fix --force</code>åä¾ç„¶æ— æ³•è§£å†³è¿™ä¸ªæŠ¥é”™ã€‚è¿™æ˜¯å› ä¸ºè¯¥å·¥ç¨‹é…ç½®çš„ä¾èµ–åŒ…ç‰ˆæœ¬å¤ªè€äº†ï¼Œnpmæ£€æŸ¥åè®¤ä¸ºè¿™äº›åŒ…å­˜åœ¨å®‰å…¨éšæ‚£ã€‚æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚</p><h3 id="Hexoå‡çº§"><a class="header-anchor" href="#Hexoå‡çº§"></a>Hexoå‡çº§</h3><p>ç”±äºpackage.jsoné‡Œé…ç½®äº†é»˜è®¤ç‰ˆæœ¬ï¼Œæ‰€ä»¥é¦–å…ˆè¦æ£€æŸ¥æ˜¯å¦æœ‰æ–°ç‰ˆæœ¬ï¼Œç„¶åæ›´æ–°jsonï¼Œå‘½ä»¤å¦‚ä¸‹</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…npm-checkç”¨æ¥æ£€æŸ¥æ˜¯å¦éœ€è¦å‡çº§æ’ä»¶</span></span><br><span class="line"><span class="built_in">sudo</span> npm install -g npm-check</span><br><span class="line">npm-check</span><br><span class="line"><span class="comment"># å®‰è£…npm-upgradeç”¨æ¥æ›´æ–°json</span></span><br><span class="line"><span class="built_in">sudo</span> npm install -g npm-upgrade</span><br><span class="line">npm-upgrade</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ–°å…¨å±€æ’ä»¶</span></span><br><span class="line"><span class="built_in">sudo</span> npm update -g</span><br><span class="line"><span class="comment"># æ›´æ–°æœ¬å·¥ç¨‹æ’ä»¶</span></span><br><span class="line">npm update --save</span><br></pre></td></tr></table></figure><p>æ›´æ–°å®Œæˆåï¼Œå¯ä»¥ç”¨<code>hexo version</code>æŸ¥çœ‹hexoåŠå…¶ä¾èµ–æ’ä»¶ç‰ˆæœ¬ã€‚</p><h3 id="å…¶ä»–å‘Šè­¦"><a class="header-anchor" href="#å…¶ä»–å‘Šè­¦"></a>å…¶ä»–å‘Šè­¦</h3><ol><li>å®‰è£…åˆ°æœ€æ–°ç‰ˆåï¼Œå‘ç°æœ‰æŠ¥configå‚æ•°deprecatedï¼Œå¯ä»¥ç›´æ¥æœç´¢ç›¸å…³å‚æ•°çœ‹å®˜æ–¹æ–‡æ¡£è§£å†³ã€‚<br>å¦‚å®‰è£…5.0åé‡åˆ°<code>external_link</code>å‚æ•°é—®é¢˜</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">INFO  Validating config</span><br><span class="line">WARN  Deprecated config detected: &quot;external_link&quot; with a Boolean value is deprecated. ...</span><br><span class="line"></span><br><span class="line"># æ–°æ ¼å¼å¦‚ä¸‹</span><br><span class="line">external_link:</span><br><span class="line">    enable: true|false</span><br></pre></td></tr></table></figure><ol start="2"><li>æ‰§è¡Œ<code>hexo s</code>åï¼Œæœ‰æŠ¥å¾ªç¯ä¾èµ–çš„å‘Šè­¦ï¼Œå¦‚ä¸‹</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(node:9508) Warning: Accessing non-existent property &#x27;lineno&#x27; of module exports inside circular dependency</span><br><span class="line">(Use `node --trace-warnings ...` to show where the warning was created)</span><br><span class="line">(node:9508) Warning: Accessing non-existent property &#x27;column&#x27; of module exports inside circular dependency</span><br><span class="line">(node:9508) Warning: Accessing non-existent property &#x27;filename&#x27; of module exports inside circular dependency</span><br><span class="line">(node:9508) Warning: Accessing non-existent property &#x27;lineno&#x27; of module exports inside circular dependency</span><br><span class="line">(node:9508) Warning: Accessing non-existent property &#x27;column&#x27; of module exports inside circular dependency</span><br><span class="line">(node:9508) Warning: Accessing non-existent property &#x27;filename&#x27; of module exports inside circular dependency</span><br></pre></td></tr></table></figure><p>æœç´¢å‘ç°æ˜¯ä¾èµ–çš„æŸä¸ªæ’ä»¶å¯¼è‡´ï¼Œä¸è§£å†³ä¹Ÿä¸å½±å“ä½¿ç”¨ï¼Œæš‚æ—¶æ²¡ç®¡ã€‚ç›¸å…³<a href="https://www.haoyizebo.com/posts/710984d0/">è§£å†³é“¾æ¥</a></p><p>æ¥ä¸‹æ¥ï¼Œå°±å¯ä»¥<code>hexo new</code>ç»§ç»­å†™ä½œä¹‹æ—…äº†~</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;åšå®¢è’åºŸäº†å¥½äº›å¹´äº†ï¼Œè¿™æ®µæ—¶é—´è§‰å¾—æ²¡æœ‰å¤§çš„ã€å¥½çš„ä¸»é¢˜å¯ä»¥å†™ï¼Œå°±ä¸€ç›´å¤„äºæ–­æ›´çŠ¶æ€ã€‚æœ€è¿‘å‘ç°å°±å½“ç¬”è®°è®°å½•ä¸€äº›ä¸œè¥¿å¤‡æŸ¥ä¹Ÿæ˜¯æŒºå¥½ï¼Œå¦‚æœå†æ¬¡è¿‡ç¨‹ä¸­è¿˜èƒ½å¯¹ä»–äººæœ‰ä¸€ç‚¹å¸®åŠ©ï¼Œé‚£å°±æ›´å¥½äº†ã€‚æ˜¯æ—¶å€™æ¡èµ·æ¥ç»§ç»­äº†ï¼Œé¦–å…ˆè¦æ¢å¤å‡ºæœ¬åœ°çš„å†™ä½œåŠéƒ¨ç½²ç¯å¢ƒï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ä»¥å¤‡ä¸‹æ¬¡ä½¿ç”¨â€¦&lt;/p&gt;
&lt;h2 id=&quot;</summary>
      
    
    
    
    <category term="æŠ€æœ¯ç§¯ç´¯" scheme="http://blog.cuicc.com/categories/%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/"/>
    
    
    <category term="hexo" scheme="http://blog.cuicc.com/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>æˆ‘çš„2017ä¸ªäººæ€»ç»“</title>
    <link href="http://blog.cuicc.com/blog/2017/12/31/my-personal-review-2017/"/>
    <id>http://blog.cuicc.com/blog/2017/12/31/my-personal-review-2017/</id>
    <published>2017-12-31T07:19:25.000Z</published>
    <updated>2025-08-23T12:03:15.604Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ç‡•å­å»äº†ï¼Œæœ‰å†ä¾†çš„æ™‚å€™ï¼›æ¥ŠæŸ³æ¯äº†ï¼Œæœ‰å†é’çš„æ™‚å€™ï¼›æ¡ƒèŠ±è¬äº†ï¼Œæœ‰å†é–‹çš„æ™‚å€™ã€‚ä½†æ˜¯ï¼Œè°æ˜çš„ï¼Œä½ å‘Šè¨´æˆ‘ï¼Œæˆ‘å€‘çš„æ—¥å­ç‚ºä»€éº¼ä¸€å»ä¸å¾©è¿”å‘¢ï¼Ÿâ”€â”€æ˜¯æœ‰äººå·äº†ä»–å€‘ç½·ï¼šé‚£æ˜¯èª°ï¼Ÿåˆè—åœ¨ä½•è™•å‘¢ï¼Ÿæ˜¯ä»–å€‘è‡ªå·±é€ƒèµ°äº†ç½·ï¼šç¾åœ¨åˆåˆ°äº†é‚£è£¡å‘¢ï¼Ÿ</p><footer><strong>æœ±è‡ªæ¸…</strong><cite><a href="https://zh.wikisource.org/wiki/%E5%8C%86%E5%8C%86">åŒ†åŒ†</a></cite></footer></blockquote><p>æ¯å¹´è¿™ä¸ªæ—¶å€™æ€»ç»“ä¸€ä¸‹ï¼Œçœ‹çœ‹<a href="/blog/2017/01/02/my-personal-review-2016/" title="æˆ‘çš„2016ä¸ªäººæ€»ç»“">å»å¹´çš„ç›®æ ‡</a>å®ç°çš„æ€ä¹ˆæ ·ï¼Œä»Šå¹´æœ‰å“ªäº›è®¡åˆ’ã€‚</p><p>2017å¹´æœ€å¤§çš„æ”¶è·æ˜¯å°å¥³çš„é™ä¸´ï¼Œå¸¦ç»™æˆ‘ä»¬å¤ªå¤šçš„æƒŠå–œï¼Œå¤ªå¤šçš„æ¬¢ä¹ï¼Œæ›´æƒŠå¹ç”Ÿå‘½çš„ç¥å¥‡ã€‚ä»ä¸€äº‹æ— çŸ¥çš„å°å©´å„¿ï¼Œåˆ°ç¬¬ä¸€æ¬¡å‘éŸ³ï¼ˆå“­å£°ä¹‹å¤–ï¼‰ï¼Œç¬¬ä¸€æ¬¡æŠ“å¤´å‘ï¼Œç¬¬ä¸€æ¬¡åæ³¡æ³¡ï¼Œç¬¬ä¸€æ¬¡æŠ¬å¤´ï¼Œç¬¬ä¸€æ¬¡ç¿»èº«ï¼Œç¬¬ä¸€æ¬¡çˆ¬ï¼Œé•¿å‡ºç¬¬ä¸€é¢—ç‰™ï¼Œè®¤è¯†çˆ¸çˆ¸å¦ˆå¦ˆï¼Œå¬æ‡‚çˆ¸çˆ¸å¦ˆå¦ˆè¯´è¯ï¼Œæ…¢æ…¢å­¦èµ°è·¯â€¦ å¤ªå¤šçš„æƒŠå¥‡ã€‚2018å¹´è®©æˆ‘ä»¬æ¢ç´¢æ›´å¤šçš„æƒŠå¥‡ã€‚</p><p>2017å¹´æœ€å¤§çš„å˜åŒ–æ˜¯ç”±äºŒäººä¸–ç•Œå˜æˆäº†ä¸‰å£ä¹‹å®¶ã€‚ä»¥å‰çš„éšæ€§è€Œä¸ºï¼Œç°åœ¨çš„ä¸‰æ€è€Œä¸è¡Œï¼Œåœ¨å°å®å®èº«ä¸Šä»¥åŠå®¶åº­çäº‹ä¸Šå€¾æ³¨äº†å‡ ä¹æ‰€æœ‰çš„æ—¶é—´ä¸ç²¾åŠ›ã€‚2018å¹´å¸Œæœ›èƒ½æ‰¾åˆ°ä¸€å®šçš„å¹³è¡¡ï¼Œå¯¹å®å®æœ‰é«˜è´¨é‡çš„é™ªä¼´ï¼ŒåŒæ—¶ä¹Ÿæœ‰è‡ªå·±çš„æ—¶é—´ï¼ŒäºŒäººä¸–ç•Œçš„æ—¶é—´ã€‚</p><p>2017å¹´æœ€å¤§çš„æ¬ ç¼ºæ˜¯æ²¡æœ‰å­¦å¥½å…»å¨ƒè¿™é—¨å­¦é—®ã€‚å…»å¨ƒè¿œæ²¡æœ‰å–‚é¥±ï¼Œç©¿æš–ï¼Œé€—ä¹è¿™ä¹ˆç®€å•ã€‚ä»¥å®å®å®å®ç¡çœ ä¸ºä¾‹ï¼Œä¸ºä»€ä¹ˆæ™šä¸Šæ˜“é†’ï¼Œé†’æ¥æ˜“å“­ï¼Œæ˜¯é¥¿äº†å—ï¼Œæ˜¯ä¸å›°å—ï¼Œä»€ä¹ˆæ˜¯ç¡çœ è®­ç»ƒï¼Œæ€ä¹ˆè®­ç»ƒç­‰ç­‰ã€‚2018å¹´å¸Œæœ›èƒ½åœ¨è¯»ä¹¦è®¡åˆ’é‡ŒåŠ å…¥è‚²å„¿ç±»ä¹¦ç±ï¼Œæ‰“å¥½ç†è®ºåŸºç¡€ï¼Œæ‡‚å¾—å®å®å„é˜¶æ®µçš„å¿ƒç†çŠ¶æ€ï¼Œåº”å¯¹æ–¹æ³•ã€‚</p><p>2017å¹´æœ€å¤§çš„æ— å¥ˆæ˜¯å·¥ä½œè¢«å˜åŠ¨ã€‚ç”±åŸæ¥çš„æ¥è§¦å„ç§æ–°æŠ€æœ¯ï¼Œå¹¿è€Œä¸æ·±çš„æŠ€æœ¯å¼€å‘åˆ°æŠ€æœ¯å•ä¸€ï¼Œæ·±è€Œä¸å¹¿çš„äº§å“å¼€å‘ã€‚æ— å¥ˆçš„åœ°æ–¹åœ¨äºæ— ä¼‘æ­¢çš„åŠ ç­ï¼Œè¶Šåšè¶Šçª„çš„å·¥ä½œå†…å®¹è€Œåˆæš‚æ—¶æ— æ³•é€ƒç¦»ã€‚2018å¹´å¸Œæœ›åœ¨åšä¸å®Œçš„å·¥ä½œä¸­èƒ½æ‰©å……è‡ªå·±çš„æŠ€èƒ½ï¼Œç»§ç»­ä¿æŒå¯¹è¡Œä¸šã€ç§‘æŠ€ã€äº§å“ã€è¶‹åŠ¿ã€æ¨¡å¼çš„å¥½å¥‡å¿ƒã€‚</p><p>2017å¹´æœ€å¤§çš„åšæŒæ˜¯å¥èº«ä¸è¯»ä¹¦ã€‚ä»å®¶é‡Œå¾’æ‰‹åŠ å“‘é“ƒï¼Œåˆ°å…¬å¸å¥èº«æˆ¿å™¨æ¢°ï¼Œè™½ç„¶ä¸€ç›´è€¿è€¿äºæ€€çš„ä½“é‡æ²¡æœ‰ä¸Šå»ï¼Œä½†èº«ä½“æ›´å¥½äº†ï¼Œç²¾ç¥çŠ¶æ€æ›´å¥½äº†ã€‚ä¸ŠåŠå¹´è¯»äº†ä¸å°‘ä¹¦ï¼Œæœ‰ç®¡ç†ã€æœ‰æ•£æ–‡ã€æœ‰å°è¯´ã€æœ‰å†å²ã€æœ‰ä¼ è®°ï¼Œä¸‹åŠå¹´å› ä¸ºå·¥ä½œå¤ªç´¯çš„åŸå› ï¼Œå‡ ä¹æ²¡è¯»ã€‚2018å¹´å¸Œæœ›ç»§ç»­åšæŒé”»ç‚¼èº«ä½“ï¼Œä»¥å¢è‚Œä¸ºç›®æ ‡ï¼›å¸Œæœ›ç»§ç»­åšæŒè¯»ä¹¦ï¼Œåˆ©ç”¨å¥½ä¸Šä¸‹ç­çš„é€šå‹¤æ—¶é—´ï¼Œå¢åŠ ä¸“ä¸šä¹¦ç±çš„é˜…è¯»é‡ã€‚</p><p>2018å¹´çš„ç›®æ ‡ï¼š</p><ol><li>æœ‰ç©ºå¤šé™ªä¼´å®å®ï¼Œè§£æ”¾å®å¦ˆï¼Œè®©å®å¦ˆæœ‰æ›´å¤šçš„æ—¶é—´åšè‡ªå·±çš„äº‹æƒ…ï¼›è‚²å„¿ç†è®ºåŸºç¡€å¢å¼ºï¼Œä»å„ç§è‚²å„¿ä¹¦ï¼Œå¿ƒç†å­¦ç­‰å¼€å§‹ã€‚</li><li>â€èº«ä½“ä¸çµé­‚ï¼Œç»§ç»­åœ¨è·¯ä¸Šã€‚åšæŒå¥èº«ï¼Œç›®æ ‡å¢è‚Œå¢é‡ã€‚åšæŒè¯»ä¹¦ï¼Œå„ç§æœ‰è¶£çš„ä¹¦ï¼Œèƒ½å†™å†™è¯»ä¹¦ç¬”è®°ã€‚</li><li>â€æ¢ç´¢å·¥ä½œçš„å¤šç§å¯èƒ½ï¼ŒåšæŒå„ç§åšå®¢æ‚æ–‡çš„ç§¯ç´¯ä¸‹ï¼Œå¤šè¯»å‡ æœ¬æŠ€æœ¯ä¸“ä¸šä¹¦ç±ï¼Œæé«˜ç»¼åˆçŸ¥è¯†é¢ã€‚</li><li>â€èƒ½è§„åˆ’ä¸€æ¬¡é•¿é€”æ—…è¡Œï¼Œå»çœ‹çœ‹é£æ™¯ï¼Œçœ‹çœ‹äººæ–‡ï¼Œçœ‹çœ‹ä¸–ç•Œã€‚</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;&lt;p&gt;ç‡•å­å»äº†ï¼Œæœ‰å†ä¾†çš„æ™‚å€™ï¼›æ¥ŠæŸ³æ¯äº†ï¼Œæœ‰å†é’çš„æ™‚å€™ï¼›æ¡ƒèŠ±è¬äº†ï¼Œæœ‰å†é–‹çš„æ™‚å€™ã€‚ä½†æ˜¯ï¼Œè°æ˜çš„ï¼Œä½ å‘Šè¨´æˆ‘ï¼Œæˆ‘å€‘çš„æ—¥å­ç‚ºä»€éº¼ä¸€å»ä¸å¾©è¿”å‘¢ï¼Ÿâ”€â”€æ˜¯æœ‰äººå·äº†ä»–å€‘ç½·ï¼šé‚£æ˜¯èª°ï¼Ÿåˆè—åœ¨ä½•è™•å‘¢ï¼Ÿæ˜¯ä»–å€‘è‡ªå·±é€ƒèµ°äº†ç½·ï¼šç¾åœ¨åˆåˆ°äº†é‚£è£¡å‘¢ï¼Ÿ&lt;/p&gt;
&lt;footer&gt;&lt;strong&gt;</summary>
      
    
    
    
    <category term="ç”Ÿæ´»è®°å½•" scheme="http://blog.cuicc.com/categories/%E7%94%9F%E6%B4%BB%E8%AE%B0%E5%BD%95/"/>
    
    
    <category term="æ€»ç»“" scheme="http://blog.cuicc.com/tags/%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>kubernetesä¹‹å¤šç½‘ç»œç­–ç•¥</title>
    <link href="http://blog.cuicc.com/blog/2017/09/10/kubernetes-network-policy/"/>
    <id>http://blog.cuicc.com/blog/2017/09/10/kubernetes-network-policy/</id>
    <published>2017-09-10T04:28:33.000Z</published>
    <updated>2025-03-16T07:58:25.515Z</updated>
    
    <content type="html"><![CDATA[<p>ç½‘ç»œç­–ç•¥(<code>Network Policy</code>)æ˜¯<code>Kubernetes</code>æä¾›çš„ä¸€ç§è§„èŒƒï¼Œå®ƒæè¿°äº†ä¸€ç»„<code>Pod</code>æ˜¯å¦‚ä½•è¢«å…è®¸ç›¸äº’é€šä¿¡çš„ï¼Œä»¥åŠå’Œå…¶ä»–ç«¯ç‚¹æ˜¯å¦‚ä½•é€šä¿¡çš„ã€‚<code>Kubernetes</code>åªæä¾›äº†è¿™æ ·çš„æœºåˆ¶ï¼Œå…·ä½“åŠŸèƒ½ç”±ç½‘ç»œæ’ä»¶(<code>Network Plugins</code>)å®ç°ï¼Œæµè¡Œçš„ç½‘ç»œæ’ä»¶æœ‰å¾ˆå¤šï¼Œä½†å¹¶ä¸æ˜¯æ‰€æœ‰çš„ç½‘ç»œæ’ä»¶éƒ½æä¾›äº†ç½‘ç»œç­–ç•¥åŠŸèƒ½ï¼Œå¦‚<code>flannel</code>å°±æ²¡æœ‰æä¾›è¿™æ ·çš„åŠŸèƒ½ï¼Œç›®å‰å·²çŸ¥çš„æ”¯æŒç½‘ç»œç­–ç•¥çš„æœ‰<code>Calico</code>, <code>Cilium</code>, <code>Kube-router</code>, <code>Romana</code>, <code>Weave Net</code>, <code>Canal</code>ã€‚</p><p>ç½‘ç»œç­–ç•¥çš„åº”ç”¨å’Œ<code>Kubernetes</code>ä¸­å¾ˆå¤šæ“ä½œç±»ä¼¼ï¼Œæ˜¯é€šè¿‡<code>labels</code>æ¥é€‰å–ä¸€ç»„<code>Pods</code>çš„ï¼Œç„¶åå†é…ç½®å…·ä½“çš„è§„åˆ™(ç›®å‰çš„å®ç°éƒ½æ˜¯é€šè¿‡é…ç½®<code>iptables rule</code>)æ¥æ§åˆ¶ä»€ä¹ˆæµé‡è¢«å…è®¸å‘é€åˆ°è¿™ç»„é€‰å–çš„<code>Pods</code>ã€‚</p><p><em>æ³¨:</em> ç¬”è€…ä½¿ç”¨çš„<strong>Kubernetes 1.6</strong>ç‰ˆæœ¬ä¸­ç½‘ç»œç­–ç•¥è¿˜å¤„äº<code>beta</code>çŠ¶æ€ï¼Œå…¶é…ç½®å’Œ<strong>Kubernetes 1.7</strong>ä¸­ç½‘ç»œç­–ç•¥æ­£å¼ç‰ˆç•¥æœ‰å·®å¼‚ã€‚è¿™é‡Œç•¥ä½œæ‰¹æ³¨ã€‚</p><h2 id="ç½‘ç»œç­–ç•¥"><a class="header-anchor" href="#ç½‘ç»œç­–ç•¥"></a>ç½‘ç»œç­–ç•¥</h2><p>ä½¿ç”¨ç½‘ç»œç­–ç•¥çš„ä¸€èˆ¬æ­¥éª¤å¦‚ä¸‹(ä»¥<code>Calico</code>ä¸ºä¾‹):</p><h3 id="é…ç½®ç½‘ç»œç­–ç•¥"><a class="header-anchor" href="#é…ç½®ç½‘ç»œç­–ç•¥"></a>é…ç½®ç½‘ç»œç­–ç•¥</h3><ol><li>ä¿®æ”¹<code>kube-apiserver</code>çš„é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ é…ç½®é¡¹<code>--runtime-config=extensions/v1beta1/networkpolicies=true</code>ï¼Œè¡¨ç¤ºå¯ç”¨ç½‘ç»œç­–ç•¥(<strong>Kubernetes 1.6</strong>ç‰ˆæœ¬ä¸­)</li><li>ä¿®æ”¹<code>kubelet</code>çš„é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ é…ç½®é¡¹<code>--network-plugin=cni</code>ï¼Œè¡¨ç¤ºä½¿ç”¨CNIç½‘ç»œæ’ä»¶</li><li>æ ¹æ®<code>calico</code>ç›¸åº”ç‰ˆæœ¬çš„<a href="https://docs.projectcalico.org/v2.5/getting-started/kubernetes/installation/">å®‰è£…æ–‡æ¡£</a>ï¼Œå®‰è£…<code>calico</code>æ’ä»¶ï¼Œ<strong>Calico Kubernetes Hosted Install</strong>æ–¹å¼æ¯”è¾ƒç®€å•ã€‚</li></ol><h3 id="ä½¿ç”¨ç½‘ç»œç­–ç•¥"><a class="header-anchor" href="#ä½¿ç”¨ç½‘ç»œç­–ç•¥"></a>ä½¿ç”¨ç½‘ç»œç­–ç•¥</h3><p><code>kubernetes</code>å®˜æ–¹æ–‡æ¡£æœ‰<a href="https://kubernetes.io/docs/concepts/services-networking/network-policies/">è¯¦ç»†çš„è¯´æ˜</a>ï¼Œè¿™é‡Œç®€è¦åˆ—ä¸€ä¸‹å‡ ä¸ªå…³é”®é…ç½®ã€‚</p><ol><li><p>é»˜è®¤é…ç½®ä¸‹ï¼Œ<code>Pods</code>æ˜¯ä¸åšéš”ç¦»çš„ï¼Œå³é›†ç¾¤å†…æ‰€æœ‰<code>Pod</code>ä¹‹é—´éƒ½æ˜¯äº’é€šçš„ã€‚<br>a. <strong>Kubernetes 1.6</strong>ç‰ˆæœ¬ä¸­åœ¨ä½¿ç”¨ç½‘ç»œç­–ç•¥ä¹‹å‰ï¼Œéœ€è¦å…ˆé…ç½®<code>namespace</code>ä¸ºé»˜è®¤éš”ç¦»ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;metadata&quot;: &#123;</span><br><span class="line">        &quot;name&quot;: &quot;mynamespace&quot;,</span><br><span class="line">        &quot;labels&quot;: &#123;</span><br><span class="line">            &quot;name&quot;: &quot;mynamespace&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;annotations&quot;: &#123;</span><br><span class="line">            &quot;net.beta.kubernetes.io/network-policy&quot;: &quot;&#123;\&quot;ingress\&quot;: &#123;\&quot;isolation\&quot;: \&quot;DefaultDeny\&quot;&#125;&#125;&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œè¯¥<code>namespace</code>ä¸‹çš„æ‰€æœ‰<code>Pod</code>éƒ½æ˜¯éš”ç¦»çŠ¶æ€çš„ï¼Œä¸æ¥æ”¶ä»»ä½•æ¥æºçš„æµé‡ã€‚</p><p>b. <strong>Kubernetes 1.7</strong>ç‰ˆæœ¬ä¸­ç›´æ¥é€šè¿‡ç½‘ç»œç­–ç•¥é…ç½®ï¼Œå³é…ç½®ç½‘ç»œç­–ç•¥çš„åº”ç”¨ç½‘ç»œç­–ç•¥è§„åˆ™ï¼Œæœªé…ç½®ç½‘ç»œç­–ç•¥çš„è¿˜æ˜¯æœªéš”ç¦»çŠ¶æ€ã€‚</p></li><li><p>ä½¿ç”¨æ ‡ç­¾é€‰æ‹©å™¨é…ç½®ä¸€ç»„<code>Pod</code>çš„ç½‘è·¯ç­–ç•¥ï¼Œå³æ¥æ”¶å“ªäº›æ¥æºçš„æµé‡ï¼Œ ç¤ºä¾‹å¦‚ä¸‹(<strong>Kubernetes 1.6</strong>ç‰ˆæœ¬<code>apiVersion</code>ä¸åŒ)ï¼Œè¯¥é…ç½®è¡¨ç¤ºï¼š</p><ul><li>åœ¨åä¸º<code>default</code>çš„å‘½åç©ºé—´ä¸­éš”ç¦»æ‰€æœ‰æ ‡ç­¾ä¸º<code>role=db</code>çš„<code>Pod</code>ï¼Œ å¦‚æœæ²¡æœ‰éš”ç¦»çš„è¯(<strong>Kubernetes 1.7</strong>ç‰ˆæœ¬)ã€‚</li><li>å…è®¸æ ‡ç­¾ä¸º<code>project=myproject</code>çš„å‘½åç©ºé—´ä¸­çš„æ‰€æœ‰<code>Pod</code>é€šè¿‡<code>TCP</code>è¿æ¥è¯¥<code>default</code>å‘½ä»¤ç©ºé—´é‡Œçš„æ ‡ç­¾ä¸º<code>role=db</code>çš„<code>Pod</code>çš„<code>6379</code>ç«¯å£ã€‚</li><li>å…è®¸æ ‡ç­¾ä¸º<code>role=frontend</code>çš„<code>defult</code>å‘½åç©ºé—´ä¸­çš„æ‰€æœ‰<code>Pod</code>é€šè¿‡<code>TCP</code>è¿æ¥è¯¥<code>default</code>å‘½ä»¤ç©ºé—´é‡Œçš„æ ‡ç­¾ä¸º<code>role=db</code>çš„<code>Pod</code>çš„<code>6379</code>ç«¯å£ã€‚</li></ul> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;apiVersion&quot;: &quot;networking.k8s.io/v1&quot;,</span><br><span class="line">&quot;kind&quot;: &quot;NetworkPolicy&quot;,</span><br><span class="line">&quot;metadata&quot;: &#123;</span><br><span class="line">    &quot;name&quot;: &quot;test-network-policy&quot;,</span><br><span class="line">    &quot;namespace&quot;: &quot;default&quot;</span><br><span class="line">&#125;,</span><br><span class="line">&quot;spec&quot;: &#123;</span><br><span class="line">    &quot;podSelector&quot;: &#123;</span><br><span class="line">    &quot;matchLabels&quot;: &#123;</span><br><span class="line">        &quot;role&quot;: &quot;db&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;ingress&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;from&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;namespaceSelector&quot;: &#123;</span><br><span class="line">            &quot;matchLabels&quot;: &#123;</span><br><span class="line">                &quot;project&quot;: &quot;myproject&quot;</span><br><span class="line">            &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;podSelector&quot;: &#123;</span><br><span class="line">            &quot;matchLabels&quot;: &#123;</span><br><span class="line">                &quot;role&quot;: &quot;frontend&quot;</span><br><span class="line">            &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ],</span><br><span class="line">        &quot;ports&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;protocol&quot;: &quot;TCP&quot;,</span><br><span class="line">            &quot;port&quot;: 6379</span><br><span class="line">        &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åŒæ ·çš„ï¼Œ<strong>Kubernetes 1.7</strong>ç‰ˆæœ¬ä¸­ï¼Œä¹Ÿæä¾›äº†é»˜è®¤ç­–ç•¥<br>a. é»˜è®¤å…¨éš”ç¦»ç­–ç•¥ï¼Œç±»ä¼¼äº<strong>Kubernetes 1.6</strong>ç‰ˆæœ¬å¯¹<code>namespace</code>çš„é…ç½®ï¼Œä½œç”¨çš„å‘½åç©ºé—´ä¸‹æ‰€æœ‰<code>Pod</code>åœ¨æœªåº”ç”¨å…¶ä»–ç½‘ç»œç­–ç•¥çš„æƒ…å†µä¸‹æ˜¯éš”ç¦»çŠ¶æ€ã€‚</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;apiVersion&quot;: &quot;networking.k8s.io/v1&quot;,</span><br><span class="line">    &quot;kind&quot;: &quot;NetworkPolicy&quot;,</span><br><span class="line">    &quot;metadata&quot;: &#123;</span><br><span class="line">        &quot;name&quot;: &quot;default-deny&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;spec&quot;: &#123;</span><br><span class="line">        &quot;podSelector&quot;: null</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>b. å…¨é€šç­–ç•¥ï¼Œä½œç”¨çš„å‘½åç©ºé—´ä¸‹æ‰€æœ‰<code>Pod</code>å¯æ¥æ”¶ä»»ä½•æµé‡ï¼Œæ— è§†å…¶ä¸Šé…ç½®çš„å…¶ä»–ç½‘ç»œç­–ç•¥ã€‚</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;apiVersion&quot;: &quot;networking.k8s.io/v1&quot;,</span><br><span class="line">    &quot;kind&quot;: &quot;NetworkPolicy&quot;,</span><br><span class="line">    &quot;metadata&quot;: &#123;</span><br><span class="line">        &quot;name&quot;: &quot;allow-all&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;spec&quot;: &#123;</span><br><span class="line">        &quot;podSelector&quot;: null,</span><br><span class="line">        &quot;ingress&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="å¤šç½‘ç»œç­–ç•¥"><a class="header-anchor" href="#å¤šç½‘ç»œç­–ç•¥"></a>å¤šç½‘ç»œç­–ç•¥</h2><p>åœ¨æ–‡ç« [kubernetesä¹‹å¤šç½‘ç»œæ”¯æŒ]ä¸­ï¼Œä»¥<code>flannel</code>ä¸ºä¾‹è®²è¿°äº†å¤šç½‘ç»œçš„é…ç½®æ–¹æ³•ã€‚ç”±äº<code>flannel</code>ä¸æ”¯æŒç½‘ç»œç­–ç•¥ï¼Œè¿™é‡Œä½¿ç”¨<a href="https://github.com/Huawei-PaaS/CNI-Genie">Huawei-PaaS/CNI-Genie</a>æ’ä»¶ä¸ºä¾‹ï¼Œ<code>CNI-Genie</code>ä¹Ÿæ˜¯é›†æˆå¼•å¯¼æ’ä»¶ï¼Œæœ¬èº«ä¸åšå…·ä½“åŠŸèƒ½ï¼Œç”±å¼•ç”¨çš„æ’ä»¶å®Œæˆç½‘ç»œåŠŸèƒ½ï¼Œå…¶æ”¯æŒ<code>Calico</code>, <code>Weave Net</code>, <code>Canal</code>, <code>Romana</code>ç­‰ã€‚</p><h3 id="é…ç½®å¤šæ’ä»¶"><a class="header-anchor" href="#é…ç½®å¤šæ’ä»¶"></a>é…ç½®å¤šæ’ä»¶</h3><p>åœ¨å‰è¿°é…ç½®ç½‘ç»œç­–ç•¥çš„åŸºç¡€ä¸Šï¼Œå†å®‰è£…<code>CNI-Genie</code>, <code>Weave Net</code>, <code>Canal</code>, <code>Romana</code>ç­‰æ’ä»¶ï¼Œä»¥ä¸Šæ’ä»¶å®˜æ–¹éƒ½æœ‰<code>Kubernetes Hosted Install</code>çš„å®‰è£…è„šæœ¬ï¼Œç›´æ¥ä¸‹è½½åº”ç”¨å³å¯ã€‚è¿™é‡Œ<code>CNI-Genie</code>çš„é…ç½®æ–‡ä»¶æ˜¯<code>00-**.conf</code>ï¼Œè€Œå…¶ä»–æ’ä»¶çš„é…ç½®æ–‡ä»¶æ˜¯<code>10-**.conf</code>ï¼Œæ‰€ä»¥æŒ‰ä¼˜å…ˆçº§é»˜è®¤åŠ è½½çš„æ’ä»¶æ˜¯<code>CNI-Genie</code>ã€‚</p><h3 id="ä½¿ç”¨å¤šç½‘ç»œ"><a class="header-anchor" href="#ä½¿ç”¨å¤šç½‘ç»œ"></a>ä½¿ç”¨å¤šç½‘ç»œ</h3><p><code>CNI-Genie</code>ä½¿ç”¨åŠ¨æ€é€‰æ‹©æ’ä»¶çš„ç­–ç•¥ï¼Œå³æ¯æ¬¡éƒ¨ç½²éƒ½å¯ä»¥æŒ‡å®šä¸åŒçš„æ’ä»¶ï¼Œé€šè¿‡<code>Kubernetes</code>çš„<code>annotations</code>å®ç°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">apiVersion: extensions/v1beta1</span><br><span class="line">kind: Deployment</span><br><span class="line">metadata:</span><br><span class="line">  name: mytest</span><br><span class="line">  namespace: mynamespace</span><br><span class="line">  labels:</span><br><span class="line">    name: mytest</span><br><span class="line">spec:</span><br><span class="line">  replicas: 2</span><br><span class="line">  template:</span><br><span class="line">    metadata:</span><br><span class="line">      name: mytest</span><br><span class="line">      namespace: mynamespace</span><br><span class="line">      labels:</span><br><span class="line">        name: mytest</span><br><span class="line">      annotations:</span><br><span class="line">        cni: &quot;calico,weave&quot;</span><br><span class="line">        multi-ip-preferences: |</span><br><span class="line">          &#123;</span><br><span class="line">            &quot;multi_entry&quot;: 0,</span><br><span class="line">            &quot;ips&quot;: &#123;</span><br><span class="line">              &quot;&quot;: &#123;</span><br><span class="line">                &quot;ip&quot;: &quot;&quot;,</span><br><span class="line">                &quot;interface&quot;: &quot;&quot;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">    spec:</span><br><span class="line">      containers:</span><br><span class="line">        - name: mytest</span><br><span class="line">          image: mytest:latest</span><br><span class="line">          imagePullPolicy: IfNotPresent</span><br><span class="line">          ports:</span><br><span class="line">            - containerPort: 21234</span><br></pre></td></tr></table></figure><p>è¿™é‡Œ<code>annotations</code>æ·»åŠ äº†ä¸¤ä¸ªå­—æ®µï¼Œ<code>cni</code>è¡¨ç¤ºè¯¥éƒ¨ç½²ä½¿ç”¨çš„ç½‘ç»œæ’ä»¶ï¼Œå¦‚è¿™é‡Œä½¿ç”¨çš„æ˜¯<code>Calico</code>å’Œ<code>Weave Net</code>ã€‚<code>multi-ip-preferences</code>å­—æ®µç”¨äºåå¡«ç½‘ç»œæ’ä»¶é…ç½®çš„ipåœ°å€å’Œç½‘ç»œç¼–å·ï¼Œä»¥<code>ip1</code>, <code>ip2</code>, â€¦ å‘½åã€‚</p><p><em>æ³¨</em>: <code>Calico</code>ç”±äºæœ¬èº«å®ç°çš„é—®é¢˜ï¼Œç¬”è€…åœ¨éªŒè¯æ—¶ä¸èƒ½ä½œä¸ºéç¬¬ä¸€ç½‘ç»œä½¿ç”¨ï¼Œå…·ä½“å‚çœ‹<a href="https://github.com/projectcalico/cni-plugin/issues/352">github issue</a></p><h3 id="å¤šç½‘ç»œç­–ç•¥-v2"><a class="header-anchor" href="#å¤šç½‘ç»œç­–ç•¥-v2"></a>å¤šç½‘ç»œç­–ç•¥</h3><p>ç½‘ç»œç­–ç•¥çš„å®ç°éƒ½æ˜¯ä»¥<code>Kubernetes</code>é‡Œçš„<code>PodIP</code>ä¸ºå…¥å‚æ–½åŠ ç½‘ç»œè§„åˆ™çš„ï¼Œä½†åœ¨å¤šç½‘ç»œé…ç½®ä¸‹åªæœ‰ç¬¬ä¸€ç½‘ç»œçš„ipè¢«ä¸ŠæŠ¥ç»™<code>Kubernetes</code>ï¼Œä½œä¸º<code>PodIP</code>ã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬æ— æ³•é€šè¿‡<code>Kubernetes</code>å­˜å‚¨çš„æ•°æ®è·å–åˆ°å¤šç½‘ç»œåœ°å€ã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨<code>multi-ip-preferences</code>å­—æ®µçš„å€¼æ¥æ»¡è¶³å®šåˆ¶åŒ–éœ€æ±‚ã€‚</p><p>ä»¥<code>Weave Net</code>ä¸ºä¾‹ï¼Œéœ€è¦å®šåˆ¶å…¶<code>npc</code>å®ç°ï¼Œæ‰€æœ‰è·å–<code>PodIP</code>çš„åœ°æ–¹æ›¿æ¢æˆå¦‚ä¸‹æ–¹å¼è·å–çš„ip(è·å–ç¬¬äºŒç½‘ç»œåœ°å€ï¼Œè¿™é‡Œç¤ºä¾‹ä¸å…·æœ‰çµæ´»æ€§ï¼Œå¯è€ƒè™‘åœ¨<code>multi-ip-preferences</code>æ·»åŠ ä¸€ä¸ªå­—æ®µè¡¨ç¤ºè¯¥ipå±äºå“ªä¸ªæ’ä»¶)ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">func getIPFromAnnotation(pod *coreapi.Pod) string &#123;</span><br><span class="line">var podIP2 string = &quot;&quot;</span><br><span class="line">var mip MultiIPPreferences</span><br><span class="line"></span><br><span class="line">mipJSON, found := pod.ObjectMeta.Annotations[&quot;multi-ip-preferences&quot;]</span><br><span class="line">if found &#123;</span><br><span class="line">if err := json.Unmarshal([]byte(mipJSON), &amp;mip); err == nil &#123;</span><br><span class="line">if value, ok := mip.Ips[&quot;ip2&quot;]; ok &#123;</span><br><span class="line">podIP2 = value</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">return podIP2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œæˆ‘ä»¬çš„å¤šç½‘ç»œé…ç½®ä¸‹ï¼Œå¯ä»¥ä½¿ç½‘ç»œç­–ç•¥ä½œç”¨äºæ‰€æœ‰é…ç½®ç½‘ç»œã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ç½‘ç»œç­–ç•¥(&lt;code&gt;Network Policy&lt;/code&gt;)æ˜¯&lt;code&gt;Kubernetes&lt;/code&gt;æä¾›çš„ä¸€ç§è§„èŒƒï¼Œå®ƒæè¿°äº†ä¸€ç»„&lt;code&gt;Pod&lt;/code&gt;æ˜¯å¦‚ä½•è¢«å…è®¸ç›¸äº’é€šä¿¡çš„ï¼Œä»¥åŠå’Œå…¶ä»–ç«¯ç‚¹æ˜¯å¦‚ä½•é€šä¿¡çš„ã€‚&lt;code&gt;Kubernetes&lt;/code&gt;åª</summary>
      
    
    
    
    <category term="æŠ€æœ¯ç§¯ç´¯" scheme="http://blog.cuicc.com/categories/%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/"/>
    
    
    <category term="kubernetes" scheme="http://blog.cuicc.com/tags/kubernetes/"/>
    
  </entry>
  
  <entry>
    <title>kubernetesä¹‹æ¢é’ˆ</title>
    <link href="http://blog.cuicc.com/blog/2017/07/23/kubernetes-probe/"/>
    <id>http://blog.cuicc.com/blog/2017/07/23/kubernetes-probe/</id>
    <published>2017-07-23T06:58:58.000Z</published>
    <updated>2025-03-16T07:58:25.515Z</updated>
    
    <content type="html"><![CDATA[<p>æ¢é’ˆæ˜¯<code>kubelet</code>ç”¨äºå‘¨æœŸæ€§è¯Šæ–­å®¹å™¨çš„ä¸€ç§æ–¹å¼ã€‚ç›®å‰<code>kubenertes</code>æä¾›ä¸¤ç§æ¢é’ˆï¼Œé€šè¿‡è°ƒç”¨å®¹å™¨æä¾›çš„å¥æŸ„(<code>handler</code>)æ¥å®ç°ç›‘æµ‹è¯Šæ–­ã€‚</p><h2 id="ä¸¤ç§æ¢é’ˆ"><a class="header-anchor" href="#ä¸¤ç§æ¢é’ˆ"></a>ä¸¤ç§æ¢é’ˆ</h2><ul><li><strong>livenessProbe</strong>: ç”¨äºæ¢æµ‹å®¹å™¨æ˜¯å¦å¤„äº<code>Running</code>çŠ¶æ€ï¼Œå¦‚æœè¯¥æ¢é’ˆè¿”å›å¤±è´¥ï¼Œ<code>kubelet</code>å°†ä¼šæ€æ‰å®¹å™¨ï¼Œå¹¶æ ¹æ®<code>restart policy</code>æ¥å†³å®šæ˜¯å¦é‡æ–°åˆ›å»ºè¯¥å®¹å™¨ã€‚å¦‚æœæ²¡æœ‰é…ç½®è¯¥æ¢é’ˆï¼Œé»˜è®¤è¿”å›æˆåŠŸçš„çŠ¶æ€ï¼Œåªæœ‰å®¹å™¨<code>crash</code>ï¼Œæ‰ä¼šè§¦å‘å¤±è´¥çŠ¶æ€è¿”å›ã€‚</li><li><strong>readinessProbe</strong>: ç”¨äºæ¢æµ‹å®¹å™¨æ˜¯å¦å¯ä»¥å¤„ç†æœåŠ¡è¯·æ±‚ï¼Œå¦‚æœè¯¥æ¢é’ˆå¤±è´¥ï¼Œç«¯ç‚¹æ§åˆ¶å™¨å°†ä¼šæŠŠè¯¥<code>Pod</code>çš„IPä»å…³è”çš„<code>Service</code>ä¸­åˆ é™¤æ‰ã€‚å¦‚æœæ²¡æœ‰é…ç½®è¯¥æ¢é’ˆï¼Œé»˜è®¤è¿”å›æˆåŠŸçš„çŠ¶æ€ã€‚</li></ul><h2 id="ä¸‰ç§æ“ä½œ"><a class="header-anchor" href="#ä¸‰ç§æ“ä½œ"></a>ä¸‰ç§æ“ä½œ</h2><ul><li><strong>ExecAction</strong>: åœ¨å®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤è¡Œï¼Œå¦‚æœå‘½ä»¤çš„é€€å‡ºçŠ¶æ€æ˜¯0ï¼Œåˆ™è®¤ä¸ºæ¢é’ˆçš„çŠ¶æ€æ˜¯æˆåŠŸã€‚</li><li><strong>TCPSocketAction</strong>: å‘å®¹å™¨æŒ‡å®šç«¯å£ä¸Šå‘é€TCPè¯·æ±‚ï¼Œå¦‚æœè¯¥ç«¯å£å·²è¢«ç›‘å¬ï¼Œåˆ™è®¤ä¸ºæ¢é’ˆçš„çŠ¶æ€æ˜¯æˆåŠŸã€‚</li><li><strong>HTTPGetAction</strong>: å‘å®¹å™¨æŒ‡å®šç«¯å£å’Œè·¯å¾„å‘é€HTTP GETè¯·æ±‚ï¼Œå¦‚æœè¿”å›çŠ¶æ€ç å¤„äº200åˆ°400ä¹‹é—´ï¼Œåˆ™è®¤ä¸ºæ¢é’ˆçš„çŠ¶æ€æ˜¯æˆåŠŸã€‚</li></ul><h2 id="å››ç§åœºæ™¯"><a class="header-anchor" href="#å››ç§åœºæ™¯"></a>å››ç§åœºæ™¯</h2><ul><li><strong>Default</strong>: ä¸é…ç½®æ¢é’ˆæ—¶ï¼Œå®¹å™¨å¤„äºä¸å¥åº·çš„çŠ¶æ€(å¦‚<code>crash</code>)æ—¶ï¼Œ<code>kubelet</code>ä¹Ÿä¼šæ€æ‰å®¹å™¨ï¼›å®¹å™¨æ­£å¸¸åˆå§‹åŒ–åï¼Œå°±è®¤ä¸ºæ˜¯å¯ä»¥æä¾›æœåŠ¡çš„çŠ¶æ€ã€‚</li><li><strong>Custom</strong>: åœ¨æŸç§æƒ…å†µä¸‹ï¼Œè¿›ç¨‹æ— æ³•æ­£å¸¸æä¾›åŠŸèƒ½ï¼Œä½†å®¹å™¨ä¾ç„¶å¤„äºå¥åº·çŠ¶æ€ï¼Œåˆ™å¯ä»¥é€šè¿‡é…ç½®<code>liveness</code>æ¢é’ˆå®ç°æ€æ‰å®¹å™¨ï¼› è¿›ç¨‹åˆå§‹åŒ–äº‹ä»¶æ¯”è¾ƒé•¿ï¼Œåˆ™å¯ä»¥é€šè¿‡é…ç½®<code>readiness</code>æ¢é’ˆå®ç°æœåŠ¡å¯ç”¨ã€‚</li><li><strong>Reset</strong>: æŸäº›è¿›ç¨‹å¤„äºä¸­é—´è¿‡ç¨‹çŠ¶æ€ï¼Œä½†åˆå¸Œæœ›ä»åˆå§‹çŠ¶æ€å¼€å§‹æ—¶ï¼Œå¯ä»¥é€šè¿‡é…ç½®<code>liveness</code>æ¢é’ˆå®ç°ï¼ŒåŒæ—¶æä¾›å¤ä½æ¥å£ï¼Œå¦‚è¯·æ±‚å¤ä½æ¥å£ï¼Œåˆ™æ¢é’ˆè¿”å›å¤±è´¥çŠ¶æ€ï¼Œä»è€Œå®ç°å¤ä½æ“ä½œã€‚é»˜è®¤è¿”å›æˆåŠŸçŠ¶æ€ã€‚</li><li><strong>OutOfService</strong>: åœ¨è¿›è¡ŒæœåŠ¡å‡çº§æ—¶ï¼Œéœ€è¦å°†æœåŠ¡ä¸´æ—¶ä¸‹çº¿ï¼Œå¯ä»¥é€šè¿‡é…ç½®<code>readiness</code>æ¢é’ˆå®ç°ï¼ŒåŒæ—¶æä¾›æœåŠ¡ä¸‹çº¿æ¥å£ï¼Œå¦‚è¯·æ±‚ä¸‹çº¿æ¥å£ï¼Œåˆ™æ¢é’ˆè¿”å›å¤±è´¥çŠ¶æ€ï¼Œä»è€Œå®ç°ä¸‹çº¿æ“ä½œã€‚é»˜è®¤è¿”å›æˆåŠŸçŠ¶æ€ã€‚</li></ul><p><em>å‚è€ƒ:</em></p><ul><li><a href="https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#container-probes"><em>Pod Lifecycle - Container probes</em></a></li><li><a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-probes/"><em>Configure Liveness and Readiness Probes</em></a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æ¢é’ˆæ˜¯&lt;code&gt;kubelet&lt;/code&gt;ç”¨äºå‘¨æœŸæ€§è¯Šæ–­å®¹å™¨çš„ä¸€ç§æ–¹å¼ã€‚ç›®å‰&lt;code&gt;kubenertes&lt;/code&gt;æä¾›ä¸¤ç§æ¢é’ˆï¼Œé€šè¿‡è°ƒç”¨å®¹å™¨æä¾›çš„å¥æŸ„(&lt;code&gt;handler&lt;/code&gt;)æ¥å®ç°ç›‘æµ‹è¯Šæ–­ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä¸¤ç§æ¢é’ˆ&quot;&gt;&lt;a clas</summary>
      
    
    
    
    <category term="æŠ€æœ¯ç§¯ç´¯" scheme="http://blog.cuicc.com/categories/%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/"/>
    
    
    <category term="kubernetes" scheme="http://blog.cuicc.com/tags/kubernetes/"/>
    
  </entry>
  
  <entry>
    <title>kubernetesä¹‹å¤šç½‘ç»œæ”¯æŒ</title>
    <link href="http://blog.cuicc.com/blog/2017/05/14/kubernetes-multi-networks/"/>
    <id>http://blog.cuicc.com/blog/2017/05/14/kubernetes-multi-networks/</id>
    <published>2017-05-14T03:30:55.000Z</published>
    <updated>2025-03-16T07:58:25.515Z</updated>
    
    <content type="html"><![CDATA[<p>æŸäº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦å¤šç½‘ç»œçš„æ”¯æŒï¼Œå¦‚<code>eth0</code>ç”¨äºä¸šåŠ¡åŠŸèƒ½ï¼Œ<code>eth1</code>ç”¨äºé…ç½®ç®¡ç†åŠŸèƒ½ï¼Œé‚£ä¹ˆ<code>kubernetes</code>ä¸‹è¯¥å¦‚ä½•å®ç°å‘¢ï¼Ÿ</p><a href="/blog/2017/04/30/kubernetes-network/" title="kubernetesä¹‹ç½‘ç»œåˆ†æ">ä¸Šä¸€ç¯‡</a> æˆ‘ä»¬ç€é‡åˆ†æäº†å„å±‚çº§ä¹‹é—´ç½‘ç»œé€šä¿¡çš„æ–¹å¼ï¼Œä»¥åŠå†…å¤–ç½‘ä¹‹é—´çš„ç½‘ç»œé€šä¿¡ï¼Œè¿™äº›é€šä¿¡æ–¹å¼çš„æ¢è®¨éƒ½æ˜¯åŸºäºå•ä¸€ç½‘ç»œçš„ã€‚<p><code>kubernetes</code>ç½‘ç»œé»˜è®¤åªæ”¯æŒå•ä¸€ç½‘ç»œï¼Œä½¿ç”¨<code>noop</code>ç½‘ç»œæ’ä»¶ã€‚<code>kubernetes</code>ç½‘ç»œæ˜¯ä»¥<code>Plugin</code>çš„æ–¹å¼å®ç°çš„ï¼Œå®ƒæ”¯æŒç¬¦åˆ<code>CNI</code>è§„èŒƒçš„æ’ä»¶ï¼Œé€šè¿‡<code>--network-plugin=</code>æ¥æŒ‡å®šï¼Œè¿™å°±æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å®šåˆ¶ç½‘ç»œæ–¹æ¡ˆã€‚</p><p>å…³äº<code>kubernets</code>ç½‘ç»œæ’ä»¶ï¼Œ<a href="https://kubernetes.io/docs/concepts/cluster-administration/network-plugins/">å®˜æ–¹æ–‡æ¡£</a>æœ‰è¯¦ç»†çš„æè¿°ï¼Œè¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹:</p><p>ç½‘ç»œæ’ä»¶è¿˜å¤„äº<code>alpha</code>é˜¶æ®µï¼Œå…¶å†…å®¹ä¼šç»å¸¸å‘ç”Ÿå˜åŒ–ã€‚ç›®å‰æ”¯æŒä¸¤ç§ç½‘ç»œæ’ä»¶</p><ul><li>CNI plugin: ç¬¦åˆ<code>CNI</code>è§„èŒƒçš„æ’ä»¶ï¼Œå…¶è§„èŒƒè¯·å‚çœ‹<a href="https://github.com/containernetworking/cni/blob/master/SPEC.md">å®˜æ–¹æ–‡æ¡£</a>ã€‚</li><li>kubenet pluginï¼šè¿™ä¸ªå¯çœ‹ä½œæ˜¯<code>kubernentes</code>å®˜æ–¹æä¾›çš„ç¬¦åˆCNIè§„èŒƒçš„æ’ä»¶ï¼ŒåŸºäº<code>cbr0</code>ï¼Œä½¿ç”¨<code>CNI</code>çš„<code>bridge</code>å’Œ<code>local-host</code>æ’ä»¶ã€‚</li></ul><p>é‚£ä¹ˆï¼Œè¦å®ç°å®šåˆ¶åŒ–çš„ç½‘ç»œï¼Œåªéœ€æŒ‰<code>CNI</code>è§„èŒƒå®ç°<code>Add</code>å’Œ<code>Remove</code>æ¥å£å³å¯ã€‚<code>kubernetes</code>å¤šç½‘ç»œæ–¹æ¡ˆå°±æ˜¯ä»¥<code>CNI</code>æ’ä»¶çš„æ–¹å¼å®ç°çš„ã€‚ä»¥ä¸‹æ“ä½œåŸºäº<code>Ubuntu 14.04</code>ï¼Œé™¤<code>etcd</code>æ“ä½œå¤–ï¼Œå…¶ä»–æ“ä½œæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ‰§è¡Œã€‚</p><h2 id="å‡†å¤‡å·¥ä½œ"><a class="header-anchor" href="#å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><ul><li>å·²éƒ¨ç½²å¤šèŠ‚ç‚¹<code>kubernetes</code>é›†ç¾¤ï¼Œ<code>overlay</code>ç½‘ç»œä½¿ç”¨<code>flannel</code></li><li>å·²å®‰è£…<code>golang</code>ç¼–è¯‘ç¯å¢ƒ</li><li>éƒ¨ç½²èŠ‚ç‚¹ä¸Šå·²å®‰è£…<code>bridge-utils</code>, <code>conntrack</code>å’Œ<code>nsenter</code></li><li>ä»<code>github</code>ä¸Šä¸‹è½½<a href="https://github.com/Intel-Corp/multus-cni">multus-cni</a>ï¼Œè¯¥æ’ä»¶å®ç°å¤šç½‘ç»œåŠŸèƒ½ï¼Œå…·ä½“ç½‘ç»œåŠŸèƒ½ç”±ä»¥ä¸‹æ’ä»¶å®ç°</li><li>[å¯é€‰]ä»<code>github</code>ä¸Šä¸‹è½½<a href="https://github.com/Intel-Corp/sriov-cni">sriov-cni</a>ï¼Œè¯¥æ’ä»¶å®ç°SR-IOVåŠŸèƒ½</li><li>ä»<code>github</code>ä¸Šä¸‹è½½<a href="https://github.com/containernetworking/cni">cni</a>ï¼ŒåŸºç¡€æ’ä»¶åº“ï¼ŒåŒ…å«<code>bridge</code>, <code>flannel</code>, <code>ipam</code>ç­‰</li></ul><h2 id="CNIæ’ä»¶"><a class="header-anchor" href="#CNIæ’ä»¶"></a>CNIæ’ä»¶</h2><p>å°†<code>multus-cni</code>, <code>sriov-cni</code>, <code>cni</code>æ”¾åœ¨<code>go</code>ç¼–è¯‘ç›®å½•ä¸‹ï¼Œå¦‚<code>~/go/src/</code>ä¸‹ï¼Œåˆ†åˆ«ç¼–è¯‘ä¸‰ä¸ªæ’ä»¶ï¼Œåœ¨å„è‡ªç›®å½•ä¸‹æ‰§è¡Œ<code>./build.sh</code>ã€‚ç¼–è¯‘æˆåŠŸåï¼Œç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶ä½äº<code>./bin</code>ä¸‹ã€‚</p><p>åˆ›å»ºç›®å½•<code>/opt/cni/bin</code>ï¼Œå°†ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶æ‹·è´åˆ°è¯¥ç›®å½•ä¸‹ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /opt/cni/bin</span><br><span class="line"><span class="built_in">cd</span> ~/go/src/multus-cni/ &amp;&amp; ./build.sh</span><br><span class="line"><span class="built_in">cp</span> ./bin/* /opt/cni/bin/</span><br><span class="line"><span class="built_in">cd</span> ~/go/src/sriov-cni/ &amp;&amp; ./build.sh</span><br><span class="line"><span class="built_in">cp</span> ./bin/* /opt/cni/bin/</span><br><span class="line"><span class="built_in">cd</span> ~/go/src/cni/ &amp;&amp; ./build.sh</span><br><span class="line"><span class="built_in">cp</span> ./bin/* /opt/cni/bin/</span><br></pre></td></tr></table></figure><h2 id="é…ç½®flannelç½‘ç»œ"><a class="header-anchor" href="#é…ç½®flannelç½‘ç»œ"></a>é…ç½®flannelç½‘ç»œ</h2><p>ä»¥ä¸‹æ“ä½œé™¤æ­¥éª¤4åªéœ€è¦åœ¨<code>master</code>èŠ‚ç‚¹æ“ä½œå¤–ï¼Œå…¶ä»–æ­¥éª¤å„èŠ‚ç‚¹éƒ½éœ€è¦æ‰§è¡Œã€‚</p><ol><li>åˆ›å»ºè¯¥<code>flannel</code>ç½‘ç»œä½¿ç”¨çš„ç½‘æ¡¥ï¼Œå¦‚<code>kbr1</code></li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">brctl addbr kbr1</span><br></pre></td></tr></table></figure><ol start="2"><li>åˆ›å»ºå­˜æ”¾flannelç½‘ç»œé…ç½®çš„ç›®å½•</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /run/flannel/networks</span><br></pre></td></tr></table></figure><ol start="3"><li>ä»¿ç…§<code>/run/flannel/subnets.env</code>æ–‡ä»¶ï¼Œåœ¨<code>/run/flannel/networks</code>ä¸‹åˆ›å»ºé…ç½®æ–‡ä»¶ï¼Œå¦‚<code>subnets2.env</code>ï¼Œä½¿ç”¨ä¸åŒçš„ç½‘ç»œæ®µï¼Œå¦‚</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cp</span> /run/flannel/subnets.env /run/flannel/networks/subnets2.<span class="built_in">env</span></span><br><span class="line">vim /run/flannel/networks/subnets2.<span class="built_in">env</span></span><br><span class="line"><span class="comment">#modify as follows</span></span><br><span class="line">FLANNEL_NETWORK=173.17.0.0/16</span><br><span class="line">FLANNEL_SUBNET=173.17.76.1/24</span><br><span class="line">FLANNEL_MTU=1400</span><br><span class="line">FLANNEL_IPMASQ=<span class="literal">true</span></span><br></pre></td></tr></table></figure><ol start="4"><li>å°†è¯¥ç½‘ç»œæ®µæ³¨å†Œåˆ°<code>etcd</code>ï¼Œæ³¨æ„ä½¿ç”¨ä¸åŒçš„å‰ç¼€ï¼Œå¦‚åŸç½‘ç»œä½¿ç”¨çš„æ˜¯<code>/coreos.com/network/</code>ï¼Œè¿™é‡Œä½¿ç”¨<code>/k8s/network2/</code>ã€‚å†è€…é»˜è®¤çš„<code>vlan index</code>æ˜¯1ï¼Œæ‰€ä»¥è¿™é‡Œ<code>VNI</code>ä¸º2</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/opt/bin/etcdctl <span class="built_in">set</span> /k8s/network2/config <span class="string">&#x27;&#123; &quot;Network&quot;: &quot;173.17.0.0/16&quot;, &quot;Backend&quot;: &#123; &quot;Type&quot;: &quot;vxlan&quot;, &quot;VNI&quot;: 2 &#125; &#125;&#x27;</span></span><br></pre></td></tr></table></figure><ol start="5"><li>ä½¿ç”¨ä¸Šè¿°é…ç½®å¯åŠ¨æ–°çš„<code>flannel daemon</code>ï¼Œ<a href="https://github.com/coreos/flannel/blob/master/Documentation/running.md#multiple-networks">å‚è€ƒæ–‡æ¡£</a>ï¼Œå…¶ä¸­<code>--etcd-endpoints=http://127.0.0.1:4001 --ip-masq --iface=172.16.1.171</code>æ¥è‡ªäº<code>/etc/default/flannel</code>æ–‡ä»¶</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/opt/bin/flanneld -subnet-file /run/flannel/networks/subnets2.env -etcd-prefix=/k8s/network2 --etcd-endpoints=http://127.0.0.1:4001 --ip-masq --iface=172.16.1.171 &amp;</span><br></pre></td></tr></table></figure><ol start="6"><li>åˆ›å»º<code>flannel</code>æ•°æ®å­˜å‚¨ç›®å½•ï¼Œå­˜å‚¨<code>subnets2.env</code>ç½‘ç»œç›¸å…³çš„æ•°æ®</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /var/lib/cni/flannel/2</span><br></pre></td></tr></table></figure><h2 id="é…ç½®multus-cni"><a class="header-anchor" href="#é…ç½®multus-cni"></a>é…ç½®multus-cni</h2><p>åœ¨<code>cni-conf-dir</code>(é»˜è®¤ä¸º<code>/etc/cni/net.d/</code>)ä¸‹åˆ›å»ºé…ç½®æ–‡ä»¶<code>test.conf</code>ï¼Œå…¶å†…å®¹å¦‚ä¸‹</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;multus-demo-network&quot;</span>,</span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;multus&quot;</span>,</span><br><span class="line">    <span class="string">&quot;delegates&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">                <span class="string">&quot;type&quot;</span>: <span class="string">&quot;flannel&quot;</span>,</span><br><span class="line">                <span class="string">&quot;name&quot;</span>: <span class="string">&quot;flannel.2&quot;</span>,</span><br><span class="line">                <span class="string">&quot;subnetFile&quot;</span>: <span class="string">&quot;/run/flannel/networks/subnets2.env&quot;</span>,</span><br><span class="line">                <span class="string">&quot;dataDir&quot;</span>: <span class="string">&quot;/var/lib/cni/flannel/2&quot;</span>,</span><br><span class="line">                <span class="string">&quot;delegate&quot;</span>: &#123;</span><br><span class="line">                        <span class="string">&quot;bridge&quot;</span>: <span class="string">&quot;kbr1&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">                <span class="string">&quot;type&quot;</span>: <span class="string">&quot;flannel&quot;</span>,</span><br><span class="line">                <span class="string">&quot;name&quot;</span>: <span class="string">&quot;flannel.1&quot;</span>,</span><br><span class="line">                <span class="string">&quot;subnetFile&quot;</span>: <span class="string">&quot;/run/flannel/subnet.env&quot;</span>,</span><br><span class="line">                <span class="string">&quot;dataDir&quot;</span>: <span class="string">&quot;/var/lib/cni/flannel&quot;</span>,</span><br><span class="line">                <span class="string">&quot;masterplugin&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="string">&quot;delegate&quot;</span>: &#123;</span><br><span class="line">                        <span class="string">&quot;bridge&quot;</span>: <span class="string">&quot;docker0&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;isDefaultGateway&quot;</span>: <span class="literal">true</span></span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥æ–‡ä»¶çš„ä½œç”¨æ˜¯ï¼Œé…ç½®ä¸¤ä¸ª<code>flannel</code>ç½‘ç»œï¼ŒæŒ‡å®šäº†å„è‡ªçš„<code>subnet</code>é…ç½®æ–‡ä»¶ï¼Œæ•°æ®å­˜å‚¨ä½ç½®<code>dataDir</code>ï¼Œä½¿ç”¨çš„ç½‘æ¡¥ã€‚å…¶ä¸­<code>flannel.1</code>æœ‰<code>masterplugin</code>å±æ€§ï¼Œå…¶æ„ä¸ºè¯¥ç½‘ç»œä¼šä¸ŠæŠ¥ç»™<code>kubelet</code>ã€‚</p><h2 id="é…ç½®kubelet"><a class="header-anchor" href="#é…ç½®kubelet"></a>é…ç½®kubelet</h2><p><code>kubelet</code>çš„é…ç½®æ–‡ä»¶ä¸º<code>/etc/default/kubelet</code>, åœ¨å…¶è¡Œå°¾åŠ ä¸Š<code>--network-plugin=cni</code>ã€‚ å¦‚æœä¸Šè¿°çš„<code>cni bin</code>å’Œ<code>cni conf</code>ä¸æƒ³æ”¾åœ¨é»˜è®¤ç›®å½•ä¸‹ï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨<code>--cni-bin-dir</code>å’Œ<code>--cni-conf-dir</code>æŒ‡å®šç›®å½•ã€‚</p><p>ç„¶åé‡å¯<code>kubelet</code>è¿›ç¨‹</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">service kubelet restart</span><br><span class="line">service kubelet status</span><br></pre></td></tr></table></figure><h2 id="Enjoy-it"><a class="header-anchor" href="#Enjoy-it"></a>Enjoy it</h2><p>ç°åœ¨ï¼Œå¯åŠ¨çš„<code>pod</code>éƒ½å…·æœ‰ä¸¤ä¸ªç½‘ç»œ<code>eth0</code>å’Œ<code>net0</code>(<code>multus-cni</code>å¤šç½‘ç»œæ˜¯ä»¥<code>net0</code>, <code>net1</code> â€¦ <code>netn</code>å‘½åçš„)ã€‚æ¯ä¸ªç½‘ç»œä½¿ç”¨ä¸åŒçš„<code>flannel</code>ç½‘ç»œï¼Œç½‘ç»œé—´æ˜¯éš”ç¦»çš„ï¼Œ<code>vlan index</code>ä¸åŒã€‚å¦‚æœéœ€è¦æ›´å¤šçš„ç½‘ç»œï¼Œåªéœ€å¢åŠ é…ç½®å³å¯ã€‚</p><p>è¯¥æ–¹æ¡ˆçš„ç¼ºç‚¹æ˜¯é…ç½®æ˜¯å›ºå®šçš„ï¼Œä¸èƒ½åŠ¨æ€å¢åˆ ï¼Œéœ€è¦é‡å¯<code>kubelet</code>ã€‚å¯¹æ¯ä¸ª<code>pod</code>è€Œè¨€ï¼Œç½‘ç»œä¸ªæ•°ä¸èƒ½åŠ¨æ€é…ç½®ï¼Œä¾èµ–äºæ•´ä½“æ–¹æ¡ˆã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æŸäº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦å¤šç½‘ç»œçš„æ”¯æŒï¼Œå¦‚&lt;code&gt;eth0&lt;/code&gt;ç”¨äºä¸šåŠ¡åŠŸèƒ½ï¼Œ&lt;code&gt;eth1&lt;/code&gt;ç”¨äºé…ç½®ç®¡ç†åŠŸèƒ½ï¼Œé‚£ä¹ˆ&lt;code&gt;kubernetes&lt;/code&gt;ä¸‹è¯¥å¦‚ä½•å®ç°å‘¢ï¼Ÿ&lt;/p&gt;
&lt;a href=&quot;/blog/2017/04/30/kuber</summary>
      
    
    
    
    <category term="æŠ€æœ¯ç§¯ç´¯" scheme="http://blog.cuicc.com/categories/%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/"/>
    
    
    <category term="kubernetes" scheme="http://blog.cuicc.com/tags/kubernetes/"/>
    
    <category term="flannel" scheme="http://blog.cuicc.com/tags/flannel/"/>
    
    <category term="multi-networks" scheme="http://blog.cuicc.com/tags/multi-networks/"/>
    
  </entry>
  
  <entry>
    <title>kubernetesä¹‹ç½‘ç»œåˆ†æ</title>
    <link href="http://blog.cuicc.com/blog/2017/04/30/kubernetes-network/"/>
    <id>http://blog.cuicc.com/blog/2017/04/30/kubernetes-network/</id>
    <published>2017-04-30T12:50:45.000Z</published>
    <updated>2025-08-23T12:14:09.391Z</updated>
    
    <content type="html"><![CDATA[<p><code>Kubernetes</code>æ˜¯ä¸€ä¸ªå¼€æºçš„å®¹å™¨é›†ç¾¤ç®¡ç†å¹³å°ï¼Œå¯ç”¨æ¥è‡ªåŠ¨åŒ–éƒ¨ç½²ã€æ‰©å±•å’Œè¿ç»´åº”ç”¨å®¹å™¨ã€‚å…³äºè¿™ä¸ªå¹³å°æœ¬èº«çš„å„ç»„ä»¶åŠå…·ä½“åŠŸèƒ½ä¸åœ¨æœ¬æ–‡è®¨è®ºèŒƒå›´ï¼Œæœ¬æ–‡ä¸»è¦å…³æ³¨<code>kubernetes</code>çš„ç½‘ç»œæ–¹æ¡ˆã€‚åœ¨è®¨è®ºç½‘ç»œä¹‹å‰æœ‰å¿…è¦å…ˆäº†è§£ä¸‹ç›¸å…³æ¦‚å¿µï¼Œè¿™äº›æ¦‚å¿µå’Œç½‘ç»œæ¯æ¯ç›¸å…³ã€‚</p><h2 id="åŸºæœ¬æ¦‚å¿µ"><a class="header-anchor" href="#åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h2><p><code>Containers</code>æ˜¯æœ€å°çš„èµ„æºå•ä½ï¼Œç”¨äºè½»æ¾åœ°æ‰“åŒ…åº”ç”¨ç¨‹åºåŠç›¸å…³é…ç½®ã€‚ä½†åœ¨<code>kubernetes</code>ä¸­ï¼Œå®¹å™¨ä¸æ˜¯æ“ä½œçš„æœ€å°å•ä½ï¼Œç”šè‡³å®¹å™¨æœ¬èº«å¯¹<code>kubernetes</code>æ˜¯ä¸å¯è§çš„ï¼Œè€Œæ˜¯é€šè¿‡åŒ…è£…åœ¨å¤–é¢çš„<code>Pod</code>è¿›è¡Œèµ„æºçš„ç®¡ç†ã€‚</p><p><code>Pods</code>æ˜¯æœ€å°çš„éƒ¨ç½²å•ä½ï¼Œæ˜¯éƒ¨ç½²åœ¨<code>kubernetes</code>ä¸­çš„åº”ç”¨çš„ä¸€ä¸ªå®ä¾‹ã€‚å¯åŒ…å«ä¸€ç»„ç›¸å…³å®¹å™¨ï¼Œ<code>Pod</code>å†…å…±äº«çš„å­˜å‚¨èµ„æºï¼Œä¸€ä¸ªå”¯ä¸€çš„ç½‘ç»œIPä»¥åŠä¸€äº›é€‰é¡¹é…ç½®å®¹å™¨è¯¥æ€æ ·è¿è¡Œã€‚<code>Pod</code>ä¸­çš„æ‰€æœ‰å®¹å™¨å…±äº«ä¸€ä¸ªç½‘ç»œIPï¼Œå®¹å™¨é—´å¯ç›´æ¥ç”¨<code>localhost</code>è®¿é—®ã€‚</p><p><code>Replica sets</code>æ˜¯<code>ReplicationController</code>çš„ä¸‹ä¸€ä»£å®ç°ï¼Œå®ƒå’Œåè€…åŸºæœ¬ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œé™¤äº†å¯¹é€‰æ‹©å™¨<code>Selector</code>çš„æ”¯æŒä¸ä¸€æ ·ã€‚è¯¥æ§åˆ¶å™¨ç”¨æ¥ä¿è¯å§‹ç»ˆéƒ½æœ‰ä¸€å®šæ•°é‡çš„<code>Pod</code>å‰¯æœ¬åœ¨è¿è¡Œï¼Œå®ƒä¼šè‡ªåŠ¨æ›¿æ¢æ•…éšœ/è¢«åˆ é™¤/è¢«ç»ˆæ­¢çš„å‰¯æœ¬ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå°‘äºè®¾å®šçš„å›ºå®šæ•°é‡æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºåˆ°è¾¾è¯¥æ•°é‡ï¼›å¤šäºè¯¥æ•°é‡æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ é™¤åˆ°è¯¥æ•°é‡ã€‚å®˜æ–¹ä¸å»ºè®®ç›´æ¥ä½¿ç”¨è¯¥æ§åˆ¶å™¨ï¼Œå¯ç”¨æ›´é«˜å±‚çš„<code>Deployment</code>æ¥ç®¡ç†ã€‚</p><p><code>Deployment</code>ä¸º<code>Pods</code>å’Œ<code>Replica sets</code>æä¾›äº†å£°æ˜æ›´æ–°ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥æ§åˆ¶å™¨ç”¨æ¥ä¿è¯è¾¾åˆ°ä½ æè¿°çš„æœŸæœ›çŠ¶æ€ã€‚ä½¿ç”¨è¯¥æ§åˆ¶å™¨å¯ä»¥æ–¹ä¾¿çš„æ›´æ–°<code>Pods</code>(æ»šåŠ¨å‡çº§)ï¼Œå¦‚æ›´æ–°äº†å®¹å™¨é•œåƒï¼›å¯ä»¥æ–¹é¢çš„å›æ»šåˆ°ä¹‹å‰çš„éƒ¨ç½²ç‰ˆæœ¬ï¼›å¯ä»¥éšæ—¶æš‚åœå’Œå¯åŠ¨éƒ¨ç½²ã€‚</p><p><code>Service</code>æœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºå¾®æœåŠ¡ï¼Œæ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µï¼Œå®ƒå®šä¹‰äº†ä¸€ç»„<code>Pods</code>ä»¥åŠè®¿é—®å®ƒä»¬çš„ç­–ç•¥ã€‚<code>Pods</code>æ˜¯é€šè¿‡æ ‡ç­¾é€‰æ‹©å™¨<code>Label Selector</code>è¢«é›†åˆåœ¨ä¸€èµ·çš„ã€‚è¯¥æŠ½è±¡å±‚å±è”½äº†åç«¯çš„<code>Pods</code>å‰¯æœ¬ï¼Œå¯¹å¤–å‘ˆç°ä¸€ä¸ªè®¿é—®å…¥å£ã€‚è¿™æ ·å³ä½¿åç«¯è¢«æ›¿æ¢ï¼Œå¯¹å¤–ä¹Ÿæ˜¯ä¸æ„ŸçŸ¥çš„ã€‚æ‰€ä»¥ï¼Œä¸ç®¡æ˜¯å¯¹å†…è¿˜æ˜¯å¯¹å¤–æä¾›çš„åŠŸèƒ½ï¼Œéƒ½ä»¥<code>Service</code>ä½œä¸ºæœåŠ¡å…¥å£æ˜¯åˆç†çš„åšæ³•ã€‚</p><p><code>Service</code>å’Œ<code>Deployment</code>å¯ä»¥çœ‹ä½œæ˜¯åŒä¸€çº§çš„æ¦‚å¿µï¼Œ<code>Service</code>ç”¨äº<code>Pods</code>å¯¹å¤–æä¾›æœåŠ¡çš„ç®¡ç†ï¼Œ<code>Deployment</code>ç”¨äº<code>Pods</code>æœ¬èº«çš„ç®¡ç†ã€‚ä»¥ä¸Šå„ä¸ªæ¦‚å¿µä¹‹é—´çš„å…³ç³»å¦‚ä¸‹å›¾ï¼š</p><img src="/images/k8s/k8s-concepts.png" class="" title="Kubernetesæ¦‚å¿µå…³ç³»å›¾"><p><code>Nodes</code>æ˜¯æŒ‡<code>kubernetes</code>é›†ç¾¤çš„èŠ‚ç‚¹ï¼Œæä¾›èƒ½åŠ›çš„æœºå™¨ï¼Œå¦‚è™šæ‹Ÿæœºç­‰ï¼Œè¿™é‡Œåˆ—ä¸¾ä¸€ä¸‹ä¾¿äºä¸‹é¢çš„ç½‘ç»œè®¨è®ºã€‚</p><h2 id="ç½‘ç»œæ–¹æ¡ˆ"><a class="header-anchor" href="#ç½‘ç»œæ–¹æ¡ˆ"></a>ç½‘ç»œæ–¹æ¡ˆ</h2><p>åŸºäºä»¥ä¸Šçš„æ¦‚å¿µï¼Œå¯ä»¥çœ‹åˆ°æ¶‰åŠåˆ°çš„ç½‘ç»œé€šä¿¡æœ‰å®¹å™¨é—´çš„é€šä¿¡ï¼Œ<code>Pod</code>é—´çš„é€šä¿¡ï¼ŒæœåŠ¡é—´çš„é€šä¿¡ï¼Œè·¨èŠ‚ç‚¹çš„é€šä¿¡ï¼Œä»¥åŠå»¶ä¼¸ä¸€ä¸‹è·¨é›†ç¾¤çš„é€šä¿¡ã€‚é‚£ä¹ˆè¿™äº›ç½‘ç»œé€šä¿¡åœ¨<code>kubernetes</code>é‡Œéƒ½æ˜¯å¦‚ä½•å®æ–½çš„å‘¢ï¼Ÿ<code>kubernetes</code>å®˜æ–¹ç»™å‡ºäº†ä¸€ä¸ªä½¿ç”¨<code>OpenVSwitch</code>çš„<a href="https://kubernetes.io/docs/admin/ovs-networking/">ç½‘ç»œæ–¹æ¡ˆ</a>ã€‚è¿™é‡ŒåŸºäºè¿™ä¸ªç½‘ç»œæ–¹æ¡ˆå›¾æ‰©å±•ä¸€ä¸‹ï¼Œè¯•å›¾æ¶µç›–æ‰€æœ‰çš„ç½‘ç»œè¿æ¥ç±»å‹ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œé’ˆå¯¹æ¯ç§ç½‘ç»œè¿æ¥ç±»å‹ï¼Œåé¢ä¼šè¯¦ç»†è®¨è®ºã€‚</p><img src="/images/k8s/k8s-network.png" class="" title="Kubernetesç½‘ç»œæ–¹æ¡ˆå›¾"><h3 id="Container-to-Container"><a class="header-anchor" href="#Container-to-Container"></a>Container-to-Container</h3><p>ä¸Šé¢æˆ‘ä»¬å·²ç»æåˆ°ï¼Œ<code>kubernetes</code>ä¸ä¼šç›´æ¥æ“ä½œå®¹å™¨æœ¬èº«ï¼Œå¯¹å¤–å‘ˆç°çš„æœ€å°æ“ä½œå•ä½æ˜¯<code>Pod</code>ï¼Œè¿™é‡Œå®¹å™¨ä¹‹é—´çš„é€šä¿¡æ˜¯æŒ‡ä¸€ä¸ª<code>Pod</code>å†…çš„å®¹å™¨ä¹‹é—´å¦‚ä½•é€šä¿¡ã€‚æˆ‘ä»¬è§‚å¯Ÿä¸€ä¸ª<code>Pod</code>é‡Œçš„èµ„æºæ—¶ï¼Œä¼šå‘ç°æœ‰ä¸€ä¸ªè‡ªå·±å¯åŠ¨çš„<code>pause</code>å®¹å™¨ï¼Œè¿™ä¸ªå®¹å™¨çš„ä½œç”¨æ˜¯ä¸º<code>Pod</code>æä¾›ç½‘ç»œï¼Œæ‰€æœ‰å…¶ä»–çš„å®¹å™¨(ä¹Ÿå°±æ˜¯æˆ‘ä»¬é€šè¿‡æ¨¡æ¿å¯åŠ¨çš„å®¹å™¨)ï¼Œéƒ½æ˜¯å…±äº«<code>pause</code>å®¹å™¨ç½‘ç»œçš„ã€‚åœ¨å®ç°ä¸Šï¼Œå¦‚<code>Docker</code>æä¾›äº†<code>--net=container:ID</code>è¿™æ ·çš„é€‰é¡¹ã€‚</p><p>æ¯ä¸ª<code>pod</code>å¯¹å¤–å‘ˆç°ä¸€ä¸ªå”¯ä¸€çš„IPï¼Œ<code>Pod</code>å†…çš„å„å®¹å™¨å…±äº«è¿™ä¸ªIPï¼Œä¹Ÿå°±æ˜¯è¯´å„å®¹å™¨å¤„äºåŒä¸€ç½‘ç»œç©ºé—´ä¸­ï¼Œå¯ç›´æ¥ä½¿ç”¨<code>localhost</code>äº’ç›¸è®¿é—®ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯å„å®¹å™¨ä½¿ç”¨çš„ç«¯å£ä¸èƒ½å†²çªï¼Œå¯ä»¥è®¤ä¸º<code>IP:Port</code>èƒ½å¤Ÿå”¯ä¸€ç¡®å®šä¸€ä¸ªå®¹å™¨ã€‚ç±»æ¯”ä¸€ä¸ªç³»ç»Ÿå†…çš„å¤šä¸ªç½‘ç»œè¿›ç¨‹ã€‚</p><h3 id="Pod-to-Pod"><a class="header-anchor" href="#Pod-to-Pod"></a>Pod-to-Pod</h3><p><code>kubernetes</code>ç½‘ç»œå®ç°åŸºäºä»¥ä¸‹ä¸‰ä¸ªåŸåˆ™ï¼š</p><ul><li>æ‰€æœ‰å®¹å™¨å’Œå…¶ä»–å®¹å™¨çš„é€šä¿¡ä¸éœ€è¦NAT</li><li>æ‰€æœ‰<code>node</code>å’Œå®¹å™¨é—´çš„é€šä¿¡ä¸éœ€è¦NAT</li><li>å®¹å™¨è‡ªå·±çœ‹åˆ°çš„IPå°±æ˜¯å¯¹å¤–å‘ˆç°çš„IP</li></ul><p>é‚£ä¹ˆï¼Œè¿™æ˜¯å¦‚ä½•åšåˆ°çš„å‘¢ï¼Ÿåœ¨åŒä¸€<code>node</code>æ—¶ï¼Œæ˜¯é€šè¿‡å®¹å™¨ç½‘æ¡¥å®ç°çš„ï¼Œå¦‚<code>Docker</code>é»˜è®¤ä½¿ç”¨çš„ç½‘æ¡¥<code>Docker0</code>ï¼›åœ¨è·¨<code>node</code>é€šä¿¡æ—¶ï¼Œæ˜¯é€šè¿‡<code>node</code>é—´çš„<code>overlay network</code>å®ç°äº’è”çš„ï¼Œå¦‚<code>flannel</code>, <code>OpenVSwitch</code>æä¾›çš„<code>VxLAN tunnel</code>ã€‚å®˜æ–¹åˆ—ä¸¾äº†æ›´å¤šçš„<code>overlay network</code>å®ç°ï¼Œ<a href="https://kubernetes.io/docs/concepts/cluster-administration/networking/">å‚è€ƒé“¾æ¥</a>ã€‚</p><h3 id="Pod-to-Service"><a class="header-anchor" href="#Pod-to-Service"></a>Pod-to-Service</h3><p>ä½œä¸ºå‰ç«¯çš„<code>Service</code>ä¸ä½œä¸ºåç«¯çš„<code>Pods</code>ä¹‹é—´æ˜¯é€šè¿‡<code>kubernetes</code>çš„ç»„ä»¶<code>kube-proxy</code>å®ç°é€šä¿¡çš„ã€‚<code>kube-proxy</code>ä¸º<code>Service</code>å®ç°äº†è™šæ‹ŸIPçš„å½¢å¼ï¼Œå³<code>ClusterIP</code>ã€‚æœ‰ä¸¤ç§ä»£ç†æ¨¡å¼ï¼Œ<code>userspace</code>å’Œ<code>iptables</code>ã€‚</p><ul><li><code>userspace</code>æ¨¡å¼ä¸‹ï¼Œéœ€è¦åœ¨æœ¬<code>node</code>ä¸Šåˆ†é…<code>proxy port</code>ï¼Œè¯¥portè¢«ä»£ç†åˆ°åç«¯çš„<code>Pods</code>ï¼Œè¿™æ ·æ¥è‡ª<code>ClusterIP:Port</code>çš„ä¿¡æ¯è¢«é‡å®šå‘åˆ°<code>proxy port</code>ï¼Œç„¶åä»£ç†åˆ°åç«¯çš„<code>Pods</code>ã€‚</li><li><code>iptables</code>æ¨¡å¼ä¸‹ï¼Œ<code>kube-proxy</code>é€šè¿‡ç›´æ¥å¢åˆ <code>iptables</code>è§„åˆ™å®ç°é‡å®šå‘è½¬å‘ã€‚å®ƒæ¯”<code>userspace</code>æ¨¡å¼æ›´å¿«æ›´å¯é ï¼Œç¼ºç‚¹æ˜¯å½“å‰<code>Pod</code>æ— å“åº”æ—¶ï¼Œå®ƒæ— æ³•è‡ªåŠ¨é‡è¯•å…¶ä»–<code>Pod</code>ï¼Œéœ€è¦å€ŸåŠ©<code>readiness probes</code>å®ç°ã€‚</li></ul><p>å…³äºä¸¤ç§æ¨¡å¼æ›´è¯¦ç»†çš„æè¿°å‚è€ƒ<a href="https://kubernetes.io/docs/concepts/services-networking/service/">å®˜ç½‘æ–‡æ¡£</a></p><h3 id="Service-to-External"><a class="header-anchor" href="#Service-to-External"></a>Service-to-External</h3><p><code>Service</code>æ˜¯ä»¥<code>ClusterIP</code>çš„å½¢å¼å¯¹å¤–æä¾›æœåŠ¡çš„ï¼Œä½†<code>ClusterIP</code>æ˜¯é›†ç¾¤å†…çš„è™šæ‹ŸIPç½‘ç»œã€‚é‚£ä¹ˆå’Œé›†ç¾¤å¤–æ˜¯å¦‚ä½•é€šä¿¡çš„å‘¢ï¼Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç°ï¼š</p><ul><li><p><code>NodePort</code>: <code>kubernetes</code>ä»é…ç½®çš„ç«¯å£èŒƒå›´(é»˜è®¤é…ç½®30000-32767)å†…åˆ†é…ä¸€ä¸ªç«¯å£ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šæŠŠè¯¥ç«¯å£ä¸Šçš„ä¿¡æ¯è½¬å‘åˆ°<code>Service</code>ä¸­ã€‚è¿™ç§æ–¹å¼å¯ä»¥é€šè¿‡é›†ç¾¤å†…çš„ä»»ä¸€èŠ‚ç‚¹<code>NodeIP:NodePort</code>è®¿é—®åˆ°<code>Service</code>ã€‚è¿™æ„å‘³ç€æ•´ä¸ªé›†ç¾¤æœ€å¤šåªæ”¯æŒ6ä¸‡å¤šä¸ªè¿™ç§ç±»å‹çš„æœåŠ¡ã€‚è¯¥ç±»å‹çš„æœåŠ¡åŒæ ·ä¼šåˆ†é…ä¸€ä¸ªå†…éƒ¨çš„<code>ClusterIP</code>ã€‚</p></li><li><p><code>LoadBalancer</code>: ä¾èµ–äºå¤–éƒ¨äº‘æä¾›å•†æä¾›çš„æœåŠ¡å‡è¡¡å™¨ï¼Œè¿™åŒæ ·éœ€è¦<code>kubernetes</code>æœ‰ç›¸åº”çš„æ’ä»¶æ”¯æŒï¼Œå…·ä½“çš„æœåŠ¡å‡è¡¡ç­–ç•¥ç”±å¤–éƒ¨å‡è¡¡å™¨è´Ÿè´£ï¼Œä¿¡æ¯å°†è¢«å®šå‘åˆ°åç«¯çš„<code>Pods</code>ã€‚è¿™ç§ç±»å‹çš„æœåŠ¡ä¸‹ï¼ŒæŸäº›äº‘æä¾›å•†æ”¯æŒé…ç½®<code>LoadBalancerIP</code>ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œä¸Šè¿°çš„<code>ClusterIP</code>å’Œ<code>NodePort</code>ä¹ŸåŒæ ·ä¼šåˆ†é…ä»¥ä¾¿æ­£ç¡®çš„è·¯ç”±åˆ°<code>Service</code>ã€‚</p></li><li><p><code>ExternalName</code>: è¯¥ç±»å‹å’Œä¸Šè¿°å‡ ç§ä¸ä¸€æ ·ï¼Œå®ƒä¸éœ€è¦ä»£ç†æˆ–è½¬å‘ï¼Œå®ƒæ˜¯é€šè¿‡<code>kube-dns</code>è§£æ<code>CNAME</code>è®°å½•çš„æ–¹å¼é‡å®šå‘urlå®ç°çš„ã€‚</p></li></ul><p>ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼Œ<code>ClusterIP</code>, <code>NodePort</code>, <code>LoadBalancer</code>è¿™ä¸‰ç§ç±»å‹æ˜¯å±‚å±‚åµŒå¥—å®ç°çš„ã€‚ä½†å¯¹äº‘æä¾›å•†æ²¡æœ‰ä¸¥æ ¼è¦æ±‚è¿™æ ·åšï¼Œåªæ˜¯ç›®å‰çš„APIæ˜¯è¿™æ ·çš„ã€‚</p><p>é™¤äº†è¿™å‡ ç§æœåŠ¡ç±»å‹ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨<code>ExternalIPs</code>å®ç°é›†ç¾¤å†…å¤–çš„äº’é€šï¼Œæ‰€è°“çš„<code>ExternalIP</code>æ˜¯æŒ‡èƒ½å¤Ÿè¢«è·¯ç”±åˆ°<code>kubernetes</code>èŠ‚ç‚¹çš„IPçš„ï¼Œåœ¨å…¬æœ‰äº‘ä¸Šï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„å…¬ç½‘IPã€‚<code>ExternelIPs</code>å¯ä»¥å’Œä»»ä¸€ç±»å‹çš„<code>Service</code>ä¸€èµ·ä½¿ç”¨ã€‚</p><p>å…·ä½“é…ç½®æ¨¡æ¿å¯å‚è€ƒ<a href="https://kubernetes.io/docs/concepts/services-networking/service/">å®˜ç½‘æ–‡æ¡£</a></p><h2 id="æ€»ç»“"><a class="header-anchor" href="#æ€»ç»“"></a>æ€»ç»“</h2><p>è‡³æ­¤ï¼Œå·²æ¶µç›–ç½‘ç»œæ–¹æ¡ˆå›¾é‡Œçš„æ‰€æœ‰é€šä¿¡ç±»å‹ã€‚åœ¨ä½¿ç”¨ä¸Šåšå‡ ç‚¹æ€»ç»“ï¼š</p><ul><li><p><code>Pod</code>(åº”ç”¨)çš„å„<code>Container</code>(è¿›ç¨‹)é€šä¿¡å¯ä»¥çœ‹ä½œæ˜¯<code>VM</code>ä¸Šå„è¿›ç¨‹é—´çš„é€šä¿¡ï¼Œ<code>Pod</code>ç±»ä¼¼<code>VM</code>ã€‚</p></li><li><p><code>Pod</code>ä½œä¸ºåŠŸèƒ½æä¾›æ–¹æ—¶ï¼Œä»¥<code>Service</code>æ–¹å¼æä¾›ï¼Œå±è”½åç«¯çš„å…·ä½“å®ç°ï¼Œä¸ç›´æ¥å¯¹å¤–æš´éœ²<code>Pod</code>ã€‚</p></li><li><p>é›†ç¾¤<code>node</code>é—´çš„<code>overlay</code>ç½‘ç»œä¸è¦å’Œå¤§ç½‘äº’é€šï¼Œä¿æŒé›†ç¾¤çš„ç§å¯†æ€§ã€‚éœ€è¦å’Œå¤–éƒ¨äº¤äº’æ—¶ï¼Œé€šè¿‡<code>Service</code>ã€‚</p></li><li><p>é›†ç¾¤å†…å¤–é€šä¿¡ï¼Œå¤§ç½‘IPå……è¶³æ—¶ï¼Œä½¿ç”¨<code>ExternalIPs</code>ï¼Œä¸æ‹˜æ³¥äº<code>Service</code>ç±»å‹ï¼Œå¦åˆ™ä½¿ç”¨<code>NodePort</code>ï¼Œç§æœ‰é›†ç¾¤ä¸‹åŸºæœ¬å¤Ÿç”¨ã€‚</p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;code&gt;Kubernetes&lt;/code&gt;æ˜¯ä¸€ä¸ªå¼€æºçš„å®¹å™¨é›†ç¾¤ç®¡ç†å¹³å°ï¼Œå¯ç”¨æ¥è‡ªåŠ¨åŒ–éƒ¨ç½²ã€æ‰©å±•å’Œè¿ç»´åº”ç”¨å®¹å™¨ã€‚å…³äºè¿™ä¸ªå¹³å°æœ¬èº«çš„å„ç»„ä»¶åŠå…·ä½“åŠŸèƒ½ä¸åœ¨æœ¬æ–‡è®¨è®ºèŒƒå›´ï¼Œæœ¬æ–‡ä¸»è¦å…³æ³¨&lt;code&gt;kubernetes&lt;/code&gt;çš„ç½‘ç»œæ–¹æ¡ˆã€‚åœ¨è®¨è®ºç½‘ç»œä¹‹å‰æœ‰å¿…è¦å…ˆäº†è§£ä¸‹ç›¸å…³æ¦‚å¿µï¼Œ</summary>
      
    
    
    
    <category term="æŠ€æœ¯ç§¯ç´¯" scheme="http://blog.cuicc.com/categories/%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/"/>
    
    
    <category term="kubernetes" scheme="http://blog.cuicc.com/tags/kubernetes/"/>
    
    <category term="docker" scheme="http://blog.cuicc.com/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>Sails:Node.jsçš„MVCæ¡†æ¶</title>
    <link href="http://blog.cuicc.com/blog/2017/04/09/Sails-MVC-framework-for-Node-js/"/>
    <id>http://blog.cuicc.com/blog/2017/04/09/Sails-MVC-framework-for-Node-js/</id>
    <published>2017-04-09T08:57:09.000Z</published>
    <updated>2025-03-16T07:58:25.515Z</updated>
    
    <content type="html"><![CDATA[<p><code>Sails</code>æ˜¯<code>Node.js</code>ä¸Šæœ€æµè¡Œçš„<code>MVC</code>æ¶æ„æ¨¡å¼çš„webæ¡†æ¶ï¼Œåœ¨è®¾è®¡ä¸Šå‚è€ƒäº†<code>Ruby on Rails</code>çš„MVCæ¡†æ¶æ¨¡å¼ï¼Œå®ƒæ˜¯åŸºäº<code>Node.js</code>ä¸Šæœ€ç«çˆ†çš„webæ¡†æ¶<code>Express</code>å¼€å‘çš„ã€‚ å’Œå…¶ä»–çš„MVCæ¡†æ¶ä¸åŒçš„æ˜¯ï¼ŒSailsçš„<code>MC</code>åœ¨æœåŠ¡ç«¯ï¼Œè€Œ<code>V</code>åœ¨å®¢æˆ·ç«¯ï¼Œæä¾›å¯æ‰©å±•çš„ã€é¢å‘æœåŠ¡çš„æ•°æ®é©±åŠ¨APIã€‚åœ¨ä½¿ç”¨ä¸Šå’Œå…¶ä»–çŸ¥åçš„MVCæ¡†æ¶ç±»ä¼¼ï¼Œå¦‚PHPçš„<code>CodeIgnite</code>ã€‚</p><h2 id="åŸºæœ¬ç”¨æ³•"><a class="header-anchor" href="#åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h2><p><code>Sails</code>åœ¨ä½¿ç”¨ä¸Šæä¾›äº†æå¤§çš„ä¾¿åˆ©æ€§ï¼Œåˆ›å»ºä¸€ä¸ªé¡¹ç›®ä½¿ç”¨å‘½ä»¤<code>sails new &lt;project name&gt;</code>ï¼Œè¿è¡Œåˆ™åœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œ<code>sails lift</code>ï¼Œç„¶åå¯ä»¥é€šè¿‡<code>ip:1337</code>è®¿é—®ï¼Œå¦‚<code>localhost:1337</code>ã€‚</p><p>åœ¨å¼€å‘ä¸Šå¯ä½¿ç”¨å‘½ä»¤<code>sails generate api cats</code>æ¥ç”Ÿæˆ<code>controller</code>å’Œ<code>model</code>ï¼Œåˆ†åˆ«æ˜¯<code>api/controllers/CatsController.js</code>å’Œ<code>api/models/Cats.js</code>ã€‚<code>view</code>åˆ™æ”¾åœ¨<code>views</code>ç›®å½•ä¸‹ï¼Œæ”¯æŒå¤šç§æ¨¡æ¿è¯­è¨€ï¼Œå¦‚<code>ejs</code>, <code>swig</code>ç­‰ã€‚</p><p>è¿™é‡Œä¸æ·±å…¥æ¢è®¨åŸºæœ¬ç”¨æ³•ï¼Œä¸»è¦ä¾§é‡åœ¨<code>Sails</code>æ¯”è¾ƒå…·æœ‰ä»£è¡¨æ€§çš„ä¸¤ä¸ªåŠŸèƒ½ä¸Šï¼Œ<code>Blueprints</code>å’Œ<code>Waterline</code>ã€‚</p><h2 id="Blueprints"><a class="header-anchor" href="#Blueprints"></a>Blueprints</h2><p><code>Blueprints</code>æ—¨åœ¨å‡å°‘ä»£ç æ•°é‡åŠèŠ‚çº¦æ—¶é—´ï¼Œå®ƒæä¾›äº†ä¸€ç§å¿«é€Ÿç”ŸæˆAPI <code>routes</code>å’Œ<code>actions</code>(actionsæ˜¯æŒ‡controlleré‡Œå®šä¹‰çš„æ–¹æ³•)çš„æ–¹æ³•ã€‚<code>blueprint API</code>ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š<code>blueprint routes</code>å’Œ<code>blueprint actions</code>ã€‚</p><h3 id="Blueprint-Actions"><a class="header-anchor" href="#Blueprint-Actions"></a>Blueprint Actions</h3><p><code>Blueprint actions</code>æ˜¯æŒ‡ä¸€äº›é€šç”¨æ–¹æ³•ï¼Œå®ƒä»¬ä½œç”¨äºä»»ä½•<code>controller</code>æ¥æ“ä½œå®ƒçš„åŒå<code>model</code>ï¼Œä¾‹å¦‚<code>CatsController.js</code>éœ€è¦æœ‰<code>Cats.js</code>ã€‚è¿™äº›æ–¹æ³•æ˜¯å†…ç½®æ–¹æ³•ï¼Œå³ä½¿<code>controller</code>æ˜¯ç©ºçš„æƒ…å†µä¸‹ä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚æ–¹æ³•å¦‚ä¸‹ï¼š<code>find</code>, <code>findOne</code>, <code>create</code>, <code>update</code>, <code>destroy</code>, <code>populate</code>, <code>add</code>, <code>remove</code>ï¼Œè¿™äº›æ–¹æ³•ä¹Ÿå°±æ˜¯ä¸‹é¢çš„æ•°æ®æ¨¡å‹æ“ä½œçš„<code>Waterline</code>æ‰€æä¾›çš„æ–¹æ³•ã€‚</p><h3 id="Blueprint-routes"><a class="header-anchor" href="#Blueprint-routes"></a>Blueprint routes</h3><p><code>Blueprint routes</code>æ˜¯åœ¨æ‰§è¡Œ<code>sails lift</code>æ—¶æ ¹æ®<code>controller</code>, <code>model</code>, <code>config</code>è‡ªåŠ¨ç”Ÿæˆçš„è·¯ç”±ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªrouteæŒ‡å‘ä¸€ä¸ªactionã€‚æœ‰ä»¥ä¸‹ä¸‰ç§è·¯ç”±é…ç½®ï¼Œé…ç½®æ–‡ä»¶ä½äº<code>config/blueprints.js</code>ã€‚</p><ul><li><p><strong>RESTful routes</strong> å¯é€šè¿‡RESTfulæ¥å£ç›´æ¥å¯¹modelè¿›è¡ŒCRUDæ“ä½œã€‚å¦‚<code>GET /user</code>å°†è·å–useråˆ—è¡¨ï¼Œå¯¹åº”äº<code>user.find()</code>; <code>POST /user</code>å°†å¢åŠ ä¸€ä¸ªuserï¼Œå¯¹åº”äº<code>user.create()</code>ã€‚RESTfulè·¯ç”±æœ€å¥½ä½¿ç”¨<code>policies</code>è¿›è¡Œä¿æŠ¤ä»¥å…æœªæˆæƒçš„ç”¨æˆ·è®¿é—®ã€‚</p></li><li><p><strong>Shortcut routes</strong> å’Œ<code>RESTful routes</code>ç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯å¯ç›´æ¥æŠŠ<code>action</code>ç¼–ç åœ¨urlä¸­ï¼Œå¦‚<code>/user/create?name=joe</code>å¯å®ç°ä¸Šé¢çš„<code>POST</code>æ–¹æ³•çš„åŠŸèƒ½ã€‚è€Œåœ¨è¿™é‡Œéƒ½æ˜¯<code>GET</code>æ“ä½œã€‚è¯¥è·¯ç”±é€‚åˆåœ¨å¼€å‘è°ƒè¯•é˜¶æ®µä½¿ç”¨ï¼Œäº§å“ç¯å¢ƒæœ€å¥½å…³é—­ã€‚</p></li><li><p><strong>Action routes</strong> å½“ä½ åœ¨<code>controller</code>ä¸­å®ç°äº†ä¸€äº›è‡ªå®šä¹‰çš„æ–¹æ³•æ—¶ï¼Œè¯¥åŠŸèƒ½å¯è‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„è·¯ç”±ï¼Œå¦‚<code>CatsController.js</code>ä¸­æœ‰æ–¹æ³•<code>meow</code>ï¼Œé‚£ä¹ˆå¯é€šè¿‡<code>/cats/meow</code>æ¥å£è®¿é—®ã€‚è¿™é‡Œå’Œå…¶ä»–<code>MVC</code>è‡ªåŠ¨ç”Ÿæˆ<code>controller</code>çš„è·¯ç”±ä¸€æ ·çš„ç”¨æ³•ã€‚å’Œä¸Šé¢ä¸åŒçš„æ˜¯ï¼Œè‡ªå®šä¹‰æ–¹æ³•æ—¶åŒå<code>model</code>ä¸æ˜¯å¿…é¡»çš„ã€‚</p></li></ul><h2 id="Waterline"><a class="header-anchor" href="#Waterline"></a>Waterline</h2><p><code>Waterline</code>æ˜¯æ•°æ®æ— å…³çš„ä¸€ä¸ªæŠ½è±¡é€‚é…å±‚ï¼Œè®©ä½ åœ¨æ“ä½œæ•°æ®æ—¶æ— éœ€å…³å¿ƒåº•å±‚æ•°æ®åº“ç±»å‹ï¼Œä¸ç”¨å†™æŸç§æ•°æ®åº“ä¸“ç”¨çš„æ“ä½œä»£ç ã€‚å…¶åº•å±‚æ”¯æŒ<code>SQL</code>å‹å’Œ<code>NoSQL</code>å‹æ•°æ®åº“, å¦‚<code>MySQL</code>, <code>MongoDB</code>ç­‰ã€‚å¯¹æ¥æŸä¸€å…·ä½“æ•°æ®åº“æ—¶ï¼Œä½ æ‰€éœ€è¦åšçš„å°±æ˜¯åœ¨<code>config/connections.js</code>é‡Œé…ç½®é€‚é…å™¨ï¼Œåœ¨<code>config/models.js</code>é…ç½®<code>models</code>é»˜è®¤è¿æ¥çš„å…·ä½“é€‚é…å™¨ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åœ¨æŸä¸€å…·ä½“<code>model</code>é‡ŒæŒ‡å®šè¿æ¥çš„é€‚é…å™¨ã€‚è¿™æ ·ï¼Œéœ€è¦åˆ‡æ¢æ•°æ®åº“æ—¶ï¼Œåªéœ€ä¿®æ”¹è¿æ¥çš„é€‚é…å™¨å³å¯ï¼Œä¸éœ€è¦ä¿®æ”¹ä¸€è¡Œä»£ç ã€‚</p><p><code>model</code>ä¸­çš„æ•°æ®æ¨¡å‹ç»“æ„å¦‚ä¸‹ï¼Œè™½ç„¶æŸäº›å­—æ®µçœ‹èµ·æ¥æ—¶<code>SQL</code>å‹æ•°æ®åº“ä¸“ç”¨çš„ï¼Œä½†å®šä¹‰äº†è¿™äº›å­—æ®µå¹¶ä¸å½±å“<code>NoSQL</code>å‹æ•°æ®åº“ä½¿ç”¨ã€‚è¿™é‡Œè¯¥<code>model</code>ä¸­çš„<code>connection</code>å®šä¹‰ä¼šè¦†ç›–æ‰<code>config/models.js</code>é‡Œçš„å®šä¹‰ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Model example</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">connection</span>: <span class="string">&#x27;MySQLDB&#x27;</span>,</span><br><span class="line">  <span class="attr">tableName</span>: <span class="string">&#x27;users&#x27;</span>,</span><br><span class="line">  <span class="attr">attributes</span>: &#123;</span><br><span class="line">    <span class="attr">id</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;integer&#x27;</span>,</span><br><span class="line">      <span class="attr">unique</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">primaryKey</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">columnName</span>: <span class="string">&#x27;the_primary_key&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">name</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;string&#x27;</span>,</span><br><span class="line">      <span class="attr">columnName</span>: <span class="string">&#x27;full_name&#x27;</span></span><br><span class="line">    &#125;ï¼Œ</span><br><span class="line"></span><br><span class="line">    <span class="attr">getFullName</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="attr">enroll</span>: <span class="keyword">function</span> (<span class="params">options, cb</span>) &#123;</span><br><span class="line">       ...</span><br><span class="line">       <span class="title function_">cb</span>(err, data);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»ä¸Šé¢çš„<code>model</code>ç¤ºä¾‹å¯ä»¥çœ‹åˆ°ï¼Œé™¤äº†å±æ€§å­—æ®µå®šä¹‰å¤–ï¼Œè¿˜æœ‰ä¸€äº›å‡½æ•°å®šä¹‰ã€‚è¿™é‡Œçœ‹åˆ°çš„æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„å‡½æ•°ï¼Œ<code>Sails</code>è¿˜æä¾›äº†ä¸€äº›å†…ç½®å‡½æ•°ã€‚æˆ‘ä»¬è¿˜å‘ç°å‡½æ•°å¯ä»¥åœ¨å±æ€§å†…ï¼Œä¹Ÿå¯ä»¥åœ¨å±æ€§å¤–ï¼Œä¸‹é¢è¯¦ç»†ä»‹ç»ä¸€ä¸‹ã€‚</p><h3 id="Model-Method"><a class="header-anchor" href="#Model-Method"></a>Model Method</h3><p>æ¨¡å‹æ–¹æ³•ä¹Ÿç§°ä¸ºé™æ€æ–¹æ³•æˆ–è€…ç±»æ–¹æ³•ï¼Œæ”¾åœ¨é¢å‘å¯¹è±¡é‡Œå¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯è¯¥ç±»æä¾›çš„é™æ€æ–¹æ³•ï¼Œä¸éœ€è¦å®ä¾‹åŒ–å¯ç›´æ¥ä½¿ç”¨çš„æ–¹æ³•ã€‚ä¸Šé¢æ”¾åœ¨<code>attributes</code>å¤–å®šä¹‰çš„æ–¹æ³•å°±æ˜¯æ¨¡å‹æ–¹æ³•ã€‚<code>Sails</code>æä¾›çš„å†…ç½®æ¨¡å‹æ–¹æ³•æ¶µç›–äº†å¢åˆ æ”¹æŸ¥ï¼Œå…·ä½“æ–¹æ³•åˆ—è¡¨çœ‹<a href="http://sailsjs.com/documentation/reference/waterline-orm/models">å®˜æ–¹æ–‡æ¡£</a>ã€‚é™¤äº†è¿™äº›æ–¹æ³•å¤–ï¼Œè¿˜æ”¯æŒåŠ¨æ€æŸ¥æ‰¾åŠŸèƒ½ï¼Œä»¥ä¸Šé¢çš„<code>model</code>ä¸ºä¾‹ï¼Œè¯¥<code>model</code>æœ‰å±æ€§<code>id</code>å’Œ<code>name</code>ï¼Œé‚£ä¹ˆå°±æœ‰åŠ¨æ€æŸ¥æ‰¾æ–¹æ³•<code>findById</code>å’Œ<code>findByName</code>ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ¨¡å‹é™æ€æ–¹æ³•éƒ½æ˜¯å¼‚æ­¥æ–¹æ³•ï¼Œæ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯è¾“å…¥å€¼ï¼Œç¬¬äºŒä¸ªæ˜¯å›è°ƒå‡½æ•°ã€‚è¾“å…¥å€¼æœ€å¥½æ˜¯ä¸€ä¸ªå®Œæ•´è®°å½•æˆ–è€…æ—¶ä¸»é”®ã€‚è‡ªå®šä¹‰æ¨¡å‹é™æ€æ–¹æ³•çš„å¥½å¤„æ˜¯ä½ å¯ä»¥æŠŠæ•°æ®æ“ä½œæ–¹æ³•æ”¾åœ¨<code>controller</code>ä¹‹å¤–ï¼Œæ”¾åœ¨<code>model</code>é‡Œï¼Œè¿™æ ·ä½ åœ¨å…¶ä»–<code>controller</code>ä¸­ä¹Ÿå¯ä»¥é‡ç”¨ï¼Œå½“ç„¶å‰ææ˜¯ä¸<code>req</code>å’Œ<code>res</code>æ— å…³çš„æ“ä½œã€‚</p><h3 id="Attribute-Method"><a class="header-anchor" href="#Attribute-Method"></a>Attribute Method</h3><p>å±æ€§æ–¹æ³•ä¹Ÿç§°ä¸ºè®°å½•æ–¹æ³•æˆ–è€…å®ä¾‹æ–¹æ³•ï¼Œé¡¾åæ€ä¹‰ï¼Œå®ƒæ˜¯ä½œç”¨äºæŸä¸€å®ä¾‹æˆ–æŸä¸€è®°å½•çš„æ–¹æ³•ã€‚æ”¾åœ¨<code>attributes</code>å†…å®šä¹‰çš„æ–¹æ³•å°±æ˜¯è‡ªå®šä¹‰å±æ€§æ–¹æ³•ï¼Œå½“ç„¶<code>Sails</code>ä¹Ÿæä¾›äº†ä¸€äº›å†…ç½®çš„å±æ€§æ–¹æ³•ï¼ŒåŒ…æ‹¬<code>.toJSON()</code>, <code>.save()</code>, <code>.toObject()</code>ï¼Œè¯¦ç»†ä»‹ç»çœ‹<a href="http://sailsjs.com/documentation/reference/waterline-orm/records">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><p>é™¤äº†å†…ç½®æ–¹æ³•<code>.save()</code>å¤–ï¼Œå±æ€§æ–¹æ³•éƒ½åº”å½“æ˜¯åŒæ­¥çš„æ–¹æ³•ã€‚å› ä¸ºè‡ªå®šä¹‰å¼‚æ­¥å±æ€§æ–¹æ³•æ—¶ï¼Œå¾ˆéš¾ä¿è¯ä¸å‡ºç°æ„å¤–ç»“æœã€‚åœ¨å‘½åå±æ€§æ–¹æ³•æ—¶ï¼Œæœ€å¥½åŠ ä¸Šå‰ç¼€<code>is</code>ï¼Œ<code>get</code>ç­‰ä»¥åŒºåˆ†å…¶ä»–å±æ€§ï¼Œå¹¶å¯¹æ–¹æ³•æä¾›ä¸€å®šçš„è‡ªè§£é‡Šã€‚</p><h3 id="moreâ€¦"><a class="header-anchor" href="#moreâ€¦"></a>moreâ€¦</h3><p>è¿™é‡Œåªæ˜¯ç®¡ä¸­çª¥è±¹ï¼Œåªä»‹ç»äº†æœ€è¡¨é¢çš„å†°å±±ä¸€è§’ï¼Œä»¥è¯´æ˜Waterlineçš„åŠŸèƒ½å¼ºå¤§ï¼Œå…¶ä»–è¿˜æœ‰<code>Associations</code>, <code>Validations</code>ç­‰ç­‰ï¼Œå¦‚æœ‰å…´è¶£ï¼Œå¼ºçƒˆå»ºè®®çœ‹ä¸€ä¸‹<a href="http://sailsjs.com/documentation/concepts/models-and-orm">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><h2 id="å®˜æ–¹æ–‡æ¡£"><a class="header-anchor" href="#å®˜æ–¹æ–‡æ¡£"></a>å®˜æ–¹æ–‡æ¡£</h2><ul><li><p>å·¥ç¨‹ç»“æ„è¯·å‚è€ƒ<a href="http://sailsjs.com/documentation/anatomy">APP Structure</a></p></li><li><p>åŸºæœ¬æ¦‚å¿µè¯·å‚è€ƒ<a href="http://sailsjs.com/documentation/concepts">Concepts</a></p></li><li><p>æ¥å£ä½¿ç”¨è¯·å‚è€ƒ<a href="http://sailsjs.com/documentation/reference">API Reference</a></p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;code&gt;Sails&lt;/code&gt;æ˜¯&lt;code&gt;Node.js&lt;/code&gt;ä¸Šæœ€æµè¡Œçš„&lt;code&gt;MVC&lt;/code&gt;æ¶æ„æ¨¡å¼çš„webæ¡†æ¶ï¼Œåœ¨è®¾è®¡ä¸Šå‚è€ƒäº†&lt;code&gt;Ruby on Rails&lt;/code&gt;çš„MVCæ¡†æ¶æ¨¡å¼ï¼Œå®ƒæ˜¯åŸºäº&lt;code&gt;Node.js&lt;/code&gt;</summary>
      
    
    
    
    <category term="æŠ€æœ¯ç§¯ç´¯" scheme="http://blog.cuicc.com/categories/%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/"/>
    
    
    <category term="Node.js" scheme="http://blog.cuicc.com/tags/Node-js/"/>
    
    <category term="Sails" scheme="http://blog.cuicc.com/tags/Sails/"/>
    
    <category term="MVC" scheme="http://blog.cuicc.com/tags/MVC/"/>
    
  </entry>
  
  <entry>
    <title>Node.jsæŠ›å¼‚å¸¸ECONNRESETé€€å‡º</title>
    <link href="http://blog.cuicc.com/blog/2017/03/26/nodejs-ECONNRESET/"/>
    <id>http://blog.cuicc.com/blog/2017/03/26/nodejs-ECONNRESET/</id>
    <published>2017-03-26T06:15:53.000Z</published>
    <updated>2025-03-16T07:58:25.515Z</updated>
    
    <content type="html"><![CDATA[<p>é¡¹ç›®ä¸­éœ€è¦å¯¹æ¥å…¬å¸åŸŸè´¦æˆ·å¯¹å…¶ä»–æ¨¡å—æä¾›é‰´æƒæœåŠ¡ã€‚ä¸ºæ–¹ä¾¿å®ç°Restfulæ¥å£ï¼Œä»¥åŠå­¦ä¹ ä¸€é—¨æ²¡ç”¨è¿‡çš„æŠ€æœ¯ï¼Œäºæ˜¯å†³å®šä½¿ç”¨Node.jså¼€å‘å®ç°ã€‚</p><h2 id="LDAPé‰´æƒæœåŠ¡æ¥å£"><a class="header-anchor" href="#LDAPé‰´æƒæœåŠ¡æ¥å£"></a>LDAPé‰´æƒæœåŠ¡æ¥å£</h2><p>è¯¥æœåŠ¡å®ç°ä¸¤ä¸ªåŠŸèƒ½ï¼Œä¸€ä¸ªæ˜¯å’ŒLDAPæœåŠ¡å™¨å¯¹æ¥é‰´æƒåŸŸç™»å½•ï¼Œä¸€ä¸ªæ˜¯å¯¹å¤–ä»¥Restful APIçš„æ–¹å¼æä¾›æœåŠ¡ã€‚Node.jsçš„åº“<a href="http://ldapjs.org/">ldapjs</a>å’Œ<a href="https://expressjs.com/">Express</a>å¯ä»¥å¾ˆç®€å•çš„å®Œæˆè¿™ä¸¤ä¸ªåŠŸèƒ½ã€‚å®ç°å¤§ä½“æ¡†æ¶å¦‚ä¸‹</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> ldap = <span class="built_in">require</span>(<span class="string">&#x27;ldapjs&#x27;</span>);</span><br><span class="line">...</span><br><span class="line"><span class="keyword">var</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">post</span>(</span><br><span class="line">    <span class="string">&#x27;auth&#x27;</span>,</span><br><span class="line">    <span class="keyword">function</span>(<span class="params">req, res</span>)&#123;</span><br><span class="line">        <span class="keyword">var</span> user = &#123;</span><br><span class="line">            <span class="attr">username</span>: req.<span class="property">body</span>.<span class="property">username</span>,</span><br><span class="line">            <span class="attr">password</span>: req.<span class="property">body</span>.<span class="property">password</span>,</span><br><span class="line">            dn      : <span class="string">&#x27;&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> adminClient = ldap.<span class="title function_">creatClient</span>(&#123;<span class="attr">url</span>:url&#125;);</span><br><span class="line">        adminClient.<span class="title function_">bind</span>(admin.<span class="property">dn</span>, admin.<span class="property">password</span>, <span class="keyword">function</span>(<span class="params">err</span>)&#123;</span><br><span class="line">            assert.<span class="title function_">ifError</span>(err);</span><br><span class="line"></span><br><span class="line">            adminClient.<span class="title function_">search</span>(base, opts, <span class="keyword">function</span>(<span class="params">err, search</span>)&#123;</span><br><span class="line">                search.<span class="title function_">on</span>(<span class="string">&#x27;searchEntry&#x27;</span>, <span class="keyword">function</span>(<span class="params">entry</span>)&#123;</span><br><span class="line">                    user.<span class="property">dn</span> = entry.<span class="property">dn</span>; </span><br><span class="line">                    <span class="keyword">var</span> userClient = ldap.<span class="title function_">createClient</span>(&#123;<span class="attr">url</span>:url&#125;);</span><br><span class="line">                    userClient.<span class="title function_">bind</span>(user.<span class="property">dn</span>, user.<span class="property">password</span>, <span class="keyword">function</span>(<span class="params">err</span>)&#123;</span><br><span class="line">                        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">                            res.<span class="title function_">json</span>(&#123;<span class="string">&#x27;status&#x27;</span>:<span class="number">2</span>, <span class="string">&#x27;message&#x27;</span>:<span class="string">&#x27;invalid password&#x27;</span>&#125;);</span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                        res.<span class="title function_">json</span>(&#123;<span class="string">&#x27;status&#x27;</span>:<span class="number">0</span>, <span class="string">&#x27;message&#x27;</span>:<span class="string">&#x27;auth ok&#x27;</span>&#125;);</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;);</span><br><span class="line"></span><br><span class="line">                search.<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>, <span class="keyword">function</span>(<span class="params">err</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(user.<span class="property">dn</span> === <span class="string">&#x27;&#x27;</span>)&#123;</span><br><span class="line">                        res.<span class="title function_">json</span>(&#123;<span class="string">&#x27;status&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;message&#x27;</span>: <span class="string">&#x27;invalid user&#x27;</span>&#125;);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">8080</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;listening on port 8080&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å®Œæˆåï¼Œä½¿ç”¨postmanæµ‹è¯•äº†ä¸‹ï¼ŒåŠŸèƒ½æ²¡æœ‰é—®é¢˜ã€‚ä½†ç¨‹åºä¼šåœ¨åå‡ åˆ†é’ŸåæŠ›å‡ºå¼‚å¸¸ï¼Œé€€å‡ºæ‰§è¡Œã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">events.<span class="property">js</span>:<span class="number">72</span></span><br><span class="line">        <span class="keyword">throw</span> er; </span><br><span class="line">              ^</span><br><span class="line"><span class="title class_">Error</span>: read <span class="variable constant_">ECONNRESET</span></span><br><span class="line">    at <span class="title function_">errnoException</span> (net.<span class="property">js</span>:<span class="number">900</span>:<span class="number">11</span>)</span><br><span class="line">    at <span class="variable constant_">TCP</span>.<span class="property">onread</span> (net.<span class="property">js</span>:<span class="number">555</span>:<span class="number">19</span>)</span><br></pre></td></tr></table></figure><p>é‚Googleäº†ä¸€ä¸‹Nodejs ECONNRESETã€‚</p><h2 id="Node-js-ECONNRESET"><a class="header-anchor" href="#Node-js-ECONNRESET"></a>Node.js ECONNRESET</h2><p>stackoverflowä¸Šæœ‰ä¸€ä¸ªé—®ç­”ä¸“é—¨æ¢è®¨è¿™ä¸ª<a href="http://stackoverflow.com/questions/17245881/node-js-econnreset">é—®é¢˜</a>ï¼Œç®€å•æ‘˜å½•ä¸€ä¸‹å›ç­”</p><blockquote><p>â€œECONNRESETâ€ means the other side of the TCP conversation abruptly closed its end of the connection. This is most probably due to one or more application protocol errors. You could look at the API server logs to see if it complains about something.</p><footer><strong>e-sushi</strong><cite><a href="http://stackoverflow.com/a/17637900">ECONNRESET</a></cite></footer></blockquote><p>ECONNRESETè¡¨ç¤ºTCPä¼šè¯çš„å¦ä¸€ç«¯çªç„¶æ–­å¼€äº†è¿æ¥ã€‚å¾ˆå¤§å¯èƒ½æ€§æ˜¯ç”±åº”ç”¨çš„åè®®å‡ºé”™é€ æˆçš„ã€‚è¿™é‡Œæˆ‘æœ‰ä¸¤ä¸ªè¿æ¥ï¼Œä¸€ä¸ªæ˜¯Restfulæ¥å£çš„è¿æ¥ï¼Œä¸€ä¸ªæ˜¯ldapçš„è¿æ¥ã€‚</p><blockquote><p>I had a similar problem where apps started erroring out after an upgrade of Node. I believe this can be traced back to Node release v0.9.10 this item:</p><p>net: donâ€™t suppress ECONNRESET (Ben Noordhuis)</p><p>Previous versions wouldnâ€™t error out on interruptions from the client. A break in the connection from the client throws the error ECONNRESET in Node. I believe this is intended functionality for Node, so the fix (at least for me) was to handle the error, which I believe you did in unCaught exceptions. Although I handle it in the net.socket handler.</p><footer><strong>John Williams</strong><cite><a href="http://stackoverflow.com/a/17798353">ECONNRESET</a></cite></footer></blockquote><p>ä»Node v0.9.10å¼€å§‹ä¸å†å‹åˆ¶ECONNRESETï¼Œä¹‹å‰çš„ç‰ˆæœ¬ä»å®¢æˆ·ç«¯ä¸­æ–­æ—¶ä¸ä¼šæŠ¥é”™ã€‚ç°åœ¨ä»å®¢æˆ·ç«¯ä¸­æ–­ä¼šæŠ›å‡ºECONNRESETé”™è¯¯ï¼Œè¿™æ˜¯Nodeçš„é¢„æœŸåŠŸèƒ½ã€‚è§£å†³æ–¹æ³•æ˜¯å¤„ç†è¿™ä¸ªé”™è¯¯ï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªæœªæ•è·çš„å¼‚å¸¸ã€‚</p><h2 id="åŸå› åˆ†æ"><a class="header-anchor" href="#åŸå› åˆ†æ"></a>åŸå› åˆ†æ</h2><p>ç»¼ä¸Šå¯æ€»ç»“è¯¥é—®é¢˜çš„åŸå› ï¼š</p><ol><li>Nodeé€€å‡ºæ˜¯å› ä¸ºå‡ºç°æœªæ•è·çš„å¼‚å¸¸ï¼Œå¼‚å¸¸ä¸º<code>read ECONNRESET</code>é”™è¯¯ã€‚</li><li><code>ECONNRESET</code>æ˜¯å› ä¸ºTCPè¿æ¥çš„å¯¹ç«¯(é€šå¸¸æ˜¯server)çªç„¶æ–­å¼€äº†è¿æ¥ã€‚serverä¸€èˆ¬éƒ½è®¾ç½®äº†<code>keepalive</code>ï¼Œå¯¹äºä¸æ´»åŠ¨çš„è¿æ¥ä¼šè¶…æ—¶æ–­å¼€ã€‚</li><li>å®¢æˆ·ç«¯è¯·æ±‚å®Œæˆåæ²¡æœ‰ä¸»åŠ¨æ–­å¼€è¿æ¥ã€‚</li></ol><h2 id="è§£å†³æ–¹æ³•"><a class="header-anchor" href="#è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h2><p>ç®€å•çš„è§£å†³æ–¹æ³•å°±æ˜¯æ•è·è¿™ä¸ªå¼‚å¸¸ï¼Œå¦‚æœæ— æ³•å®šä½å‡ºå…·ä½“å‡ºè¿™ä¸ªå¼‚å¸¸çš„åœ°æ–¹ï¼Œå¯ä»¥åœ¨è¿›ç¨‹çº§æ•è·è¿›è¡Œåˆ†æã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">process.<span class="title function_">on</span>(<span class="string">&#x27;uncaughtException&#x27;</span>, <span class="keyword">function</span>(<span class="params">err</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">stack</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;NOT exit...&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è€Œåœ¨æœ¬ä¾‹ä¸­ï¼Œä½œä¸ºå®¢æˆ·ç«¯è¯·æ±‚çš„æ˜¯ldapï¼ŒldapæœåŠ¡å™¨æ–­å¼€äº†ä¸æ´»åŠ¨çš„è¿æ¥ï¼Œåº”è¯¥ç”±ldapæ¥æ•è·å¼‚å¸¸ï¼Œä½†<a href="http://ldapjs.org/client.html">å®˜æ–¹æ–‡æ¡£</a>å¹¶æ²¡æœ‰ç›¸å…³è¯´æ˜ã€‚åœ¨githubè¯¥åº“çš„<a href="https://github.com/mcavage/node-ldapjs/issues/318">issue</a>ä¸­æ‰¾åˆ°äº†æ•è·æ–¹æ³•ã€‚clientæœ‰ç›‘å¬erroräº‹ä»¶åŠŸèƒ½ï¼Œä»¥åŠå¯ä»¥è®¾ç½®clientè‡ªåŠ¨é‡è¿ï¼Œå®˜æ–¹æ–‡æ¡£æœªæ›´æ–°ã€‚åŸºæœ¬ç”¨æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> client = ldap.<span class="title function_">creatClient</span>(&#123;<span class="attr">url</span>:url, <span class="attr">reconnect</span>: <span class="literal">true</span>&#125;);</span><br><span class="line">...</span><br><span class="line">client.<span class="title function_">on</span>(<span class="string">&#x27;error&#x27;</span>, <span class="keyword">function</span>(<span class="params">err</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å¯¹äºå°çš„åº”ç”¨è¯·æ±‚è€Œè¨€ï¼Œclientä¸»åŠ¨æ–­å¼€è¿æ¥æ˜¯æ¯”è¾ƒä¼˜é›…çš„åšæ³•ï¼Œæ ¹æ®è¯¥issueï¼Œclientå…·æœ‰<code>destroy</code>æ–¹æ³•ï¼Œå¯ä»¥ä¸»åŠ¨é”€æ¯åˆ›å»ºçš„clientå¯¹è±¡ã€‚åŸºæœ¬ç”¨æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">client.<span class="title function_">unbind</span>();</span><br><span class="line">client.<span class="title function_">destroy</span>();</span><br></pre></td></tr></table></figure><p>ä½†æµ‹è¯•äº†ä¸€ä¸‹å¹¶æ²¡æœ‰èµ·ä½œç”¨ã€‚è¿™é‡Œé‡‡ç”¨clientæ•è·å¼‚å¸¸é˜²æ­¢è¿›ç¨‹é€€å‡ºçš„æ–¹æ³•ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;é¡¹ç›®ä¸­éœ€è¦å¯¹æ¥å…¬å¸åŸŸè´¦æˆ·å¯¹å…¶ä»–æ¨¡å—æä¾›é‰´æƒæœåŠ¡ã€‚ä¸ºæ–¹ä¾¿å®ç°Restfulæ¥å£ï¼Œä»¥åŠå­¦ä¹ ä¸€é—¨æ²¡ç”¨è¿‡çš„æŠ€æœ¯ï¼Œäºæ˜¯å†³å®šä½¿ç”¨Node.jså¼€å‘å®ç°ã€‚&lt;/p&gt;
&lt;h2 id=&quot;LDAPé‰´æƒæœåŠ¡æ¥å£&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#LDAPé‰´æƒæœåŠ¡æ¥å£</summary>
      
    
    
    
    <category term="æŠ€æœ¯ç§¯ç´¯" scheme="http://blog.cuicc.com/categories/%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/"/>
    
    
    <category term="Node.js" scheme="http://blog.cuicc.com/tags/Node-js/"/>
    
  </entry>
  
  <entry>
    <title>å¿ƒæ™ºæ˜¯å¦æˆç†Ÿ</title>
    <link href="http://blog.cuicc.com/blog/2017/03/12/grow-up/"/>
    <id>http://blog.cuicc.com/blog/2017/03/12/grow-up/</id>
    <published>2017-03-12T12:05:40.000Z</published>
    <updated>2025-03-16T07:58:25.510Z</updated>
    
    <content type="html"><![CDATA[<p>èŒåœºä¸­ï¼Œæˆ‘ä»¬ç»å¸¸å¬åˆ°æ‹›è˜è¦æ‰¾ä¸€ä¸ªå¿ƒæ™ºæˆç†Ÿçš„äººï¼›ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸å¬åˆ°è¯´ä¸€ä¸ªäººå¾ˆå¹¼ç¨šï¼Œä¸æˆç†Ÿï¼Œå³ä½¿å¹´é¾„å·²ç»ä¸å°ã€‚é‚£ä¹ˆï¼Œåˆ°åº•ä»€ä¹ˆæ˜¯å¿ƒæ™ºï¼Ÿå¿ƒæ™ºæˆç†Ÿçš„è¡¨ç°æ˜¯ä»€ä¹ˆï¼Ÿæˆ–è€…è¯´æ€ä¹ˆå»åšä¸€ä¸ªå¿ƒæ™ºæˆç†Ÿçš„äººå‘¢ï¼Ÿå­¦ä¹ æ‘˜æŠ„äº†ä¸€ä¸‹ï¼Œä¸å›å…±å‹‰ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯å¿ƒæ™º"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯å¿ƒæ™º"></a>ä»€ä¹ˆæ˜¯å¿ƒæ™º</h2><p>å¿ƒæ™ºçš„å®šä¹‰ï¼Œæˆ‘çœ‹äº†ä¸‹<a href="https://zh.wikipedia.org/wiki/%E5%BF%83%E7%81%B5">ç»´åŸºç™¾ç§‘</a>å’Œ<a href="http://baike.baidu.com/item/%E5%BF%83%E6%99%BA">ç™¾åº¦ç™¾ç§‘</a>ã€‚ç›¸æ¯”è¾ƒè€Œè¨€ï¼Œæˆ‘æ›´å–œæ¬¢ç™¾åº¦ç™¾ç§‘çš„æè¿°ï¼Œç›¸å¯¹æ›´å®¹æ˜“ç†è§£ä¸€ç‚¹ã€‚</p><blockquote><p>å¿ƒæ™ºæ˜¯äººä»¬çš„å¿ƒç†ä¸æ™ºèƒ½çš„è¡¨ç°ã€‚</p><p>å¿ƒæ™ºå®šä¹‰ï¼šå³æ˜¯æŒ‡äººä»¬å¯¹å·²çŸ¥äº‹ç‰©çš„æ²‰æ·€å’Œå‚¨å­˜ï¼Œé€šè¿‡ç”Ÿç‰©ååº”è€Œå®ç°åŠ¨å› çš„ä¸€ç§èƒ½åŠ›æ€»å’Œã€‚å®ƒæ¶µç›–äº†â€œå“²å­¦â€å¯¹å·²çŸ¥äº‹ç‰©çš„ç§¯ç´¯å’Œå‚¨å­˜ï¼Œç»“åˆäº†â€œç”Ÿç‰©å­¦â€çš„å¤§è„‘ä¿¡æ¯å¤„ç†ï¼Œå³â€œç”Ÿç‰©ååº”â€ï¼Œè¿ç”¨äº†ä¸ºå®ç°æŸç§æ¬²éœ€ï¼ˆåŠ¨å› ï¼‰è€Œä»äº‹çš„â€œå¿ƒç†â€æ´»åŠ¨ï¼Œä»è€Œè¾¾åˆ°ä¸ºå®ç°åŠ¨å› ç»“æœè€Œå¿…é¡»äº§ç”Ÿçš„æ™ºèƒ½åŠ›å’Œâ€œæ½œèƒ½â€åŠ›ã€‚</p><p>ä¸€ä¸ªäººçš„â€œå¿ƒæ™ºâ€æŒ‡çš„æ˜¯ä»–å„é¡¹æ€ç»´èƒ½åŠ›çš„æ€»å’Œï¼Œç”¨ä»¥æ„Ÿå—ã€è§‚å¯Ÿã€ç†è§£ã€åˆ¤æ–­ã€é€‰æ‹©ã€è®°å¿†ã€æƒ³åƒã€å‡è®¾ã€æ¨ç†ï¼Œè€Œåæ ¹æ®æŒ‡å¯¼å…¶è¡Œä¸ºã€‚</p><footer><strong>ç™¾åº¦ç™¾ç§‘</strong><cite><a href="http://baike.baidu.com/item/%E5%BF%83%E6%99%BA">å¿ƒæ™º</a></cite></footer></blockquote><p>å¿ƒæ™ºä¹Ÿå¯ä»¥ç®€åŒ–ä¸ºä¸¤ä¸ªå…³é”®è¯ï¼šæ€ç»´å’Œæ™ºåŠ›ã€‚<br>é‚£ä¹ˆå¦‚æœå»åˆ¤æ–­ä¸€ä¸ªäººå¿ƒæ™ºæ˜¯å¦æˆç†Ÿ/æ€ä¹ˆå»åšä¸€ä¸ªå¿ƒæ™ºæˆç†Ÿçš„äººå‘¢ï¼Œä¹Ÿä¸»è¦ä»è¿™ä¸¤ä¸ªæ–¹é¢æ¥çœ‹ã€‚</p><h2 id="æˆç†Ÿçš„å¿ƒæ™º"><a class="header-anchor" href="#æˆç†Ÿçš„å¿ƒæ™º"></a>æˆç†Ÿçš„å¿ƒæ™º</h2><p>Googleäº†ä¸€ä¸‹å¿ƒæ™ºæˆç†Ÿï¼Œå‘ç°æœ‰ä¸¤ä¸ªæè¿°æ¯”è¾ƒå¥½ï¼Œä¸€ä¸ªæ¯”è¾ƒè¯¦å°½ä¸”æœ‰å¯¹æ¯”ï¼Œä½†ä¸çŸ¥é“å‡ºå¤„ã€‚å¦ä¸€ä¸ªæ¯”è¾ƒç²¾ç‚¼ï¼Œå‡ºè‡ªäºã€ŠKing, Warrior, Magician, Lover ã€‹ã€‚è¿™ä¸¤ä¸ªæè¿°åŸºæœ¬ä¸»æ—¨æ˜¯ç›¸ä¼¼çš„ã€‚è¿™æ—¢å¯ä»¥ç”¨æ¥åˆ¤æ–­ï¼Œä¹Ÿå¯ä»¥æŸ¥æ‰¾ä¸è¶³ï¼ŒåŠªåŠ›æˆé•¿ã€‚</p><h3 id="è¯¦å°½çš„æè¿°"><a class="header-anchor" href="#è¯¦å°½çš„æè¿°"></a>è¯¦å°½çš„æè¿°</h3><blockquote><p>1.å¿ƒæ™ºæˆç†Ÿçš„äººï¼Œ åœ¨æ—¥å¸¸çš„ç”Ÿæ´»å·¥ä½œä¸­ï¼Œä¸ºäººå¤„ä¸–ï¼Œè¡Œäº‹åˆ¤æ–­æœ‰ä¸»è§ï¼Œæœ‰åŸåˆ™ï¼Œä¸ä»¥åˆ«äººçš„å–œæ¶è¡Œä¸ºæ¥å·¦å³è‡ªå·±çš„è¡Œäº‹å¤„ä¸–æ ‡å‡†ã€‚</p><p>2.å¿ƒæ™ºæˆç†Ÿçš„äººï¼Œ æ‰¿è®¤äººæ€§ä¸­æœ‰å…‰æ˜çš„ä¸€é¢ï¼Œæœ‰é»‘æš—çš„ä¸€é¢ï¼Œæœ‰æ…ˆå–„çš„ä¸€é¢ï¼Œæœ‰é˜´æš—çš„ä¸€é¢ï¼Œæœ‰ä¼˜ç‚¹åˆæœ‰ç¼ºç‚¹ï¼Œå¹¶æœ‰å®¹å¿å’Œè°…è§£çš„èƒ¸è¥Ÿã€‚</p><p>3.å¿ƒæ™ºæˆç†Ÿçš„äººï¼Œ èƒ½å¤Ÿå¦ç„¶åœ°æ¥å—å¯¹æ–¹çš„ä¸€åˆ‡ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Œæ‡‚å¾—å­¦ä¼šä¸åˆ«äººå¦‚ä½•ç›¸å¤„ä¹‹é“ã€‚</p><p>4.å¿ƒæ™ºæˆç†Ÿçš„äººï¼Œ ä¼šä»å¾ˆå¤šä¸åŒçš„è§†è§’çœ‹é—®é¢˜ï¼Œè€Œå­©å­æ°”çš„äººï¼Œ é€šå¸¸åªä»è‡ªå·±çš„è§’åº¦çœ‹é—®é¢˜ï¼</p><p>5.å¿ƒæ™ºæˆç†Ÿçš„äººï¼Œ æ˜ç™½è‰¯å¥½çš„åŠ¨æœºæœªå¿…å¸¦æ¥è‰¯å¥½çš„æ•ˆæœï¼Œè‰°è‹¦çš„ä»˜å‡ºæœªå¿…æ”¶åˆ°ä¸°ç¡•çš„æˆæœï¼Œäº†è§£æ‰‹æ®µä¸ç›®çš„ä¹‹ä¸å¯åˆ†å‰²ã€‚</p><p>6.â€œä¸ä»¥äººåºŸè¨€â€ï¼Œæ‡‚å¾—â€œä»¥äº‹è®ºäº‹â€è€Œâ€œä¸ä»¥äººè®ºäº‹â€çš„é“ç†ã€‚æ‰¿è®¤çœŸç†çš„ç»å¯¹æ€§ï¼Œä¸çœ‹äººçš„åœ°ä½çš„é«˜ä½è€Œæ–­è¨€è®ºæ˜¯éã€‚</p><p>7.é¢å¯¹æ‰¹è¯„ï¼Œ æˆç†Ÿçš„äººï¼Œ ä¼šå¿ƒå¹³æ°”å’Œï¼Œ æƒ³æƒ³é“ç†ï¼Œ åŠªåŠ›æ”¹è¿› ï¼›ä¸æˆç†Ÿçš„äººï¼Œåˆ™ä¼šå‚å¤´ä¸§æ°”ï¼Œ æˆ–æš´æ€’ä¸å·²ã€‚</p><p>8.å‡ºçŠ¶å†µæ—¶ï¼Œæˆç†Ÿçš„äººä¹ æƒ¯åçœï¼Œå¹¶ä¹æ„è‡´æ­‰ï¼›ä¸æˆç†Ÿçš„äººï¼Œåªä¼šæŒ‡è´£ä»–äººï¼Œä»ä¸é“æ­‰ã€‚</p><p>9.å¿ƒæ™ºæˆç†Ÿçš„äººï¼Œå› å……æ»¡è‡ªä¿¡è€Œå¿ƒæœ‰ä½™åŠ›ï¼Œæ€»æ˜¯å–„æ„è§£è¯»ä»–äººä¹‹è¨€è¡Œï¼Œå¹¶ä¸”æœ‰ç¤¼å›åº”ï¼›ä¸æˆç†Ÿçš„äººï¼Œç¼ºä¹è‡ªä¿¡è€Œæ•æ„Ÿå¤šç–‘ï¼Œè®¤ä¸ºåˆ«äººçš„è¨€è¡Œæ€»æ˜¯å¦æœ‰ç›®çš„ï¼Œå¿ä¸ä½ä¼šè¯­å¸¦æŒ‘è¡…åœ°å›åº”ã€‚</p><p>10.é‡åˆ°å¿ƒæƒ…ä½è°·æ—¶ï¼Œæˆç†Ÿçš„äººï¼Œä¼šä¸ºè‡ªå·±çš„å¿ƒæƒ…è´Ÿè´£ï¼Œæƒ³çš„æ˜¯ï¼šâ€œæˆ‘è¯¥åšäº›ä»€ä¹ˆï¼Œå¯ä»¥è®©äº‹æƒ…å¥½è½¬ï¼Ÿâ€ï¼›ä¸æˆç†Ÿçš„äººï¼Œåˆ™æ˜¯è¦ä»–äººä¸ºè‡ªå·±æƒ…ç»ªè´Ÿè´£ï¼Œæƒ³çš„æ˜¯ï¼šâ€œ TAè¯¥åšä»€ä¹ˆï¼Œæ‰èƒ½è®©æˆ‘çš„å¿ƒæƒ…å¥½è½¬ï¼Ÿâ€ ã€‚</p><p>11.æˆç†Ÿçš„äººï¼Œä¼šåˆ©ç”¨å¹½é»˜æ„Ÿè°ƒæ•´å¿ƒæƒ…ï¼Œè‡ªæˆ‘è§£å˜²æ—¶ï¼Œèƒ½ç”¨æ—è§‚è€…è§†è§’ï¼Œè¯»å‡ºå…¶ä¸­æœ‰è¶£ï¼Œè€Œè½»æ¾åŒ–è§£æƒ…ç»ªï¼›ä¸æˆç†Ÿçš„äººï¼Œåˆ™æ˜¯ç”¨å¹½é»˜æ¥ä»“çš‡æ©ç›–å¿ƒä¸­æƒ…ç»ªï¼Œè‡ªæˆ‘è§£å˜²åï¼Œå¿ƒæƒ…å¾€å¾€æ›´éš¾å ªè€Œä½è¿·ã€‚</p><p>12.åœ¨äººé™…å…³ç³»ä¸­ï¼Œæˆç†Ÿçš„äººå¸¸è¯´ï¼šâ€œæˆ‘æ„¿æ„â€¦â€¦â€ï¼Œä¸»åŠ¨ä»˜å‡ºçˆ±ï¼›ä¸æˆç†Ÿçš„äººæ€»æ˜¯è¯´ï¼šâ€œæˆ‘éœ€è¦â€¦â€¦â€ï¼Œåªä¼šæè¦æ±‚ã€‚</p><p>13.æ˜ç™½â€œäººæ¯”äººæ°”æ­»äººâ€çš„é“ç†ï¼Œä¸æ‹¿è‡ªå·±è·Ÿåˆ«äººæ»¥åŠ æ¯”è¾ƒã€‚ä¸è¦å‹‰å¼ºè‡ªå·±å»åšå¤©æ‰æ˜æ˜Ÿã€‚ç™¾ä¸‡å¯Œç¿å±ˆæŒ‡å¯æ•°ï¼Œå¹³å‡¡äººæ€»æ˜¯å¤§å¤šæ•°ã€‚æ˜ç™½å¯Œäººæœ‰å¯Œäººçš„çƒ¦æ¼ï¼Œå‡¡äººæœ‰å‡¡äººä¹è¶£ã€‚</p><p>14.äº†è§£äººä¸äººä¹‹é—´çš„æ²Ÿé€šä¹ƒæ˜¯ä¸–ä¸Šæœ€éš¾æœ€éš¾ä¹Ÿæ˜¯æœ€æœ‰æ„ä¹‰çš„ä¸€ä»¶äº‹æƒ…ï¼Œè€Œå°é—­è‡ªå‚²çš„å¿ƒçµæ­£æ˜¯æ²Ÿé€šçš„æœ€å¤§æ•Œäººã€‚</p><p>15.èƒ½å¤Ÿç‹¬ç«‹æ€è€ƒæˆ–ä½œæ­£ç¡®çš„å†³å®šã€‚åšäº‹ä¸ä¼šåå¤æ— å¸¸ï¼Œå¯¹é‡è¦çš„å†³å®šäº‹é¡¹ï¼Œæ— é¡»ä¾èµ–åˆ«äººè€Œèƒ½å¤Ÿç‹¬ç«‹åˆ¤æ–­ã€‚</p><footer><strong>è±†ç“£</strong><cite><a href="https://www.douban.com/group/topic/29621603/">å¦‚ä½•çœ‹ä¸€ä¸ªäººå¿ƒæ™ºæ˜¯å¦æˆç†Ÿ</a></cite></footer></blockquote><h3 id="ç²¾ç‚¼çš„æè¿°"><a class="header-anchor" href="#ç²¾ç‚¼çš„æè¿°"></a>ç²¾ç‚¼çš„æè¿°</h3><blockquote><p>â€¢ ä»–ä»¬æ²‰ç¨³ï¼Œå¤„äº‹ä¸æƒŠã€‚èƒ½å¤Ÿåœ¨å±é™©ä¸­ä¿æŒé•‡å®šã€‚<br>â€¢ ä»–ä»¬ä¸å®¹æ˜“è¢«å†’çŠ¯ï¼Œå´å¾ˆå®¹æ˜“èƒ½ç»™äººå¸¦æ¥å®‰å…¨å’Œå¯é æ„Ÿã€‚<br>â€¢ ä»–ä»¬ä»ä¸å¯»æ±‚å…³æ³¨å’Œçˆ±æŠ¤ã€‚ä»–ä»¬ç”Ÿæ´»çš„è¶‹åŠ¿æ˜¯ç»™äºä»–äººè®¤åŒï¼Œç»™äºçˆ±ã€‚<br>â€¢ ä»–ä»¬ä¹ æƒ¯äºæ…·æ…¨çš„ç»™äºä»–äººå¸®åŠ©ã€‚ä»–ä»¬æ·±çŸ¥ï¼ŒåŠ©äººå¼ºè€…æ— ä¸è‡ªå¼ºã€‚<br>â€¢ ä»–ä»¬çš„ç”Ÿæ´»æœ‰ç¡®å®šçš„ä½¿å‘½ï¼Œè¡ŒåŠ¨å’Œæ€ç»´ä»ä¸æ··ä¹±ã€‚<br>â€¢ ä»–ä»¬èƒ½å¤Ÿå¿è€ç—›è‹¦ï¼Œä½†ä¾æ—§æ•å¼€å¿ƒæ´»ç€ã€‚ä»–ä»¬ä¸æ€•è¢«éª—ï¼Œè¢«çœ‹ä¸èµ·ã€‚<br>â€¢ ä»–ä»¬ä»æ¥ä¸ä¸ºè‡ªå·±è¾©è§£ï¼Œå› ä¸ºä»–ä»¬çŸ¥é“è‡ªå·±æ˜¯è°ã€‚</p><footer><strong>Robert Moore / Douglas Gillette </strong><cite>King Warrior Magician Lover</cite></footer></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;èŒåœºä¸­ï¼Œæˆ‘ä»¬ç»å¸¸å¬åˆ°æ‹›è˜è¦æ‰¾ä¸€ä¸ªå¿ƒæ™ºæˆç†Ÿçš„äººï¼›ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸å¬åˆ°è¯´ä¸€ä¸ªäººå¾ˆå¹¼ç¨šï¼Œä¸æˆç†Ÿï¼Œå³ä½¿å¹´é¾„å·²ç»ä¸å°ã€‚é‚£ä¹ˆï¼Œåˆ°åº•ä»€ä¹ˆæ˜¯å¿ƒæ™ºï¼Ÿå¿ƒæ™ºæˆç†Ÿçš„è¡¨ç°æ˜¯ä»€ä¹ˆï¼Ÿæˆ–è€…è¯´æ€ä¹ˆå»åšä¸€ä¸ªå¿ƒæ™ºæˆç†Ÿçš„äººå‘¢ï¼Ÿå­¦ä¹ æ‘˜æŠ„äº†ä¸€ä¸‹ï¼Œä¸å›å…±å‹‰ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä»€ä¹ˆæ˜¯å¿ƒæ™º&quot;&gt;&lt;a class=&quot;h</summary>
      
    
    
    
    <category term="ç”Ÿæ´»è®°å½•" scheme="http://blog.cuicc.com/categories/%E7%94%9F%E6%B4%BB%E8%AE%B0%E5%BD%95/"/>
    
    
    <category term="å¿ƒæ™º" scheme="http://blog.cuicc.com/tags/%E5%BF%83%E6%99%BA/"/>
    
  </entry>
  
  <entry>
    <title>æˆ‘çš„2016ä¸ªäººæ€»ç»“</title>
    <link href="http://blog.cuicc.com/blog/2017/01/02/my-personal-review-2016/"/>
    <id>http://blog.cuicc.com/blog/2017/01/02/my-personal-review-2016/</id>
    <published>2017-01-02T04:34:46.000Z</published>
    <updated>2025-08-23T12:03:02.530Z</updated>
    
    <content type="html"><![CDATA[<p>æ—¶é—´è¿‡å¾—å¾ˆå¿«ï¼Œè½¬çœ¼åˆæ˜¯ä¸€å¹´è¿‡å»äº†ã€‚æˆ‘è¿˜è®°å¾—å¹´åˆç»™è€å¤§ä»¬åˆ†äº«å¤–ä¼ä¸ç§ä¼å·¥ä½œå¼‚åŒæ—¶ï¼Œæœ‰è¿™æ ·ä¸€ä¸ªè§‚ç‚¹ï¼šæ‰€è°“äººå‚»é’±å¤šæ´»å°‘ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªè‰¯å¥½çš„çŠ¶æ€ï¼Œä¸Šç­æ•´å¤©æ— æ‰€äº‹äº‹ï¼Œä¸‹ç­ä¸€æ ·ä¹Ÿæ— æ‰€äº‹äº‹ï¼Œçœ‹ä¼¼æœ‰å¤§æŠŠçš„æ—¶é—´ï¼Œåœ¨è¿™æ ·çš„çŠ¶æ€ä¸‹ï¼Œæœ‰å†å¤šçš„æ—¶é—´è¿˜æ˜¯å•¥ä¹Ÿä¸æƒ³å¹²ã€‚</p><p>è¿™ä¸€å¹´ï¼Œä¸æ˜¯äº§å“åˆä½œå¼€å‘ï¼Œå°±æ˜¯æ”¯æ´äº§å“å¼€å‘ã€‚å°¤å…¶æ˜¯ä¸‹åŠå¹´ï¼Œå……åˆ†æ„Ÿå—äº†äº§å“å¼€å‘çš„å¿™ã€ç´¯ï¼Œæ¯”æ‰€è°“çš„996æ›´å˜æ€ã€‚åŒæ ·åœ°åœ¨è¿™æ ·ä¸€ç§èº«å¿ƒç–²æƒ«çš„å·¥ä½œçŠ¶æ€ä¸‹ï¼Œå¯¹å¾ˆå¤šäº‹æƒ…éƒ½æ˜¯æœ‰å¿ƒæ— åŠ›ã€‚</p><p>è¿™ä¸¤ç§çŠ¶æ€ä»ä¾§é¢å°è¯äº†æˆ‘çš„è®ºæ–­ï¼šä¿æŒä¸€å®šçš„å¿™ç¢ŒçŠ¶æ€ï¼Œè¿™æ ·æ‰€æœ‰çš„çˆ±å¥½ä¸ä¹ æƒ¯éƒ½æ˜¯æœ‰æ¡ä¸ç´Šçš„åšæŒä¸‹å»ã€‚</p><p>è¿˜è®°å¾—2015å¹´ï¼ŒåšæŒäº†ä¸€å¹´çš„èº«ä½“é”»ç‚¼ï¼Œè¯»äº†æ•°åæœ¬ä¸åŒç§ç±»çš„ä¹¦ã€‚åŸºäºè¿™ç¾å¥½çš„è¿‡å»ä¸€å¹´ï¼Œæ›¾å†™ä¸‹2016å¹´çš„ç›®æ ‡ã€‚å›é¦–è¿‡å»è¿™ä¸€å¹´ï¼Œé”»ç‚¼èº«ä½“æ‡ˆæ€ äº†ï¼Œä¹¦è¯»çš„å°‘äº†ï¼Œæ–°ä¸œè¥¿å­¦çš„åŠé€”è€ŒåºŸäº†ï¼Œæ²¡æœ‰ä¸€ä¸ªåšæŒä¸‹æ¥çš„ã€‚å®¢è§‚åŸå› æ˜¯ä¸Šä¸‹ç­è·¯ç¨‹è¿œï¼ŒèŠ±çš„æ—¶é—´å¤šï¼›æ”¯æ´äº§å“å¤ªå¿™å¤ªç´¯ã€‚ä¸»è§‚åŸå› æ˜¯å¿ƒç†ä¸Šæ‡ˆæ€ äº†ï¼Œå¿˜äº†åšæŒçš„æ„ä¹‰ã€‚è™½ç„¶å¦‚æ­¤ï¼Œè¿‡å»è¿™ä¸€å¹´è¿˜æ˜¯æœ‰äº›éœ€è¦æ€»ç»“çš„åœ°æ–¹ã€‚</p><p>è¿™ä¸€å¹´ï¼Œå®ç°äº†æ¯å¹´ä¸€æ¬¡é•¿é€”æ—…è¡Œçš„ç›®æ ‡ã€‚ä»ç„¶æ²¡æœ‰èµ°å‡ºäºšæ´²ï¼Œå¸Œæœ›èƒ½æœ‰æœºä¼šå»æ¬§æ´²ã€ç¾æ´²èµ°ä¸€é­ã€‚è¿™ä¸€æ¬¡å»çš„æ˜¯å°æ¹¾ï¼Œå®Œå…¨æ²¡æœ‰è¯­è¨€éšœç¢çš„åœ°æ–¹ã€‚å°æ¹¾ç»™æˆ‘å°è±¡æœ€æ·±çš„æ˜¯äººæ–‡ï¼Œç¤¼è²Œã€ç´ è´¨ã€ç§©åºã€å‹å¥½ï¼Œä½“ç°å¾—æ·‹æ¼“å°½è‡´ï¼›æ•…å®«åšç‰©é™¢çš„æ–‡ç‰©è—å“ç²ç…æ»¡ç›®ï¼Œæ‰‹è‰ºä¸æƒ³è±¡çš„é›†å¤§æˆè€…ï¼Œæ›´ä¸ç”¨è¯´å…¶å†å²ä»·å€¼äº†ã€‚</p><p>è¿™ä¸€å¹´ï¼Œåœ¨ä¼‘å…»äº†åŠå¹´åï¼Œç»ˆäºæˆåŠŸç ”å‘äº†2.1ç‰ˆ â€” å°å’•å’šï¼Œé©¬ä¸Šå°±è¦å‘å¸ƒäº†ï¼Œå—¯ã€‚è¿™æ˜¯è¿™ä¸€å¹´æœ€å¤§çš„äº‹ï¼Œæœ€æ¬£æ…°çš„äº‹ï¼Œæœ€æœŸå¾…çš„äº‹ã€‚æ¯å¤©è®²æ•…äº‹æ—¶çš„èƒåŠ¨ï¼Œæƒ³æƒ³å°±å¼€å¿ƒã€‚</p><p>è¿™ä¸€å¹´ï¼Œåˆä¸€æ¬¡æ¢äº†ä½å¤„ï¼Œæ–¹ä¾¿è€å©†ä¸Šä¸‹ç­ï¼Œæ–¹ä¾¿ç…§é¡¾å³å°†è¿æ¥çš„å°ç”Ÿå‘½ã€‚</p><p>è¿™ä¸€å¹´ï¼Œå€¾å…¶æ‰€æœ‰ï¼Œè´Ÿå€ºç´¯ç´¯ï¼Œæäº†ä¸€ä¸ªæˆ·å£æœ¬ã€‚ç®—æ˜¯ç»™è‡ªå·±ä¸€ä¸ªäº¤ä»£ï¼Œç»™è€å©†ä¸€ä¸ªäº¤ä»£ï¼Œç»™å­©å­ä¸€ä¸ªäº¤ä»£ã€‚</p><p>è¿™ä¸€å¹´ï¼Œå»æ”¯æ´äº§å“å¼€å‘ï¼Œåœ¨å¿™æ­»ã€ç´¯æ­»çš„èƒŒåï¼Œçœ‹åˆ°æ›´å¤šçš„æ˜¯æ— è°“çš„åŠ ç­åŠ ç‚¹ï¼Œæ˜¯ç®¡ç†æ··ä¹±å¯¼è‡´ï¼Œæ›´æ·±å±‚è¿˜æ˜¯åˆ¶åº¦ä½¿ç„¶ã€‚åˆ¶åº¦å¯¹äººçš„å¡‘é€ ç¨‹åº¦è¾¾åˆ°æƒŠäººçš„å¯æ€•åœ°æ­¥ã€‚</p><p>è¿™ä¸€å¹´ï¼ŒåŸæœ‰çš„åšæŒæ…¢æ…¢è¢«æ¶ˆç£¨æ®†å°½ï¼Œå°±è¿å‘¨æœ«éƒ½éš¾ä»¥å†æ‹¾èµ·è¿åŠ¨ï¼Œæ‹¿èµ·ä¹¦æœ¬ã€‚çºµä½¿è®°å¾—â€œèº«ä½“ä¸çµé­‚å¿…é¡»æœ‰ä¸€ä¸ªåœ¨ä¿®bugâ€ï¼Œèº«å¿ƒä¿±ç–²ä¹‹ä¸‹éš¾ä»¥åšåˆ°èº«ä½“åŠ›è¡Œã€‚</p><p>2017å¹´ï¼Œé¦–è¦çš„ä»»åŠ¡æ˜¯å¤šèµšé’±ï¼Œå¤šèµšé’±ï¼Œå¤šèµšé’±ã€‚</p><p>2017å¹´ï¼Œæˆ‘å¸Œæœ›é”»ç‚¼å¼ºå¤§çš„å†…å¿ƒï¼Œçºµä½¿å¿ƒç´¯ï¼Œä»ä¸å¿˜åšæŒåˆå¿ƒã€‚</p><p>2017å¹´ï¼Œæˆ‘ä»å¸Œæœ›åšæŒé”»ç‚¼ï¼Œä¿è¯å¥åº·çš„ä½“é­„ã€‚</p><p>2017å¹´ï¼Œæˆ‘ä»å¸Œæœ›åšæŒè¯»ä¹¦ï¼Œä¿è¯çŸ¥è¯†çš„å®½åº¦ã€‚</p><p>2017å¹´ï¼Œæˆ‘ä»å¸Œæœ›åšæŒå­¦ä¹ ï¼Œä¿è¯æŠ€æœ¯çš„æ·±åº¦ã€‚</p><p>2017å¹´ï¼Œå¸¦ç€å­©å­ï¼Œä¸€èµ·æ¬£èµèŠ±èŠ±è‰è‰ï¼Œè™«é±¼é¸Ÿå…½ï¼Œä¸–é—´ä¸‡ç‰©ï¼Œé”¦ç»£ç¹åã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æ—¶é—´è¿‡å¾—å¾ˆå¿«ï¼Œè½¬çœ¼åˆæ˜¯ä¸€å¹´è¿‡å»äº†ã€‚æˆ‘è¿˜è®°å¾—å¹´åˆç»™è€å¤§ä»¬åˆ†äº«å¤–ä¼ä¸ç§ä¼å·¥ä½œå¼‚åŒæ—¶ï¼Œæœ‰è¿™æ ·ä¸€ä¸ªè§‚ç‚¹ï¼šæ‰€è°“äººå‚»é’±å¤šæ´»å°‘ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªè‰¯å¥½çš„çŠ¶æ€ï¼Œä¸Šç­æ•´å¤©æ— æ‰€äº‹äº‹ï¼Œä¸‹ç­ä¸€æ ·ä¹Ÿæ— æ‰€äº‹äº‹ï¼Œçœ‹ä¼¼æœ‰å¤§æŠŠçš„æ—¶é—´ï¼Œåœ¨è¿™æ ·çš„çŠ¶æ€ä¸‹ï¼Œæœ‰å†å¤šçš„æ—¶é—´è¿˜æ˜¯å•¥ä¹Ÿä¸æƒ³å¹²ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸€å¹´ï¼Œä¸æ˜¯äº§å“åˆä½œå¼€</summary>
      
    
    
    
    <category term="ç”Ÿæ´»è®°å½•" scheme="http://blog.cuicc.com/categories/%E7%94%9F%E6%B4%BB%E8%AE%B0%E5%BD%95/"/>
    
    
    <category term="æ€»ç»“" scheme="http://blog.cuicc.com/tags/%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>ä»å…è´¹æŠ½å¥–åˆ°ä¸€å…ƒä¼—ç­¹</title>
    <link href="http://blog.cuicc.com/blog/2016/03/27/free-lottery-vs-one-cny-crowdfunding/"/>
    <id>http://blog.cuicc.com/blog/2016/03/27/free-lottery-vs-one-cny-crowdfunding/</id>
    <published>2016-03-27T06:28:22.000Z</published>
    <updated>2025-03-16T07:58:25.510Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘å‘ç°ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„è½¬å˜ï¼Œäº’è”ç½‘å¹³å°æˆ–å•†å®¶å¼€å§‹æâ€œä¸€å…ƒä¼—ç­¹â€æ¨å¹¿æ¨¡å¼ï¼Œå„å•†å®¶çš„å«æ³•ä¸ä¸€ï¼Œä½†ç©æ³•æ˜¯ä¸€æ ·çš„ï¼šä¸€å—é’±å‚ä¸æŠ½å¥–ï¼Œæ¯åˆ°ä¸€å®šäººæ•°(é€šå¸¸æ˜¯å•†å“çš„å”®ä»·)ï¼ŒæŠ½å–ä¸€äººè·å¥–å¾—åˆ°è¯¥å•†å“ã€‚é‚£ä¹ˆç›¸å¯¹äºåŸæ¥çš„å…è´¹æŠ½å¥–ï¼Œé™¤äº†ä¸€å—é’±è¿˜æœ‰ä»€ä¹ˆä¸ä¸€æ ·å‘¢ï¼Ÿæˆ‘å°è¯•ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢å¯¹æ¯”ä¸€ä¸‹:</p><span id="more"></span><h3 id="å…è´¹æŠ½å¥–"><a class="header-anchor" href="#å…è´¹æŠ½å¥–"></a>å…è´¹æŠ½å¥–</h3><ul><li>æ¨å¹¿æ¨¡å¼ï¼šå•†å®¶æˆ–å¹³å°æä¾›å¥–å“ï¼Œå‚ä¸æŠ½å¥–è·å¾—ä¸€ä¸ªæŠ½å¥–å·ï¼Œåˆ†äº«åˆ°å¾®åšå¾®ä¿¡ç­‰ç¤¾äº¤å¹³å°é¢å¤–è·å–å¤šä¸ªæŠ½å¥–å·ã€‚</li><li>æ¨å¹¿æˆæœ¬ï¼šä»é•¿æœŸæ¥çœ‹è¿™æ˜¯ä¸€ç¬”ä¸å°çš„å¹¿å‘Šè´¹ã€‚</li><li>ç”¨æˆ·å¿ƒæ€ï¼šå¯¹ç”¨æˆ·æ¥è¯´ï¼Œé€šå¸¸æ¯«ä¸çŠ¹è±«åœ°ç‚¹å‡»æŒ‰é’®å‚ä¸æŠ½å¥–ï¼Œå¹¶ä¸”å‚ä¸äººæ•°ä¼—å¤šï¼Œçƒ­é—¨å¥–å“é€šå¸¸æ•°åä¸‡äººï¼ŒæŠ½åˆ°çš„æ¦‚ç‡å¾ˆå°ã€‚å› ä¸ºå…è´¹ï¼Œç”¨æˆ·å¯èƒ½å¯¹å•†å®¶æˆ–å¹³å°å‡ ä¹æ²¡æœ‰å•¥å…³æ³¨ï¼Œä»…ä»…ä¸ºäº†æŠ½å¥–è€Œå·²ã€‚</li><li>æ¨å¹¿æ”¶ç›Šï¼šå¯ä»¥å¿«é€Ÿæé«˜æ³¨å†Œç”¨æˆ·é‡ã€‚å¯èƒ½åˆæœŸæ¨å¹¿æ•ˆæœæ¯”è¾ƒå¥½ã€‚åˆ©äºèèµ„ï¼Ÿ</li></ul><h3 id="ä¸€å…ƒä¼—ç­¹"><a class="header-anchor" href="#ä¸€å…ƒä¼—ç­¹"></a>ä¸€å…ƒä¼—ç­¹</h3><ul><li>æ¨å¹¿æ¨¡å¼ï¼šç”¨æˆ·ä¸€å—é’±ä¹°ä¸€ä¸ªæŠ½å¥–å·ï¼Œæ¯åˆ°ä¸€å®šäººæ•°(é€šå¸¸æ˜¯å•†å“çš„å”®ä»·)ï¼Œä¼—ç­¹æˆåŠŸï¼Œä»ä¸­æŠ½å–ä¸€äººè·å¾—å¥–å“ã€‚åŒæ—¶æ¯æ¬¡å‚ä¸å¯è·å–ä¸€å®šçš„ä¼˜æƒ åˆ¸(æ¯”å¦‚5å…ƒä¼˜æƒ åˆ¸)ã€‚</li><li>æ¨å¹¿æˆæœ¬ï¼šå……åˆ†åˆ©ç”¨ä¼—ç­¹è¿™ä¸€æ¦‚å¿µï¼Œä¸ç”¨ä»˜å‡ºæˆæœ¬ã€‚</li><li>ç”¨æˆ·å¿ƒæ€ï¼šç”¨æˆ·è‚¯ä»˜å‡ºä¸€å…ƒçš„æˆæœ¬ï¼Œé€šå¸¸ä¼šè€ƒè™‘æ˜¯å¦æœ‰åœ¨è¯¥å•†å®¶æˆ–å¹³å°æ¶ˆè´¹çš„å¯èƒ½æ€§ï¼Œä¼˜æƒ åˆ¸çš„ä½œç”¨ã€‚</li><li>æ¨å¹¿æ”¶ç›Šï¼šç­›é€‰ç”¨æˆ·ï¼Œå¢åŠ ç›®æ ‡ç”¨æˆ·è½¬åŒ–ç‡å’Œç”¨æˆ·ç²˜æ€§ã€‚</li></ul><h3 id="ä¸€å…ƒä¼—ç­¹å¹³å°"><a class="header-anchor" href="#ä¸€å…ƒä¼—ç­¹å¹³å°"></a>ä¸€å…ƒä¼—ç­¹å¹³å°</h3><p>åœ¨å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œgoogleäº†ä¸€ä¸‹ï¼Œå‘ç°æœ‰å¥½å¤šä¸“é—¨åšä½é¢ä¼—ç­¹çš„å¹³å°ã€‚ç©æ³•å’Œä¸Šè¿°åŸºæœ¬ä¸€æ ·ï¼Œä¸åŒçš„æ˜¯åªæ˜¯çº¯ä¼—ç­¹è€Œå·²ï¼Œæ²¡æœ‰ä¼˜æƒ åˆ¸è¿”è¿˜ï¼Œä¼—ç­¹ä»½é¢ä¸ä¸€å®šæ˜¯ä¸€å…ƒã€‚<br>å¥½å¥‡è¿™äº›å¹³å°å¦‚ä½•ç›ˆåˆ©å‘¢ï¼Ÿç®€å•å¯¹æ¯”äº†å‡ ä¸ªå•†å“ï¼Œè¿™äº›å¹³å°ä¸Šå¥–å“ä¼—ç­¹ä»·æ¯”å®é™…å”®ä»·é«˜å‡ºä¸å°‘ï¼Œåªè¦å–å‡ºå»å°±å¯ä»¥ç¨³èµšä¸èµ”ã€‚è¿™åº”è¯¥æ˜¯è¿™ç±»å¹³å°çš„ç›ˆåˆ©æ¨¡å¼å§ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ€è¿‘å‘ç°ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„è½¬å˜ï¼Œäº’è”ç½‘å¹³å°æˆ–å•†å®¶å¼€å§‹æâ€œä¸€å…ƒä¼—ç­¹â€æ¨å¹¿æ¨¡å¼ï¼Œå„å•†å®¶çš„å«æ³•ä¸ä¸€ï¼Œä½†ç©æ³•æ˜¯ä¸€æ ·çš„ï¼šä¸€å—é’±å‚ä¸æŠ½å¥–ï¼Œæ¯åˆ°ä¸€å®šäººæ•°(é€šå¸¸æ˜¯å•†å“çš„å”®ä»·)ï¼ŒæŠ½å–ä¸€äººè·å¥–å¾—åˆ°è¯¥å•†å“ã€‚é‚£ä¹ˆç›¸å¯¹äºåŸæ¥çš„å…è´¹æŠ½å¥–ï¼Œé™¤äº†ä¸€å—é’±è¿˜æœ‰ä»€ä¹ˆä¸ä¸€æ ·å‘¢ï¼Ÿæˆ‘å°è¯•ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢å¯¹æ¯”ä¸€ä¸‹:&lt;/p&gt;</summary>
    
    
    
    <category term="ä¸šç•Œè¿½è¸ª" scheme="http://blog.cuicc.com/categories/%E4%B8%9A%E7%95%8C%E8%BF%BD%E8%B8%AA/"/>
    
    
    <category term="ä¼—ç­¹" scheme="http://blog.cuicc.com/tags/%E4%BC%97%E7%AD%B9/"/>
    
    <category term="è¥é”€" scheme="http://blog.cuicc.com/tags/%E8%90%A5%E9%94%80/"/>
    
  </entry>
  
  <entry>
    <title>æˆ‘çš„2015ä¸ªäººæ€»ç»“</title>
    <link href="http://blog.cuicc.com/blog/2016/01/02/my-personal-review-2015/"/>
    <id>http://blog.cuicc.com/blog/2016/01/02/my-personal-review-2015/</id>
    <published>2016-01-02T13:28:52.000Z</published>
    <updated>2025-03-16T07:58:25.510Z</updated>
    
    <content type="html"><![CDATA[<p>2015å¹´å¯¹æˆ‘æ¥è®²ï¼Œæ˜¯ä¸å¤ªé¡ºåˆ©çš„ä¸€å¹´ï¼Œç»å†äº†å„ç§ä¸å¥½çš„äº‹ã€‚äººæœªä¸‰åè€Œç«‹ï¼Œå´å·²å°å°½äººç”Ÿç™¾æ€çš„æ„Ÿè§‰ã€‚</p><p>å¹´åˆåˆ¶å®šçš„è®¡åˆ’ï¼Œå®Œæˆçš„å¹¶ä¸å¥½ï¼Œç”šè‡³å·²ç»çœ‹ä¸æ‡‚å½“åˆçš„ç®€å†™æ˜¯å•¥äº†ï¼Œæƒ­æ„§æƒ­æ„§ã€‚è¿™ä¹Ÿå’Œå½“åˆçš„ç›®æ ‡å¤ªç¬¼ç»Ÿæœ‰å…³ã€‚</p><p>è¿™ä¸€å¹´ï¼ŒåšæŒè¯»ä¹¦ï¼Œæ—¶æœ‰æ–­ç»­ï¼Œä¹Ÿçœ‹äº†å¥½äº›æœ¬ä¹¦ï¼Œä¸€äº›æ™¦æ¶©çš„ä¹¦æˆ–è€…è‹±æ–‡åŸç‰ˆä¹¦çœ‹äº†çœ‹äº†å¼€å¤´æŒ–äº†å‘ï¼Œä¸€ç›´æ²¡æœ‰å¡«ä¸Šã€‚æœ‰å°è¯´ï¼Œæœ‰ç§‘å¹»ï¼Œæœ‰ç»æµï¼Œæœ‰ç§‘æ™®ã€‚</p><p>è¿™ä¸€å¹´ï¼Œæœ€æ¬£æ…°çš„æ˜¯åšæŒé”»ç‚¼èº«ä½“ï¼Œå”¯ä¸€åšæŒåˆ°ç°åœ¨çš„ä¸€ä»¶äº‹ã€‚æ— è®ºæ˜¯ä»P4Pçš„level 1åˆ°ç–¯ç‹‚level 2ï¼Œè¿˜æ˜¯è½¬æˆ˜åˆ°keepï¼Œä¸€ç›´æ‰“å¡ä¿æŒåˆ°ç°åœ¨ã€‚æ— è®ºé”»ç‚¼äº›ä»€ä¹ˆï¼Œæ€»ä¹‹èº«ä½“çŠ¶æ€æ„Ÿè§‰è¿˜ä¸é”™ã€‚å¸Œæœ›èƒ½ä¸€ç›´åšæŒä¸‹å»ã€‚</p><p>è¿™ä¸€å¹´ï¼Œç»è¿‡ä¸€å¹´çš„æ¼«é•¿ç­‰å¾…ï¼Œè€å©†çš„è‚ºéƒ¨é˜´å½±ç»ˆäºæ¶ˆå¤±ä¸è§ã€‚å·®ç‚¹å–œæè€Œæ³£ï¼ä¸€å¹´çš„åŸå› ä¸æ˜ï¼Œä¸€å¹´çš„æ‹…å¿§å¿å¿‘ï¼Œç»ˆäºåœ¨æœ€åè¿™ä¸€åˆ»éƒ½æ”¾ä¸‹ã€‚</p><p>è¿™ä¸€å¹´ï¼Œä¹Ÿæ›¾åŠ¨æ‘‡è¿‡æ¢ä¸ªçœ‹ä¼¼æ¯”è¾ƒæœ‰å‰é€”çš„èŒä¸šï¼Œä¸ç®¡æ˜¯æ²¡æœ‰ç›¸å…³å·¥ä½œç»éªŒï¼Œè¿˜æ˜¯å¼€ä»·å¤ªé«˜ï¼Œç»“æœè¿˜æ˜¯æ²¡æœ‰èµ°å‡ºå»ã€‚æƒ³å¼€äº†ä¹Ÿå¥½ï¼Œæ–°å…´ä¹Ÿå¥½ï¼Œä¼ ç»Ÿä¹Ÿå¥½ï¼Œéƒ½æ˜¯ä¸ºäº†ç”Ÿæ´»ï¼ŒåŠªåŠ›åšå¥½æ¯ä¸€ä»½å·¥ä½œå§ã€‚</p><p>è¿™ä¸€å¹´ï¼Œå‰å‰ååç»å†è¿‡å¾ˆå¤šé¡¹ç›®ï¼Œæ€»ç»“äº†ä¸€äº›æ€è€ƒï¼Œä½†æ€»æ„Ÿè§‰æœ‰ç‚¹å•è–„ï¼Œæ— æ³•å½¢æˆè‡ªå·±çš„æ–¹æ³•è®ºã€‚è™½ä¸èƒ½å·¦å³å¤§ç¯å¢ƒï¼Œå¸Œæœ›å¯ä»¥å½¢æˆè‡ªå·±çš„æ–¹æ³•è®ºï¼Œä¸æ±‚æŒ‡å¯¼åˆ«äººï¼Œä½†æ±‚æŒ‡å¯¼è‡ªå·±ã€‚</p><p>è¿™ä¸€å¹´ï¼Œè¿˜æ˜¯æ— æ³•å¹³é™è‡ªå·±çš„å†…å¿ƒï¼Œæ¯å½“å¤œæ·±äººé™ï¼Œè¿˜æ—¶å¸¸æƒ³èµ·è¿‡å»çš„ä¸€äº›äº‹ã€‚ä¸€ç›´è€¿è€¿äºæ€€ï¼Œå¤šæƒ³å†å¤šå‡ å¹´æ—¶å…‰å¯ä»¥é™ªåœ¨å®¶äººèº«æ—ã€‚</p><p>2016å¹´ï¼Œæˆ‘å¸Œæœ›èƒ½å¤ŸåšæŒè¿åŠ¨ï¼Œå¥åº·ç”Ÿæ´»ä»æ¯ä¸€å¤©å¼€å§‹ã€‚</p><p>2016å¹´ï¼Œæˆ‘å¸Œæœ›èƒ½åƒåšæŒè¿åŠ¨ä¸€æ ·åšæŒè¯»å‡ æœ¬æœ‰æ„æ€çš„ä¹¦ã€‚</p><p>2016å¹´ï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿæ¯æ®µæ—¶é—´å­¦ä¹ ä¸€æ ·æ–°ä¸œè¥¿ï¼Œé¢†åŸŸä¸é™ï¼Œå…ˆä»æ„Ÿå…´è¶£çš„å¼€å§‹ã€‚</p><p>2016å¹´ï¼Œæˆ‘å¸Œæœ›èƒ½å®‰å®šä¸‹æ¥ï¼Œèƒ½å¤ŸåŸºäº2.0ç‰ˆæœ¬å¼€å‘å‡º2.1ç‰ˆæœ¬ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;2015å¹´å¯¹æˆ‘æ¥è®²ï¼Œæ˜¯ä¸å¤ªé¡ºåˆ©çš„ä¸€å¹´ï¼Œç»å†äº†å„ç§ä¸å¥½çš„äº‹ã€‚äººæœªä¸‰åè€Œç«‹ï¼Œå´å·²å°å°½äººç”Ÿç™¾æ€çš„æ„Ÿè§‰ã€‚&lt;/p&gt;
&lt;p&gt;å¹´åˆåˆ¶å®šçš„è®¡åˆ’ï¼Œå®Œæˆçš„å¹¶ä¸å¥½ï¼Œç”šè‡³å·²ç»çœ‹ä¸æ‡‚å½“åˆçš„ç®€å†™æ˜¯å•¥äº†ï¼Œæƒ­æ„§æƒ­æ„§ã€‚è¿™ä¹Ÿå’Œå½“åˆçš„ç›®æ ‡å¤ªç¬¼ç»Ÿæœ‰å…³ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸€å¹´ï¼ŒåšæŒè¯»ä¹¦ï¼Œæ—¶æœ‰æ–­ç»­ï¼Œä¹Ÿçœ‹äº†å¥½äº›æœ¬ä¹¦ï¼Œä¸€</summary>
      
    
    
    
    <category term="ç”Ÿæ´»è®°å½•" scheme="http://blog.cuicc.com/categories/%E7%94%9F%E6%B4%BB%E8%AE%B0%E5%BD%95/"/>
    
    
    <category term="æ€»ç»“" scheme="http://blog.cuicc.com/tags/%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>æŠ€æœ¯å¼€å‘çš„ä¸€äº›æ€è€ƒ</title>
    <link href="http://blog.cuicc.com/blog/2015/12/06/thinking-about-technoloy-development/"/>
    <id>http://blog.cuicc.com/blog/2015/12/06/thinking-about-technoloy-development/</id>
    <published>2015-12-06T08:52:35.000Z</published>
    <updated>2025-03-16T07:58:25.510Z</updated>
    
    <content type="html"><![CDATA[<h3 id="æŠ€æœ¯å¼€å‘æ˜¯ä»€ä¹ˆ"><a class="header-anchor" href="#æŠ€æœ¯å¼€å‘æ˜¯ä»€ä¹ˆ"></a>æŠ€æœ¯å¼€å‘æ˜¯ä»€ä¹ˆ</h3><p>ç»´åŸºç™¾ç§‘ä¸Šæ²¡æœ‰ç›¸å…³è¯æ¡ï¼Œç™¾åº¦ç™¾ç§‘è§£é‡Šå¦‚ä¸‹ï¼š</p><blockquote><p>æŠ€æœ¯å¼€å‘ï¼ˆTechnical Developmentï¼‰æ˜¯æŠŠç ”ç©¶æ‰€å¾—åˆ°çš„å‘ç°æˆ–ä¸€èˆ¬ç§‘å­¦çŸ¥è¯†åº”ç”¨äºäº§å“å’Œå·¥è‰ºä¸Šçš„æŠ€æœ¯æ´»åŠ¨ã€‚ å·¥ä¸šä¼ä¸šæŠ€æœ¯å¼€å‘çš„å¯¹è±¡ä¸»è¦æœ‰ï¼šäº§å“çš„å¼€å‘ã€è®¾å¤‡ä¸å·¥å…·çš„å¼€å‘ã€ç”Ÿäº§å·¥è‰ºçš„å¼€å‘ã€èƒ½æºä¸åŸææ–™çš„å¼€å‘ã€æ”¹å–„ç¯å¢ƒçš„æŠ€æœ¯å¼€å‘ç­‰ã€‚ä¸åŒçš„ä¼ä¸šå¯æ ¹æ®ä¸åŒçš„æƒ…å†µé€‰æ‹©æŠ€æœ¯å¼€å‘çš„é‡ç‚¹ã€‚</p><footer><strong>æŠ€æœ¯å¼€å‘</strong><cite><a href="http://baike.baidu.com/view/1273954.htm">ç™¾åº¦ç™¾ç§‘</a></cite></footer></blockquote><p>å½’çº³æ€»ç»“ä¸€ä¸‹ï¼Œç°åœ¨çš„æŠ€æœ¯å¼€å‘æ— å¤–ä¹ä»¥ä¸‹ä¸¤ç‚¹ï¼š</p><ol><li>å‘æ˜åˆ›é€ æ–°æŠ€æœ¯è§£å†³(æ½œåœ¨)é—®é¢˜</li><li>ç»„åˆç°æœ‰å‰æ²¿æŠ€æœ¯è§£å†³(æ½œåœ¨)é—®é¢˜</li></ol><p>å¯¹å¤§å¤šæ•°ä¼ä¸šæ¥è¯´ï¼Œå¤§å¤šæ•°æ—¶å€™éƒ½æ˜¯åœ¨ç”¨ç¬¬2ç‚¹ã€‚èƒ½å¤Ÿåšåˆ°ç¬¬1ç‚¹çš„å°‘ä¹‹åˆå°‘ã€‚</p><span id="more"></span><h3 id="æŠ€æœ¯å¼€å‘åšä»€ä¹ˆ"><a class="header-anchor" href="#æŠ€æœ¯å¼€å‘åšä»€ä¹ˆ"></a>æŠ€æœ¯å¼€å‘åšä»€ä¹ˆ</h3><p>æˆ‘æ‰€ç†è§£çš„æŠ€æœ¯å¼€å‘è¦å¿«é€Ÿåšå‡ºäº§å“åŸå‹ï¼ŒéªŒè¯æ˜¯å¦å¯ç”¨äºæ­£å¼äº§å“ä¸­ã€‚åŸºäºè¿™ä¸ªç†è§£ï¼ŒæŠ€æœ¯å¼€å‘éœ€è¦åšä»¥ä¸‹ä¸¤ç‚¹ï¼š</p><ol><li>å¯è¡Œæ€§éªŒè¯ï¼ŒéªŒè¯è¯¥æŠ€æœ¯æ–¹æ¡ˆæ˜¯å¦å¯è¡Œï¼Œèƒ½å¦è¾¾åˆ°éœ€æ±‚çš„ç›®æ ‡</li><li>å¯ç”¨æ€§å®æ–½ï¼Œåœ¨å¯è¡Œæ€§åŸºç¡€ä¸Šï¼Œè¯¥æŠ€æœ¯æ–¹æ¡ˆèƒ½å¦æ˜“äºå®æ–½ï¼Œè¾¾åˆ°å¯ç”¨æ˜“ç”¨çš„ç¨‹åº¦ã€‚</li></ol><p><em>å¯¹äº§å“å®è·µæ¥è¯´ï¼ŒçœŸæ­£çš„æŠ€æœ¯ç§¯ç´¯æ¥è‡ªäºå¯ç”¨æ€§ï¼Œå¯è¡Œæ€§æ— æ³•è¯†åˆ«é—®é¢˜ç‚¹</em></p><h3 id="æŠ€æœ¯å¼€å‘é—®é¢˜ç‚¹"><a class="header-anchor" href="#æŠ€æœ¯å¼€å‘é—®é¢˜ç‚¹"></a>æŠ€æœ¯å¼€å‘é—®é¢˜ç‚¹</h3><p>é€šå¸¸æˆ‘ä»¬çš„å¼€å‘æ–¹å¼ï¼Œæˆ‘ä»¬çš„æ¶æ„æ¼”è¿›æ–¹å¼æ˜¯ï¼š</p><ol><li>å…ˆå®ç°ï¼Œå…ˆè¾¾åˆ°éœ€æ±‚çš„ç›®æ ‡</li><li>å†ä¼˜åŒ–ï¼Œä¼˜åŒ–è®¾è®¡ä¸å¥½çš„åœ°æ–¹</li><li>æœåŠ¡åŒ–ï¼ŒæœåŠ¡åŒ–æ”¹é€ </li><li>åˆé€‚åŒ–ï¼Œé€‰æ‹©åˆé€‚çš„æŠ€æœ¯å®ç°</li></ol><h4 id="æˆ‘ä»¬é‡åˆ°çš„é—®é¢˜"><a class="header-anchor" href="#æˆ‘ä»¬é‡åˆ°çš„é—®é¢˜"></a>æˆ‘ä»¬é‡åˆ°çš„é—®é¢˜</h4><ol><li>åªæœ‰å¤§é¥¼ï¼Œæ²¡æœ‰å®æ–½ç›®æ ‡</li><li>å¤§é¥¼çš„æ¦‚å¿µï¼Œå¤§é¥¼çš„æ¦‚å¿µå›¾ï¼Œæ€ä¹ˆåšé¥¼ï¼Ÿ</li><li>SE/é¡¹ç›®ç»ç†èŒè´£ä¸æ˜ç¡®<ol><li>ç›®æ ‡å…·ä½“åŒ–åŠåˆ†è§£</li><li>è½¯ä»¶æ¶æ„è®¾è®¡</li></ol></li><li>é¡¹ç›®ç»ç†å¤ªå¼±åŠ¿<ol><li>é¡¹ç›®å®æ–½å†³ç­–</li><li>æŠ€æœ¯èƒŒæ™¯æƒå¨</li><li>è¿­ä»£åˆ’åˆ†å®æ–½</li><li>è´£ä»»åˆ’åˆ†è·Ÿè¸ª</li><li>è¿­ä»£ç›®æ ‡è¯„ä¼°</li></ol></li><li>ä¸æ€æ±‚å˜<ol><li>å†å²åŒ…è¢±å¤ªé‡ï¼Œå¦‚ä½•å¹³è¡¡å…¼å®¹ä¸åˆ›æ–°</li><li>æ‹¥æŠ±å…ˆè¿›ç”Ÿäº§åŠ›å·¥å…·ï¼Œæé«˜æ•ˆç‡</li></ol></li></ol><h4 id="ç»“æœå¦‚ä½•"><a class="header-anchor" href="#ç»“æœå¦‚ä½•"></a>ç»“æœå¦‚ä½•</h4><ol><li>åŸå‹åŸºæœ¬å°±æ˜¯è¿‡å®¶å®¶</li><li>å‡è£…èƒ½ä»¥åŠè§£å†³äº†é—®é¢˜</li><li>è‡ªä»¥ä¸ºåšçš„å¾ˆé«˜å¤§ä¸Š</li><li>ç›²ç›®è¿½æ±‚/åŒ…è£…æ–°æ¦‚å¿µ</li></ol><h3 id="æŠ€æœ¯å¼€å‘æ€ä¹ˆåš"><a class="header-anchor" href="#æŠ€æœ¯å¼€å‘æ€ä¹ˆåš"></a>æŠ€æœ¯å¼€å‘æ€ä¹ˆåš</h3><p>å›åˆ°æœ€åˆçš„çœ‹æ³•ï¼ŒæŠŠæŠ€æœ¯å¼€å‘å›¢é˜Ÿæƒ³è±¡æˆæ˜¯ä¸€å®¶åˆ›ä¸šå…¬å¸ï¼Œåº”è¯¥æ€ä¹ˆåšã€‚</p><p>ä»æƒ³æ³•/éœ€æ±‚åˆ°å¿«é€Ÿå®ç°åŸå‹ï¼Œåˆ°æŠ•å…¥å¸‚åœºéªŒè¯ï¼Œåˆ°ä¸æ–­è¿­ä»£ä¼˜åŒ–ï¼Œåˆ°ç”¨æˆ·ä½“éªŒè‰¯å¥½çš„äº§å“ã€‚</p><p>å¯¹äºæˆ‘ä»¬æ¥è¯´ï¼Œçœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š</p><ol><li>éœ€æ±‚åˆ†æå‡ºæ˜ç¡®ç›®æ ‡ï¼Œç›®æ ‡åˆ†è§£ï¼Œæ¶æ„è®¾è®¡ï¼Œè¿­ä»£åˆ’åˆ†</li><li>ä»åŸå‹æœ€å°é›†å‡ºå‘ï¼Œæ¯ä¸ªè¿­ä»£éƒ½æ˜¯å¯ç”¨çš„(å¯æŠ•å…¥â€œå¸‚åœºâ€éªŒè¯)</li><li>æ ¹æ®å¸‚åœºåé¦ˆï¼Œè¿­ä»£ä¼˜åŒ–ï¼Œå†æ¬¡å¾ªç¯</li></ol><p>ä»å…·ä½“å¼€å‘æ¥è¯´ï¼š</p><ol><li>æ¯æ¬¡è¿­ä»£ç›®æ ‡å¯¹é½ï¼Œåšä»€ä¹ˆ</li><li>æ¯æ¬¡è¿­ä»£éœ€æ±‚ä¸è®¾è®¡æ˜ç¡®</li><li>æ¯æ¬¡è¿­ä»£å„æ¨¡å—è‡ªæˆ‘å……åˆ†çš„åˆ†æä¸è®¾è®¡</li><li>æ¯æ¬¡è¿­ä»£å®Œæˆç³»ç»Ÿæ˜¯å¯ä»¥ç”¨çš„ï¼Œä¿è¯è¿™ä¸ªåŸºæœ¬ç‚¹</li></ol><p><em>æš‚æ—¶æƒ³åˆ°è¿™ä¹ˆå¤š</em></p><p><em>ä»…ä»ä¸ªäººè§’åº¦çœ‹ï¼Œæ„Ÿè§‰æœ‰ç‚¹ç‰‡é¢ï¼Œä»é«˜å±‚çœ‹æ˜¯å¦å¦‚æ­¤å‘¢</em></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;æŠ€æœ¯å¼€å‘æ˜¯ä»€ä¹ˆ&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#æŠ€æœ¯å¼€å‘æ˜¯ä»€ä¹ˆ&quot;&gt;&lt;/a&gt;æŠ€æœ¯å¼€å‘æ˜¯ä»€ä¹ˆ&lt;/h3&gt;
&lt;p&gt;ç»´åŸºç™¾ç§‘ä¸Šæ²¡æœ‰ç›¸å…³è¯æ¡ï¼Œç™¾åº¦ç™¾ç§‘è§£é‡Šå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;æŠ€æœ¯å¼€å‘ï¼ˆTechnical Developmentï¼‰æ˜¯æŠŠç ”ç©¶æ‰€å¾—åˆ°çš„å‘ç°æˆ–ä¸€èˆ¬ç§‘å­¦çŸ¥è¯†åº”ç”¨äºäº§å“å’Œå·¥è‰ºä¸Šçš„æŠ€æœ¯æ´»åŠ¨ã€‚ å·¥ä¸šä¼ä¸šæŠ€æœ¯å¼€å‘çš„å¯¹è±¡ä¸»è¦æœ‰ï¼šäº§å“çš„å¼€å‘ã€è®¾å¤‡ä¸å·¥å…·çš„å¼€å‘ã€ç”Ÿäº§å·¥è‰ºçš„å¼€å‘ã€èƒ½æºä¸åŸææ–™çš„å¼€å‘ã€æ”¹å–„ç¯å¢ƒçš„æŠ€æœ¯å¼€å‘ç­‰ã€‚ä¸åŒçš„ä¼ä¸šå¯æ ¹æ®ä¸åŒçš„æƒ…å†µé€‰æ‹©æŠ€æœ¯å¼€å‘çš„é‡ç‚¹ã€‚&lt;/p&gt;
&lt;footer&gt;&lt;strong&gt;æŠ€æœ¯å¼€å‘&lt;/strong&gt;&lt;cite&gt;&lt;a href=&quot;http://baike.baidu.com/view/1273954.htm&quot;&gt;ç™¾åº¦ç™¾ç§‘&lt;/a&gt;&lt;/cite&gt;&lt;/footer&gt;&lt;/blockquote&gt;
&lt;p&gt;å½’çº³æ€»ç»“ä¸€ä¸‹ï¼Œç°åœ¨çš„æŠ€æœ¯å¼€å‘æ— å¤–ä¹ä»¥ä¸‹ä¸¤ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å‘æ˜åˆ›é€ æ–°æŠ€æœ¯è§£å†³(æ½œåœ¨)é—®é¢˜&lt;/li&gt;
&lt;li&gt;ç»„åˆç°æœ‰å‰æ²¿æŠ€æœ¯è§£å†³(æ½œåœ¨)é—®é¢˜&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¯¹å¤§å¤šæ•°ä¼ä¸šæ¥è¯´ï¼Œå¤§å¤šæ•°æ—¶å€™éƒ½æ˜¯åœ¨ç”¨ç¬¬2ç‚¹ã€‚èƒ½å¤Ÿåšåˆ°ç¬¬1ç‚¹çš„å°‘ä¹‹åˆå°‘ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="èŒåœºæ„Ÿæ‚Ÿ" scheme="http://blog.cuicc.com/categories/%E8%81%8C%E5%9C%BA%E6%84%9F%E6%82%9F/"/>
    
    
    <category term="technology" scheme="http://blog.cuicc.com/tags/technology/"/>
    
  </entry>
  
  <entry>
    <title>tips for git submodule</title>
    <link href="http://blog.cuicc.com/blog/2015/10/25/tips-for-git-submodule/"/>
    <id>http://blog.cuicc.com/blog/2015/10/25/tips-for-git-submodule/</id>
    <published>2015-10-25T06:41:56.000Z</published>
    <updated>2025-03-16T07:58:25.510Z</updated>
    
    <content type="html"><![CDATA[<p>è¿‘æ¥ä½¿ç”¨<code>git submodule</code>æ¥ç®¡ç†é¡¹ç›®ï¼Œè¶Ÿè¿‡ä¸€äº›å‘ï¼Œæ•´ç†è®°å½•ä¸€ä¸‹ã€‚</p><p>##ä¸ºå•¥ä½¿ç”¨submodule</p><p>Gitå®˜ç½‘å¦‚æ˜¯è¯´ï¼Œç®€å•çš„è¯´ï¼Œå°±æ˜¯åœ¨å¼•å…¥ç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œæˆ–è€…ä¸€äº›å…¬å…±æ¨¡å—çš„ç®¡ç†æ—¶ï¼Œå¯ä»¥ä½¿ç”¨submoduleï¼Œæ—¢å•ç‹¬ç®¡ç†æ›´æ–°ï¼Œåˆèƒ½å¾ˆæ–¹ä¾¿çš„å¼•å…¥ä½¿ç”¨ã€‚</p><blockquote><p>A submodule allows you to keep another Git repository in a subdirectory of your repository. The other repository has its own history, which does not interfere with the history of the current repository. This can be used to have external dependencies such as third party libraries for example.</p><footer><strong>Git</strong><cite><a href="https://git-scm.com/docs/git-submodule">git-submodule Document</a></cite></footer></blockquote><span id="more"></span><p>##Add submodule</p><p>åœ¨ä¸€ä¸ªrepoä¸­åŠ å…¥submoduleçš„å‘½ä»¤å¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git submodule [--quiet] add [-b &lt;branch&gt;] [-f|--force] [--name &lt;name&gt;]</span><br><span class="line">              [--reference &lt;repository&gt;] [--depth &lt;depth&gt;] [--] &lt;repository&gt; [&lt;path&gt;]</span><br></pre></td></tr></table></figure><p>åœ¨addä¸€ä¸ªsubmoduleä¹‹åï¼Œåœ¨å½“å‰repoä¸‹ä¾¿ä¼šç”Ÿæˆä¸€ä¸ª<code>.gitmodules</code>æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶è®°å½•submoduleçš„ç›¸å…³ä¿¡æ¯ï¼Œå…¶å†…å®¹å¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[submodule &quot;submodule-name&quot;]</span><br><span class="line">        path = path name</span><br><span class="line">        url = https://github.com/submodule-name.git</span><br></pre></td></tr></table></figure><p>##update submodule</p><p>cloneä¸€ä¸ªrepoåï¼Œå…¶submoduleåªä¼šæ˜¾ç¤ºä¸€ä¸ªç›®å½•ï¼Œå…¶å†…å®¹æ˜¯ç©ºçš„ï¼Œè¿™æ—¶éœ€è¦updateå„ä¸ªsubmoduleï¼Œå…¶å‘½ä»¤å¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git submodule [--quiet] init [--] [&lt;path&gt;â€¦â€‹]</span><br><span class="line">git submodule [--quiet] update [--init] [--remote] [-N|--no-fetch]</span><br><span class="line">              [-f|--force] [--rebase|--merge] [--reference &lt;repository&gt;]</span><br><span class="line">              [--depth &lt;depth&gt;] [--recursive] [--] [&lt;path&gt;â€¦â€‹]</span><br></pre></td></tr></table></figure><p>æ›´æ–°æ“ä½œéœ€è¦å…ˆinitä»¥ä¸‹ï¼Œç„¶åå†updateã€‚è¯¥ä¸¤ä¸ªæ“ä½œä¹Ÿå¯ä»¥åˆå¹¶ä¸ºä¸€ä¸ªå‘½ä»¤å®Œæˆï¼Œå°±æ˜¯åœ¨updateæ—¶åŠ å…¥<code>--init</code>å‚æ•°ã€‚</p><p>å¦‚æœéœ€è¦ä»è¿œç¨‹repoä¸­update submoduleï¼Œéœ€è¦åœ¨updateæ—¶åŠ å…¥<code>--remote</code>å‚æ•°ï¼Œè¿™æ ·ä¼špullä¸‹æ¥serverä¸Šçš„æœ€æ–°ç‰ˆã€‚</p><p>##modify submodule repo</p><p>æ›´æ”¹submoduleçš„repoåœ°å€ï¼Œæ²¡æœ‰ç›´æ¥çš„å‘½ä»¤å¯ä»¥å®Œæˆï¼Œéœ€è¦ä¿®æ”¹å‰é¢æåˆ°çš„<code>.gitmodules</code>æ–‡ä»¶ï¼Œå°†<code>url</code>æ”¹æˆè¦æ›´æ”¹æˆçš„repoåœ°å€ã€‚ç„¶åæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git submodule [--quiet] sync [--recursive] [--] [&lt;path&gt;â€¦â€‹]</span><br></pre></td></tr></table></figure><p>##remove submodule</p><p>åˆ é™¤submoduleçš„å‘½ä»¤çš„è¿‡ç¨‹æ¯”è¾ƒç¹å¤šï¼Œéœ€è¦å¤šä¸ªå‘½ä»¤æ‰èƒ½å®Œæˆï¼Œå…¶å‘½ä»¤å¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mv asubmodule asubmodule_tmp</span><br><span class="line">git submodule [--quiet] deinit [-f|--force] [--] &lt;path&gt;â€¦â€‹   </span><br><span class="line">git rm asubmodule</span><br><span class="line"># if you want to leave it in your working tree</span><br><span class="line">git rm --cached asubmodule</span><br><span class="line">mv asubmodule_tmp asubmodule</span><br><span class="line">rm -rf .git/modules/asubmodule</span><br></pre></td></tr></table></figure><p>##modify submodule content</p><p>updateä¹‹åçš„submoduleæ˜¯ä¸å±äºä»»ä½•ä¸€ä¸ªbranchçš„ï¼Œä¹Ÿå°±æ˜¯æ— branchçš„ã€‚submoduleçš„HEADæ˜¯å¤„äº<code>detached HEAD</code>çŠ¶æ€çš„ã€‚è¿™æ ·ï¼Œå¦‚æœè¦æ›´æ”¹submoduleçš„å†…å®¹ï¼Œéœ€è¦é¦–å…ˆåˆ‡æ¢åˆ°è¦æ›´æ–°çš„branchï¼Œç„¶åæŒ‰æ­£å¸¸çš„gitæµç¨‹add/commit/pull/pushç­‰æ“ä½œã€‚</p><p>å¦‚æœç›´æ¥ä¿®æ”¹äº†submoduleçš„å†…å®¹ï¼Œç„¶åcommitäº†è¯¥ä¿®æ”¹ï¼Œé‚£ä¹ˆåœ¨pushæ—¶ä¼šå‡ºç°up-to-updateçš„æƒ…å†µã€‚è¿™æ—¶å¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤æŒ½æ•‘</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yygcui@ubuntu$ git checkout master</span><br><span class="line">Warning: you are leaving 1 commit behind, not connected to</span><br><span class="line">any of your branches:</span><br><span class="line"></span><br><span class="line">  &lt;commit id&gt; forget to check out master</span><br><span class="line"></span><br><span class="line">If you want to keep them by creating a new branch, this may be a good time</span><br><span class="line">to do so with:</span><br><span class="line"></span><br><span class="line"> git branch new_branch_name &lt;commit id&gt;</span><br><span class="line"></span><br><span class="line">Switched to branch &#x27;master&#x27;</span><br><span class="line">yygcui@ubuntu$ git cherry-pick &lt;commit id&gt;</span><br><span class="line">yygcui@ubuntu$ git push</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;è¿‘æ¥ä½¿ç”¨&lt;code&gt;git submodule&lt;/code&gt;æ¥ç®¡ç†é¡¹ç›®ï¼Œè¶Ÿè¿‡ä¸€äº›å‘ï¼Œæ•´ç†è®°å½•ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;##ä¸ºå•¥ä½¿ç”¨submodule&lt;/p&gt;
&lt;p&gt;Gitå®˜ç½‘å¦‚æ˜¯è¯´ï¼Œç®€å•çš„è¯´ï¼Œå°±æ˜¯åœ¨å¼•å…¥ç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œæˆ–è€…ä¸€äº›å…¬å…±æ¨¡å—çš„ç®¡ç†æ—¶ï¼Œå¯ä»¥ä½¿ç”¨submoduleï¼Œæ—¢å•ç‹¬ç®¡ç†æ›´æ–°ï¼Œåˆèƒ½å¾ˆæ–¹ä¾¿çš„å¼•å…¥ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;A submodule allows you to keep another Git repository in a subdirectory of your repository. The other repository has its own history, which does not interfere with the history of the current repository. This can be used to have external dependencies such as third party libraries for example.&lt;/p&gt;
&lt;footer&gt;&lt;strong&gt;Git&lt;/strong&gt;&lt;cite&gt;&lt;a href=&quot;https://git-scm.com/docs/git-submodule&quot;&gt;git-submodule Document&lt;/a&gt;&lt;/cite&gt;&lt;/footer&gt;&lt;/blockquote&gt;</summary>
    
    
    
    <category term="æŠ€æœ¯ç§¯ç´¯" scheme="http://blog.cuicc.com/categories/%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/"/>
    
    
    <category term="git" scheme="http://blog.cuicc.com/tags/git/"/>
    
    <category term="submodule" scheme="http://blog.cuicc.com/tags/submodule/"/>
    
  </entry>
  
</feed>
