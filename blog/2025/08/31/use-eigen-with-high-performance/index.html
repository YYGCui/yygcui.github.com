<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="YYGCuiçš„ä¸ªäººåšå®¢">
    <meta name="keyword" content="">
    <meta name="theme-color" content="#600090">
    <meta name="msapplication-navbutton-color" content="#600090">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="#600090">
    <link rel="shortcut icon" href="/favicon.png">
    <link rel="alternate" type="application/atom+xml" title="YYGCui" href="/atom.xml">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.css">
    <title>
        
        Eigené«˜æ€§èƒ½ä½¿ç”¨ï½œYYGCui&#39;s blog
        
    </title>

    <link rel="canonical" href="http://blog.cuicc.com/blog/2025/08/31/use-eigen-with-high-performance/">

    <!-- Bootstrap Core CSS -->
    
<link rel="stylesheet" href="/css/bootstrap.min.css">


    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/blog-style.css">


    <!-- Pygments Github CSS -->
    
<link rel="stylesheet" href="/css/syntax.css">

<meta name="generator" content="Hexo 7.3.0"></head>

<style>

    header.intro-header {
        background-image: url('/images/header/lion-blur-bg.jpg')
    }
</style>
<!-- hack iOS CSS :active style -->
<body ontouchstart="" class="animated fadeIn">
<!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top " id="nav-top" data-ispost = "true" data-istags="false
" data-ishome = "false" >
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand animated pulse" href="/">
                <span class="brand-logo">
                    YYGCui
                </span>
                's Blog
            </a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <!-- /.navbar-collapse -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
					
                    
                        
							
								
							
						
                    
                        
							
                        <li>
                            <a href="/archives/">archive</a>
                        </li>
							
						
                    
                        
							
                        <li>
                            <a href="/categories/">categories</a>
                        </li>
							
						
                    
                        
							
                        <li>
                            <a href="/tags/">tags</a>
                        </li>
							
						
                    
					
					
						<li>
							<a href="/about">About</a>
						</li>
					
                </ul>
            </div>
        </div>
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
//    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');
    var $navlist = document.querySelectorAll('#huxblog_navbar .navbar-nav .li');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>

<!-- Main Content -->

<!--only post-->


<img class="wechat-title-img"
     src="/images/header/river-cloud.jpg">


<style>
    
    header.intro-header {
        background-image: url('/images/header/river-cloud.jpg?imageView2/1/w/1400/h/400/interlace/1/q/90')
    }

    
</style>

<header class="intro-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 text-center">
                <div class="post-heading">
                    <h1>Eigené«˜æ€§èƒ½ä½¿ç”¨</h1>
                    
                    <span class="meta">
                         ä½œè€… YYGCui
                        <span>
                          æ—¥æœŸ 2025-08-31
                         </span>
                    </span>
                    <div class="tags text-center">
                        <span>Categories:</span>
                        
                        <a class="tag" href="/categories/æŠ€æœ¯ç§¯ç´¯/"
                           title="æŠ€æœ¯ç§¯ç´¯">æŠ€æœ¯ç§¯ç´¯</a>
                        
                        <span>Tags:</span>
                        
                        <a class="tag" href="/tags/æ™ºèƒ½é©¾é©¶/"
                           title="æ™ºèƒ½é©¾é©¶">æ™ºèƒ½é©¾é©¶</a>
                        
                        <a class="tag" href="/tags/æ€§èƒ½ä¼˜åŒ–/"
                           title="æ€§èƒ½ä¼˜åŒ–">æ€§èƒ½ä¼˜åŒ–</a>
                        
                        <a class="tag" href="/tags/Eigen/"
                           title="Eigen">Eigen</a>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="post-title-haojen">
        <span>
            Eigené«˜æ€§èƒ½ä½¿ç”¨
        </span>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <!-- Post Container -->
            <div class="col-lg-8 col-lg-offset-1 col-sm-9 post-container">
                <p>ä¹‹æ‰€ä»¥å†™è¿™ä¸ªè¯é¢˜ï¼Œæ˜¯å› ä¸ºåœ¨å®é™…å·¥ä½œä¸­é‡åˆ°äº†ç›¸å…³çš„é—®é¢˜ï¼Œæ¯”å¦‚åœ¨å®šä½coredumpé—®é¢˜æ—¶å‘ç°æ˜¯å› ä¸ºEigenå†…å­˜æœªå¯¹é½å¯¼è‡´ï¼Œæ¯”å¦‚åœ¨ä¼˜åŒ–æ€§èƒ½æ—¶å‘ç°æœ‰éšå«çš„åŠ¨æ€å†…å­˜ç”³è¯·æ˜¯å› ä¸ºä½¿ç”¨åŠ¨æ€çŸ©é˜µå¯¼è‡´â€¦ åŸºäºä¸Šè¿°å®é™…é—®é¢˜ï¼Œå‘ç°å¾ˆå¤šäººåªæ˜¯ä¼šä½¿ç”¨è¿™ä¸ªåº“ï¼Œä½†æ˜¯ä¸çŸ¥é“æ€ä¹ˆä½¿ç”¨æ›´é«˜æ•ˆï¼Œæ‰€ä»¥æ•´ç†äº†ä»¥ä¸‹è§„èŒƒã€‚</p>
<blockquote><p>Eigen æ˜¯ä¸€ä¸ªç”¨äºçº¿æ€§ä»£æ•°çš„ C++ æ¨¡æ¿åº“ï¼šåŒ…æ‹¬çŸ©é˜µã€å‘é‡ã€æ•°å€¼æ±‚è§£å™¨ä»¥åŠç›¸å…³ç®—æ³•ã€‚</p>
<footer><strong>https://eigen.tuxfamily.org/index.php?title=Main_Page</strong></footer></blockquote>
<h2 id="ä¸€ã€å¤´æ–‡åŒ…å«è¦æ±‚"><a class="header-anchor" href="#ä¸€ã€å¤´æ–‡åŒ…å«è¦æ±‚"></a>ä¸€ã€å¤´æ–‡åŒ…å«è¦æ±‚</h2>
<p>æŒ‰éœ€åŒ…å«ï¼Œ åªåŒ…å«éœ€è¦çš„ï¼š</p>
  <figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Eigen/Core&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Eigen/Dense&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Eigen/Geometry&gt;</span>  <span class="comment">// Quaternion, Transform</span></span></span><br></pre></td></tr></table></figure>
<p>ğŸš« ç¦ç”¨ <code>using namespace Eigen</code>; é¿å…åç§°å†²çª</p>
<h2 id="äºŒã€ç±»å‹é€‰æ‹©å’Œåˆå§‹åŒ–"><a class="header-anchor" href="#äºŒã€ç±»å‹é€‰æ‹©å’Œåˆå§‹åŒ–"></a>äºŒã€ç±»å‹é€‰æ‹©å’Œåˆå§‹åŒ–</h2>
<h3 id="ä¼˜å…ˆé€‰æ‹©å›ºå®šå¤§å°çŸ©é˜µï¼š"><a class="header-anchor" href="#ä¼˜å…ˆé€‰æ‹©å›ºå®šå¤§å°çŸ©é˜µï¼š"></a>ä¼˜å…ˆé€‰æ‹©å›ºå®šå¤§å°çŸ©é˜µï¼š</h3>
<table>
<thead>
<tr>
<th>å‘é‡/çŸ©é˜µ</th>
<th>ç±»å‹æ¨è</th>
</tr>
</thead>
<tbody>
<tr>
<td>2D/3D å‘é‡</td>
<td><code>Eigen::Vector2f / Vector2dã€Vector3f / Vector3d</code></td>
</tr>
<tr>
<td>å°çŸ©é˜µï¼ˆ&lt;= 4x4ï¼‰</td>
<td><code>Matrix3f, Matrix4d</code></td>
</tr>
<tr>
<td>å¤§çŸ©é˜µï¼ˆ&gt; 4x4ï¼‰</td>
<td><code>MatrixXf, MatrixXd</code>ï¼Œä½†æ³¨æ„ç»´åº¦ã€æ€§èƒ½</td>
</tr>
</tbody>
</table>
<p>ğŸš« ä¸æ¨è Matrix&lt;double, 3, 1&gt;ï¼›æ¨èç”¨ Vector3dï¼Œç®€æ´å¯è¯»æ€§é«˜ã€‚</p>
<h3 id="åˆå§‹åŒ–"><a class="header-anchor" href="#åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h3>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">Eigen::Vector3d <span class="title">pos</span><span class="params">(<span class="number">1.0</span>, <span class="number">2.0</span>, <span class="number">3.0</span>)</span></span>;</span><br><span class="line">Eigen::Matrix3d rot = Eigen::Matrix3d::<span class="built_in">Identity</span>();</span><br></pre></td></tr></table></figure>
<p>ç”¨ setZero(), setIdentity() åˆå§‹åŒ–ï¼Œä¸ç”¨æ‰‹åŠ¨å¾ªç¯æ¸…é›¶ã€‚</p>
<p>ä½¿ç”¨ reserve() å’Œ conservativeResize() æ—¶è¦å°å¿ƒï¼Œå®ƒä»¬å¯èƒ½é¢‘ç¹è§¦å‘ reallocationã€‚</p>
<h2 id="ä¸‰ã€å‚æ•°ä¼ é€’"><a class="header-anchor" href="#ä¸‰ã€å‚æ•°ä¼ é€’"></a>ä¸‰ã€å‚æ•°ä¼ é€’</h2>
<table>
<thead>
<tr>
<th>ç›®çš„</th>
<th>å†™æ³•</th>
<th>æ¨èç†ç”±</th>
</tr>
</thead>
<tbody>
<tr>
<td>åªè¯»ï¼ˆä¼ å‚ï¼‰</td>
<td>const Eigen::Vector3d&amp;</td>
<td>é›¶æ‹·è´ï¼Œæ€§èƒ½é«˜</td>
</tr>
<tr>
<td>å¯æ¥å—è¡¨è¾¾å¼/å­å—</td>
<td>const Eigen::Ref&lt;const Eigen::Vector3d&gt;&amp;</td>
<td>é€šç”¨æ¥å£é€‚ç”¨</td>
</tr>
<tr>
<td>å¯ä¿®æ”¹</td>
<td>Eigen::Vector3d&amp;</td>
<td>å…è®¸å‡½æ•°ä¿®æ”¹å€¼</td>
</tr>
<tr>
<td>å¯ä¿®æ”¹ + è¡¨è¾¾å¼</td>
<td>Eigen::Ref&lt;Eigen::Vector3d&gt;</td>
<td>ä¿®æ”¹ä¸´æ—¶å—ç­‰å¤æ‚ç»“æ„</td>
</tr>
</tbody>
</table>
<p>ğŸš« ä¸æ¨èå€¼ä¼ å‚ï¼Œå¤šä¸€æ¬¡æ‹·è´ï¼›æ¨èä½¿ç”¨å¼•ç”¨ä¼ å‚ã€‚</p>
<h2 id="å››ã€æ€§èƒ½ä¼˜åŒ–"><a class="header-anchor" href="#å››ã€æ€§èƒ½ä¼˜åŒ–"></a>å››ã€æ€§èƒ½ä¼˜åŒ–</h2>
<h3 id="1-é¿å…ä½¿ç”¨åŠ¨æ€å¤§å°çŸ©é˜µå¤„ç†å°ç»´åº¦çŸ©é˜µ"><a class="header-anchor" href="#1-é¿å…ä½¿ç”¨åŠ¨æ€å¤§å°çŸ©é˜µå¤„ç†å°ç»´åº¦çŸ©é˜µ"></a>1. é¿å…ä½¿ç”¨åŠ¨æ€å¤§å°çŸ©é˜µå¤„ç†å°ç»´åº¦çŸ©é˜µ</h3>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸æ¨è</span></span><br><span class="line"><span class="function">Eigen::MatrixXd <span class="title">A</span><span class="params">(<span class="number">3</span>,<span class="number">3</span>)</span></span>;</span><br><span class="line"><span class="comment">// æ¨è</span></span><br><span class="line">Eigen::Matrix3d A;</span><br></pre></td></tr></table></figure>
<p>ğŸš« é¿å…ä½¿ç”¨åŠ¨æ€å¤§å°çŸ©é˜µï¼ŒåŠ¨æ€å¤§å°çŸ©é˜µï¼Œæ¯æ¬¡éƒ½ä¼šåŠ¨æ€ç”³è¯·å†…å­˜malloc/free</p>
<h3 id="2-é¿å…ä¸´æ—¶ç‰©ä»¶"><a class="header-anchor" href="#2-é¿å…ä¸´æ—¶ç‰©ä»¶"></a>2. é¿å…ä¸´æ—¶ç‰©ä»¶</h3>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸æ¨èï¼šäº§ç”Ÿå¤šä¸ªä¸´æ—¶è¡¨è¾¾å¼</span></span><br><span class="line"><span class="comment">// C.inverseä¼šäº§ç”Ÿä¸´æ—¶çŸ©é˜µï¼Œç„¶åä¸¤ä¸ªä¹˜æ³•åˆ†åˆ«äº§ç”Ÿä¸´æ—¶çŸ©é˜µ</span></span><br><span class="line"><span class="comment">// auto ä¼šäº§ç”ŸåŠ¨æ€çŸ©é˜µï¼Œç”³è¯·å†…å­˜</span></span><br><span class="line"><span class="keyword">auto</span> result = A * B + C.<span class="built_in">inverse</span>() * D;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨è</span></span><br><span class="line">Eigen::Matrix3d tmp = C.<span class="built_in">inverse</span>() * D;</span><br><span class="line">Eigen::Matrix3d result = A * B + tmp;</span><br><span class="line"><span class="comment">// æ€§èƒ½æ›´å¥½çš„å†™æ³•</span></span><br><span class="line">Eigen::Matrix3d result = C.<span class="built_in">inverse</span>() * D;</span><br><span class="line">result.<span class="built_in">noalias</span>() += A * B;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ğŸš« é¿å…ä½¿ç”¨autoï¼Œ auto é»˜è®¤ä½¿ç”¨åŠ¨æ€å¤§å°çŸ©é˜µï¼Œä¼šåŠ¨æ€ç”³è¯·å†…å­˜</p>
<h3 id="3-åˆ©ç”¨è¡¨è¾¾å¼æ¨¡æ¿"><a class="header-anchor" href="#3-åˆ©ç”¨è¡¨è¾¾å¼æ¨¡æ¿"></a>3. åˆ©ç”¨è¡¨è¾¾å¼æ¨¡æ¿</h3>
<p><strong>é“¾å¼è¡¨è¾¾å¼</strong>ï¼šåˆå¹¶æ“ä½œä»¥å‡å°‘ä¸´æ—¶å˜é‡ã€‚</p>
<p>åªè¦å³ä¾§è¡¨è¾¾å¼ä¸æ¶‰åŠæ±‚é€†<code>inverse()</code>ã€ä¸é‡å¤ä½¿ç”¨å·¦å€¼å˜é‡ï¼Œå°±é‡‡ç”¨åˆå¹¶å†™æ³•ï¼ŒEigen å†…éƒ¨ä¼˜åŒ–ï¼Œå†…å­˜è®¿é—®å°‘</p>
 <figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸æ¨èï¼šå¤šæ¬¡å†…å­˜åˆ†é…ï¼Œç”Ÿæˆä¸´æ—¶å˜é‡</span></span><br><span class="line">temp1 = A * B;</span><br><span class="line">temp2 = C * D;</span><br><span class="line">result = temp1 + temp2; </span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨èï¼šEigen åˆå¹¶è®¡ç®—</span></span><br><span class="line">result = A * B + C * D;</span><br></pre></td></tr></table></figure>
<p>ğŸš« å°½é‡ä¸è¦äººä¸ºæ‹†åˆ†è¡¨è¾¾å¼ï¼Œé™¤éæ¶‰åŠæ±‚é€†ã€å †å ç­‰ï¼Œå¯ä»¥æ¢ä¸ªæ›´å¥½çš„å†™æ³•</p>
 <figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">result = result + A * B;  <span class="comment">// å¯èƒ½å¯¼è‡´åˆ«åå†²çªå’Œæ…¢é€Ÿè·¯å¾„</span></span><br><span class="line">result = result.<span class="built_in">eval</span>() + A * B;  <span class="comment">// å¼ºåˆ¶ä¸­é—´ç»“æœä¿å­˜ï¼Œé¿å…é—®é¢˜</span></span><br><span class="line">result.<span class="built_in">noalias</span>() += A * B; <span class="comment">// æ›´é«˜æ•ˆ</span></span><br></pre></td></tr></table></figure>
<p>ğŸš« é¿å… .eval()ï¼Œé™¤éä½ çœŸçš„æƒ³ materialize ç»“æœ</p>
<h3 id="4-ä½¿ç”¨-noalias-é˜²æ­¢å¤šä½™å†…å­˜æ‹·è´"><a class="header-anchor" href="#4-ä½¿ç”¨-noalias-é˜²æ­¢å¤šä½™å†…å­˜æ‹·è´"></a>4. ä½¿ç”¨ <code>.noalias()</code> é˜²æ­¢å¤šä½™å†…å­˜æ‹·è´</h3>
<p>å·¦å€¼å’Œå³å€¼æ²¡æœ‰æ··å æ—¶å¯ç”¨ï¼Œæ²¡æœ‰åˆ«åå…³ç³»ï¼ˆå¦‚ C != A &amp;&amp; C != Bï¼‰</p>
<p>é¿å… Eigen å†…éƒ¨è‡ªåŠ¨åˆ«åæ£€æµ‹ï¼ˆruntime checkï¼‰ï¼Œç›´æ¥å‘Šè¯‰å®ƒ C ä¸å³ä¾§æ²¡æœ‰å…±äº«å†…å­˜ï¼›</p>
<p>ç¼–è¯‘æ—¶å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œå°¤å…¶åœ¨<strong>å¤§çŸ©é˜µ</strong>è®¡ç®—ä¸­æ›´æ˜æ˜¾ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ…¢</span></span><br><span class="line">C = A * B;</span><br><span class="line"><span class="comment">// å¿«</span></span><br><span class="line">C.<span class="built_in">noalias</span>() = A * B;</span><br></pre></td></tr></table></figure>
<h3 id="5-é¿å…ç›´æ¥åçŸ©é˜µ"><a class="header-anchor" href="#5-é¿å…ç›´æ¥åçŸ©é˜µ"></a>5. é¿å…ç›´æ¥åçŸ©é˜µ</h3>
<p>çŸ©é˜µæ±‚é€†ä»£ä»·é«˜ã€æ•°å€¼ä¸ç¨³å®šï¼Œå»ºè®®æ›¿æ¢ä¸º solve() ç³»åˆ—ï¼Œæ ¹æ®çŸ©é˜µç±»å‹é€‰æ‹©åˆé€‚çš„æ±‚è§£å™¨</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸æ¨è</span></span><br><span class="line">x = A.<span class="built_in">inverse</span>() * b;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨èï¼š A å¿…é¡»æ˜¯å¯¹ç§°æ­£å®šçŸ©é˜µï¼ˆå¦åˆ™ .ldlt() ä¼šå¤±è´¥æˆ–è€…è¿”å›é”™è¯¯ç»“æœï¼‰</span></span><br><span class="line">x = A.<span class="built_in">ldlt</span>().<span class="built_in">solve</span>(b);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šç”¨çŸ©é˜µ</span></span><br><span class="line"><span class="comment">// é€‚ç”¨äº çŸ©é˜µè¡¨è¾¾å¼ï¼Œæ¯”å¦‚ Eigen::MatrixXd</span></span><br><span class="line"><span class="function">Eigen::MatrixXd <span class="title">A</span><span class="params">(<span class="number">3</span>, <span class="number">3</span>)</span></span>;</span><br><span class="line"><span class="function">Eigen::VectorXd <span class="title">b</span><span class="params">(<span class="number">3</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">Eigen::VectorXd x = A.<span class="built_in">partialPivLu</span>().<span class="built_in">solve</span>(b);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å›ºå®šç±»å‹çš„å†™æ³•</span></span><br><span class="line">Eigen::Matrix3d A;</span><br><span class="line">Eigen::Vector3d b;</span><br><span class="line"></span><br><span class="line"><span class="function">Eigen::PartialPivLU&lt;Eigen::Matrix3d&gt; <span class="title">lu</span><span class="params">(A)</span></span>;</span><br><span class="line">Eigen::Vector3d x = lu.<span class="built_in">solve</span>(b);</span><br></pre></td></tr></table></figure>
<p><strong>å¸¸è§çŸ©é˜µç±»å‹è¯´æ˜ï¼š</strong></p>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>é€‚ç”¨çŸ©é˜µç±»å‹</th>
<th>ç›¸å¯¹é€Ÿåº¦</th>
<th>ç¨³å®šæ€§</th>
<th>ç‰¹æ®Šè¦æ±‚</th>
<th>é€‚ç”¨è§„æ¨¡</th>
</tr>
</thead>
<tbody>
<tr>
<td>inverse()</td>
<td>é€šç”¨</td>
<td>åŸºå‡†</td>
<td>ä¸­ç­‰</td>
<td>æ— </td>
<td>&lt;= 100x100</td>
</tr>
<tr>
<td>LU</td>
<td>é€šç”¨æ–¹é˜µ</td>
<td>1.2x</td>
<td>é«˜</td>
<td>å¯é€†çŸ©é˜µ</td>
<td>100-1000</td>
</tr>
<tr>
<td>LDLT</td>
<td>å¯¹ç§°çŸ©é˜µ</td>
<td>2.0x</td>
<td>é«˜</td>
<td>å¯¹ç§°</td>
<td>-</td>
</tr>
<tr>
<td>LLT</td>
<td>å¯¹ç§°æ­£å®š</td>
<td>2.3x</td>
<td>å¾ˆé«˜</td>
<td>å¯¹ç§°æ­£å®š</td>
<td>-</td>
</tr>
</tbody>
</table>
<h3 id="6-æ•°æ®æ˜ å°„ä¸é›¶æ‹·è´"><a class="header-anchor" href="#6-æ•°æ®æ˜ å°„ä¸é›¶æ‹·è´"></a>6. æ•°æ®æ˜ å°„ä¸é›¶æ‹·è´</h3>
<p>Eigen::Mapï¼šç›´æ¥æ“ä½œå¤–éƒ¨å†…å­˜ï¼Œé¿å…å¤åˆ¶ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">double</span> data[<span class="number">16</span>];</span><br><span class="line"><span class="function">Eigen::Map&lt;Eigen::Matrix4d&gt; <span class="title">matrix</span><span class="params">(data)</span></span>;  <span class="comment">// æ˜ å°„æ•°ç»„ä¸º 4x4 çŸ©é˜µ</span></span><br></pre></td></tr></table></figure>
<h3 id="7-é€å…ƒç´ æ“ä½œä¼˜åŒ–"><a class="header-anchor" href="#7-é€å…ƒç´ æ“ä½œä¼˜åŒ–"></a>7. é€å…ƒç´ æ“ä½œä¼˜åŒ–</h3>
<p>ä½¿ç”¨ .array() æˆ–é€å…ƒç´ å‡½æ•°ï¼ˆå¦‚ .cwiseProduct()ï¼‰ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é€å…ƒç´ ä¹˜æ³•</span></span><br><span class="line">result = a.<span class="built_in">array</span>() * b.<span class="built_in">array</span>();</span><br><span class="line"><span class="comment">// æˆ–ä½¿ç”¨ cwiseProduct</span></span><br><span class="line">result = a.<span class="built_in">cwiseProduct</span>(b);</span><br></pre></td></tr></table></figure>
<h3 id="8-å¤åˆèµ‹å€¼è¿ç®—ç¬¦"><a class="header-anchor" href="#8-å¤åˆèµ‹å€¼è¿ç®—ç¬¦"></a>8. å¤åˆèµ‹å€¼è¿ç®—ç¬¦</h3>
<p>ä¼˜å…ˆä½¿ç”¨ +=ã€-= ç›´æ¥ä¿®æ”¹åŸå˜é‡ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸æ¨èï¼šä¸´æ—¶å˜é‡ã€å¤šä½™çš„å†…å­˜æ‹·è´</span></span><br><span class="line">A = A + B * C æ›´é«˜æ•ˆ  </span><br><span class="line"><span class="comment">// æ¨èï¼šè¡¨è¾¾å¼ä¼˜åŒ–ã€å¤ç”¨å†…å­˜</span></span><br><span class="line">A += B * C;  </span><br></pre></td></tr></table></figure>
<h3 id="9-å¹¶è¡ŒåŒ–åŠ é€Ÿ"><a class="header-anchor" href="#9-å¹¶è¡ŒåŒ–åŠ é€Ÿ"></a>9. å¹¶è¡ŒåŒ–åŠ é€Ÿ</h3>
<p>Eigen åœ¨è¿›è¡Œä¸€äº›çŸ©é˜µè¿ç®—ï¼ˆå¦‚å¤§çŸ©é˜µä¹˜æ³•ã€æ±‚é€†ã€åˆ†è§£ï¼‰æ—¶ï¼Œä¼šè‡ªåŠ¨ä½¿ç”¨å¤šçº¿ç¨‹åŠ é€Ÿã€‚å¦‚æœä½ ä¸è®¾ç½®ï¼ŒEigen ä¼šé»˜è®¤å°è¯•ä½¿ç”¨ç³»ç»Ÿæ£€æµ‹åˆ°çš„æ ¸å¿ƒæ•°ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">Eigen::<span class="built_in">setNbThreads</span>(<span class="number">4</span>);  <span class="comment">// è®¾ç½®çº¿ç¨‹æ•°</span></span><br></pre></td></tr></table></figure>
<p>å¯é€šè¿‡ä»¥ä¸‹æ¥å£æŸ¥è¯¢å½“å‰è®¾ç½®çš„çº¿ç¨‹æ•°</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> threads = Eigen::<span class="built_in">nbThreads</span>();  <span class="comment">// è·å–å½“å‰è®¾ç½®å€¼</span></span><br></pre></td></tr></table></figure>
<p>å»ºè®®æŒ‰éœ€é…ç½®ï¼Œé¿å…çº¿ç¨‹è¿‡å¤šæŠ¢å èµ„æºï¼Œéœ€è¦æµ‹è¯•çº¿ç¨‹æ•°å¯¹æ€§èƒ½çš„å½±å“</p>
<h2 id="äº”ã€å¸¦å®ä½“ç»“æ„å’Œ-STL-å­—æ®µ"><a class="header-anchor" href="#äº”ã€å¸¦å®ä½“ç»“æ„å’Œ-STL-å­—æ®µ"></a>äº”ã€å¸¦å®ä½“ç»“æ„å’Œ STL å­—æ®µ</h2>
<h3 id="å®ä½“ç»“æ„åŠ å¯¹é½æ“ä½œç¨‹åº"><a class="header-anchor" href="#å®ä½“ç»“æ„åŠ å¯¹é½æ“ä½œç¨‹åº"></a>å®ä½“ç»“æ„åŠ å¯¹é½æ“ä½œç¨‹åº</h3>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// struct/classï¼Œéƒ½éœ€è¦å¯¹é½</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Pose</span> &#123;</span><br><span class="line">  EIGEN_MAKE_ALIGNED_OPERATOR_NEW</span><br><span class="line">  Eigen::Vector3d position;</span><br><span class="line">  Eigen::Quaterniond orientation;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>å›ºå®šå°ºå¯¸å¯¹è±¡ï¼šéœ€å†…å­˜å¯¹é½ï¼Œåº”ç”¨<code>EIGEN_MAKE_ALIGNED_OPERATOR_NEW</code>ï¼Œé¿å… SIMD é”™è¯¯ã€‚å¦åˆ™åœ¨æŸäº›å¹³å°å¯èƒ½<strong>å´©æºƒ</strong></p>
<h3 id="åº”ç”¨-aligned-allocator"><a class="header-anchor" href="#åº”ç”¨-aligned-allocator"></a>åº”ç”¨ aligned allocator</h3>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">std::vector&lt;Eigen::Vector3d, Eigen::aligned_allocator&lt;Eigen::Vector3d&gt;&gt; points;</span><br></pre></td></tr></table></figure>
<blockquote><p>Using STL containers on fixed-size vectorizable Eigen types, or classes having members of such types, requires taking the following two steps:</p>
<p>A 16-byte-aligned allocator must be used. Eigen does provide one ready for use: aligned_allocator.</p>
<p>If you want to use the std::vector container, you need to #include &lt;Eigen/StdVector&gt;.</p>
<footer><strong>https://libeigen.gitlab.io/eigen/docs-3.3/group__TopicStructHavingEigenMembers.html Eigen 3.3.*ç‰ˆæœ¬</strong></footer></blockquote>
<p>Eigen 3.3 ç‰ˆæœ¬å¿…é¡»åº”ç”¨aligned_allocatorï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´<strong>å´©æºƒ</strong>ï¼Œå¦‚å‡ºç°åœ°å€æœªå¯¹é½çš„ SIGSEGV é”™è¯¯ã€‚</p>
<p>Eigen 3.4 ç‰ˆæœ¬æ–‡æ¡£è¯´æ˜åœ¨C++17ï¼Œgcc 7/clang 5ä»¥ä¸Šï¼Œç”±ç¼–è¯‘å™¨æå®šå¯¹é½é—®é¢˜: <a target="_blank" rel="noopener" href="https://eigen.tuxfamily.org/dox/group__TopicStructHavingEigenMembers.html">EIGEN_MAKE_ALIGNED_OPERATOR_NEWè¯´æ˜</a>ï¼›<a target="_blank" rel="noopener" href="https://eigen.tuxfamily.org/dox/group__TopicStlContainers.html">aligned_allocatorè¯´æ˜</a>ã€‚</p>
<p>æ³¨æ„ä½¿ç”¨çš„ç‰ˆæœ¬ï¼Œå¹¶æŒ‰å¯¹åº”çš„ç­–ç•¥å®ç°ã€‚</p>
<p><em>æ³¨ï¼š</em></p>
<ol>
<li>EIGEN_MAKE_ALIGNED_OPERATOR_NEW ä¼šé‡è½½å †å†…å­˜æ“ä½œ new/delete , ä½¿ç”¨ Eigen çš„å¯¹é½åˆ†é…å™¨ï¼› æ‰€ä»¥åº”ç”¨ EIGEN_MAKE_ALIGNED_OPERATOR_NEW åï¼Œ è¯¥ç±»(class/struct)è‡ªèº«newå‡ºæ¥çš„Eigen::Vector3d æˆ–è€… std::vector<a href="Eigen::Vector3d">Eigen::Vector3d</a> éƒ½ä¿è¯äº†å†…å­˜å¯¹é½ã€‚</li>
<li>åœ¨ ç±»(class/struct) ä¸­ï¼Œå¦‚æœåº”ç”¨äº† EIGEN_MAKE_ALIGNED_OPERATOR_NEWï¼Œ å¯ä»¥ä¸éœ€è¦å†å¯¹ vector æŒ‡å®š Eigen::aligned_allocator</li>
</ol>
<h2 id="å…­ã€æ˜¾å¼ç±»å‹è½¬æ¢"><a class="header-anchor" href="#å…­ã€æ˜¾å¼ç±»å‹è½¬æ¢"></a>å…­ã€æ˜¾å¼ç±»å‹è½¬æ¢</h2>
<p>é¿å…éšå¼è½¬æ¢ï¼šç»Ÿä¸€æ ‡é‡ç±»å‹ï¼ˆå¦‚å…¨ç”¨ doubleï¼‰ï¼Œæˆ–æ˜¾å¼è½¬æ¢ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">Eigen::Vector2d <span class="title">vd</span><span class="params">(<span class="number">1.0</span>, <span class="number">2.0</span>)</span></span>;</span><br><span class="line">Eigen::Vector2f vf = vd.<span class="built_in">cast</span>&lt;<span class="type">float</span>&gt;();  <span class="comment">// double -&gt; float æ˜¾å¼è½¬æ¢</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼š.cast&lt;&gt;() åªè½¬ç±»å‹ï¼Œä¸æ”¹ç»´åº¦</p>
<h2 id="ä¸ƒã€ç‰¹æ®Šæƒ…å†µ"><a class="header-anchor" href="#ä¸ƒã€ç‰¹æ®Šæƒ…å†µ"></a>ä¸ƒã€ç‰¹æ®Šæƒ…å†µ</h2>
<p>é»˜è®¤åˆ—ä¼˜å…ˆï¼šä¸ Fortran/MATLAB å…¼å®¹ï¼Œä½†ä¸å…¶ä»–åº“äº¤äº’æ—¶æ³¨æ„é¡ºåºã€‚</p>
<h3 id="1-å¦‚æœéœ€è¦è¡Œä¼˜å…ˆå­˜å‚¨ï¼š"><a class="header-anchor" href="#1-å¦‚æœéœ€è¦è¡Œä¼˜å…ˆå­˜å‚¨ï¼š"></a>1. å¦‚æœéœ€è¦è¡Œä¼˜å…ˆå­˜å‚¨ï¼š</h3>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">Eigen::Matrix&lt;<span class="type">float</span>, <span class="number">4</span>, <span class="number">4</span>, Eigen::RowMajor&gt; mat;</span><br><span class="line"><span class="comment">// æ˜ å°„è¡Œä¼˜å…ˆæ•°æ®</span></span><br><span class="line">Eigen::Map&lt;MatrixXd, <span class="number">0</span>, Stride&lt;Dynamic, <span class="number">1</span>&gt;&gt; <span class="built_in">row_major_map</span>(data, rows, cols);</span><br></pre></td></tr></table></figure>
<h3 id="2-å…¼å®¹-CUDA-OpenCV"><a class="header-anchor" href="#2-å…¼å®¹-CUDA-OpenCV"></a>2. å…¼å®¹ CUDA / OpenCV</h3>
<p>Eigen çš„é»˜è®¤å­˜å‚¨é¡ºåºæ˜¯åˆ—ä¸»åº(Colunm-Major), CUDAçš„é»˜è®¤å­˜å‚¨é¡ºåºå’Œ C è¯­è¨€çš„ä¸€è‡´æ˜¯è¡Œä¸»åº(Row-Major)ã€‚CPU ä¸Šçš„ Eigen æ•°æ®å¤åˆ¶åˆ° GPU æ—¶ï¼Œéœ€è¦æ³¨æ„è¡Œåˆ—é¡ºåºã€‚</p>
<p>cuBLAS åº“çš„ API é»˜è®¤ä½¿ç”¨çš„æ˜¯åˆ—ä¸»åºï¼Œè¿™å’Œ Eigen æ˜¯ä¸€è‡´çš„ã€‚åœ¨ä½¿ç”¨ CUDA kernel å’Œ cuBLAS åº“æ—¶éœ€ç‰¹åˆ«æ³¨æ„ï¼Œè¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„é™·é˜±ã€‚</p>
<p>åœ¨å®šä¹‰ Eigen çŸ©é˜µç±»å‹æ—¶æ˜¾å¼æŒ‡å®šè¡Œä¸»åºï¼Œä¿è¯ Eigen çŸ©é˜µçš„å†…å­˜å¸ƒå±€å’Œ CUDA çš„ä¸€è‡´ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">Eigen::Matrix&lt;<span class="type">float</span>, Eigen::Dynamic, Eigen::Dynamic, Eigen::RowMajor&gt; mat;</span><br><span class="line"><span class="built_in">cudaMemcpy</span>(d_ptr, mat.<span class="built_in">data</span>(), rows*cols*<span class="built_in">sizeof</span>(<span class="type">float</span>), cudaMemcpyHostToDevice);</span><br></pre></td></tr></table></figure>
<h2 id="å…«ã€é…å¥—-CMake-ç¼–è¯‘é€‰é¡¹"><a class="header-anchor" href="#å…«ã€é…å¥—-CMake-ç¼–è¯‘é€‰é¡¹"></a>å…«ã€é…å¥— CMake ç¼–è¯‘é€‰é¡¹</h2>
<p>Eigen é»˜è®¤ä¼šå°è¯•ä¸ºæŸäº›ç±»å‹ï¼ˆå¦‚ Vector4f, Matrix&lt;float, 4, 4&gt; ç­‰ï¼‰åš SSE/AVX SIMD å¯¹é½ä¼˜åŒ–ï¼Œæé«˜è®¡ç®—æ•ˆç‡ã€‚</p>
<p>ä½†æ˜¯å¦‚æœä½ åœ¨ æŸäº›ç¼–è¯‘ç¯å¢ƒä¸­ æˆ–ä½¿ç”¨ é™æ€å˜é‡ï¼ˆstaticï¼‰/å…¨å±€å˜é‡ï¼Œè€Œè¿™äº›å˜é‡æ˜¯ Eigen ç±»å‹çš„ï¼Œå°±å¯èƒ½å¼•å‘ alignment é—®é¢˜ï¼ˆä¾‹å¦‚å´©æºƒæˆ–æœªå®šä¹‰è¡Œä¸ºï¼‰</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">add_definitions</span>(-DEIGEN_DONT_ALIGN_STATICALLY=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªå®åªå½±å“é™æ€å˜é‡æ˜¯å¦ä½¿ç”¨å†…å­˜å¯¹é½ã€‚</p>
<p>å®ƒä¸ä¼šå½±å“åŠ¨æ€åˆ†é…çš„ Eigen å¯¹è±¡ï¼ˆå¦‚ new Eigen::Vector3f()ï¼‰ï¼Œè¿™äº›æ˜¯å®‰å…¨çš„ã€‚</p>
<p>å¦‚æœä½ æ²¡æœ‰ä½¿ç”¨é™æ€æˆ–å…¨å±€å˜é‡ï¼Œå°± ä¸è¦å®šä¹‰è¯¥å®ï¼Œä»¥ä¾¿ä¿ç•™æ€§èƒ½ä¼˜åŒ–ã€‚</p>
<h2 id="ä¹ã€ç¼–è¯‘ä¼˜åŒ–"><a class="header-anchor" href="#ä¹ã€ç¼–è¯‘ä¼˜åŒ–"></a>ä¹ã€ç¼–è¯‘ä¼˜åŒ–</h2>
<h3 id="1-ç¼–è¯‘å™¨é€‰é¡¹ï¼š"><a class="header-anchor" href="#1-ç¼–è¯‘å™¨é€‰é¡¹ï¼š"></a>1. ç¼–è¯‘å™¨é€‰é¡¹ï¼š</h3>
<p>é€šè¿‡å¼€å¯ç¼–è¯‘é€‰é¡¹ä¼˜åŒ–æ€§èƒ½ï¼š</p>
<ul>
<li>O3: ç¼–è¯‘å™¨ä¼šè¿›è¡Œå¾ªç¯å±•å¼€ã€å‡½æ•°å†…è”ã€å‘é‡åŒ–ç­‰ä¼˜åŒ–ï¼Œé€šå¸¸èƒ½æ˜¾è‘—æå‡ Eigen çŸ©é˜µè¿ç®—çš„æ€§èƒ½ã€‚</li>
<li>march: å¼€å¯ CPU æ”¯æŒçš„ SIMD æŒ‡ä»¤é›†ï¼Œä»è€Œæå‡ Eigen å†…éƒ¨å‘é‡åŒ–çš„æ•ˆç‡ã€‚</li>
<li>ffast-math:  æ”¾å®½å¯¹ IEEE 754 æµ®ç‚¹æ ‡å‡†çš„ä¸¥æ ¼éµå®ˆï¼Œå…è®¸ç¼–è¯‘å™¨è¿›è¡Œæ¿€è¿›ä¼˜åŒ–ï¼Œæå‡çŸ©é˜µè¿ç®—å’Œæ•°å€¼æ±‚è§£çš„é€Ÿåº¦ã€‚</li>
</ul>
<p>GCC / Clang:</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¿™é‡Œç¤ºä¾‹æ˜¯native, å»ºè®®ä½¿ç”¨å…·ä½“æ¶æ„ï¼Œç‰¹åˆ«æ˜¯äº¤å‰ç¼–è¯‘æ—¶ï¼Œå¦‚x86_64, arm8.2</span></span><br><span class="line">-O3 -march=native -ffast-<span class="keyword">math</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šä¸Šè¿°ç¼–è¯‘é€‰é¡¹ï¼Œæœ‰å¾—æœ‰å¤±ï¼Œæ¯”å¦‚ä½¿ç”¨O3ç”Ÿæˆçš„ä»£ç ä¼šæ›´å¤§ï¼Œç¼–è¯‘æ—¶é—´æ›´é•¿ï¼Œæœ‰æ—¶ä¹Ÿå¯èƒ½è§¦å‘ç¼–è¯‘å™¨çš„ bug æˆ–å¯¼è‡´è°ƒè¯•å›°éš¾ã€‚ä¸€èˆ¬å»ºè®®ç”¨O2å³å¯ï¼Œé™¤éæ€§èƒ½å°¤å…¶é‡è¦æ ¹æ®å®é™…æµ‹è¯•æƒ…å†µæ¥å®šã€‚</p>
<p>ç‰¹åˆ«æŒ‡å‡º Nvidia æ™ºèƒ½é©¾é©¶èŠ¯ç‰‡çš„marchå¦‚ä¸‹ï¼š</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="comment"># arch set</span></span><br><span class="line"><span class="keyword">if</span> (<span class="string">&quot;$&#123;HARDWARE&#125;&quot;</span> <span class="keyword">STREQUAL</span> <span class="string">&quot;orin&quot;</span>)</span><br><span class="line">    <span class="comment">#cpu part 0xd42</span></span><br><span class="line">    <span class="keyword">set</span>(CMAKE_C_FLAGS <span class="string">&quot;$&#123;CMAKE_C_FLAGS&#125; -march=armv8.2-a&quot;</span> -mtune=cortex-a78ae<span class="string">&quot;)</span></span><br><span class="line"><span class="string">    set(CMAKE_CXX_FLAGS &quot;</span><span class="variable">$&#123;CMAKE_CXX_FLAGS&#125;</span> -march=armv8.<span class="number">2</span>-a<span class="string">&quot; -mtune=cortex-a78ae&quot;</span>)</span><br><span class="line"><span class="keyword">elseif</span> (<span class="string">&quot;$&#123;HARDWARE&#125;&quot;</span> <span class="keyword">STREQUAL</span> <span class="string">&quot;thor&quot;</span>)</span><br><span class="line">    <span class="comment">#cpu part 0xd83</span></span><br><span class="line">    <span class="keyword">set</span>(CMAKE_C_FLAGS <span class="string">&quot;$&#123;CMAKE_C_FLAGS&#125; -march=armv9-a&quot;</span> -mtune=neoverse-v3ae<span class="string">&quot;)</span></span><br><span class="line"><span class="string">    set(CMAKE_CXX_FLAGS &quot;</span><span class="variable">$&#123;CMAKE_CXX_FLAGS&#125;</span> -march=armv9-a<span class="string">&quot; -mtune=neoverse-v3ae&quot;</span>)</span><br><span class="line"><span class="keyword">endif</span> ()</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šmtuneå‚æ•°ç”¨äºæ›´ç»†èŠ‚çš„æ¶æ„æè¿°ï¼Œå¯èƒ½æœ‰äº›ç¼–è¯‘å™¨ç‰ˆæœ¬ä¸æ”¯æŒï¼Œå¯ä»¥åˆ é™¤æ‰ã€‚</p>
<h3 id="2-æ£€æŸ¥-SIMD-æ˜¯å¦ç”Ÿæ•ˆ"><a class="header-anchor" href="#2-æ£€æŸ¥-SIMD-æ˜¯å¦ç”Ÿæ•ˆ"></a>2. æ£€æŸ¥ SIMD æ˜¯å¦ç”Ÿæ•ˆ</h3>
<p>CPU æ”¯æŒçš„ SIMD æŒ‡ä»¤é›†æ˜¯å¦ç”Ÿæ•ˆï¼Œå¯ä»¥é€šè¿‡ä»£ç æ¥æ ¡éªŒã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">std::cout &lt;&lt; Eigen::<span class="built_in">SimdInstructionSetsInUse</span>() &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure>
<h2 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://eigen.tuxfamily.org/index.php?title=Main_Page">Eigenå®˜æ–¹æ–‡æ¡£</a></li>
<li><a target="_blank" rel="noopener" href="https://chatgpt.com/">ChatGPT å„ç§ç›¸å…³ prompt çš„å›ç­”</a></li>
</ul>

                <hr>
                

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/blog/2025/09/07/use-ros2-with-high-performance/" data-toggle="tooltip" data-placement="top"
                           title="ROS2é«˜æ€§èƒ½ä½¿ç”¨">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/blog/2025/08/03/devops-for-intelligent-driving/" data-toggle="tooltip" data-placement="top"
                           title="æ™ºèƒ½é©¾é©¶ DevOps">Next Post &rarr;</a>
                    </li>
                    
                </ul>

                

                


                <!--åŠ å…¥æ–°çš„è¯„è®ºç³»ç»Ÿ-->
                

                

                <!--åŠ å…¥æ–°çš„è¯„è®ºç³»ç»Ÿ-->
                
                    <div id="giscus" class="giscus"></div>
                    <script src="https://giscus.app/client.js"
                        data-repo="YYGCui/yygcui.github.com"
                        data-repo-id="MDEwOlJlcG9zaXRvcnkzNjQ0NzEx"
                        data-category="Announcements"
                        data-category-id="DIC_kwDOADedJ84CsxOP"
                        data-mapping="pathname"
                        data-strict="0"
                        data-reactions-enabled="1"
                        data-emit-metadata="0"
                        data-input-position="top"
                        data-theme="noborder_light"
                        data-lang="zh-CN"
                        data-loading="lazy"
                        crossorigin="anonymous"
                        async>
                    </script>
                

            </div>

            <div class="hidden-xs col-sm-3 toc-col">
                <div class="toc-wrap">
                    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%A4%B4%E6%96%87%E5%8C%85%E5%90%AB%E8%A6%81%E6%B1%82"><span class="toc-text">ä¸€ã€å¤´æ–‡åŒ…å«è¦æ±‚</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E7%B1%BB%E5%9E%8B%E9%80%89%E6%8B%A9%E5%92%8C%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">äºŒã€ç±»å‹é€‰æ‹©å’Œåˆå§‹åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%98%E5%85%88%E9%80%89%E6%8B%A9%E5%9B%BA%E5%AE%9A%E5%A4%A7%E5%B0%8F%E7%9F%A9%E9%98%B5%EF%BC%9A"><span class="toc-text">ä¼˜å…ˆé€‰æ‹©å›ºå®šå¤§å°çŸ©é˜µï¼š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">åˆå§‹åŒ–</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92"><span class="toc-text">ä¸‰ã€å‚æ•°ä¼ é€’</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96"><span class="toc-text">å››ã€æ€§èƒ½ä¼˜åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%81%BF%E5%85%8D%E4%BD%BF%E7%94%A8%E5%8A%A8%E6%80%81%E5%A4%A7%E5%B0%8F%E7%9F%A9%E9%98%B5%E5%A4%84%E7%90%86%E5%B0%8F%E7%BB%B4%E5%BA%A6%E7%9F%A9%E9%98%B5"><span class="toc-text">1. é¿å…ä½¿ç”¨åŠ¨æ€å¤§å°çŸ©é˜µå¤„ç†å°ç»´åº¦çŸ©é˜µ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%81%BF%E5%85%8D%E4%B8%B4%E6%97%B6%E7%89%A9%E4%BB%B6"><span class="toc-text">2. é¿å…ä¸´æ—¶ç‰©ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%88%A9%E7%94%A8%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%A8%A1%E6%9D%BF"><span class="toc-text">3. åˆ©ç”¨è¡¨è¾¾å¼æ¨¡æ¿</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E4%BD%BF%E7%94%A8-noalias-%E9%98%B2%E6%AD%A2%E5%A4%9A%E4%BD%99%E5%86%85%E5%AD%98%E6%8B%B7%E8%B4%9D"><span class="toc-text">4. ä½¿ç”¨ .noalias() é˜²æ­¢å¤šä½™å†…å­˜æ‹·è´</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E9%81%BF%E5%85%8D%E7%9B%B4%E6%8E%A5%E5%8F%8D%E7%9F%A9%E9%98%B5"><span class="toc-text">5. é¿å…ç›´æ¥åçŸ©é˜µ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E6%95%B0%E6%8D%AE%E6%98%A0%E5%B0%84%E4%B8%8E%E9%9B%B6%E6%8B%B7%E8%B4%9D"><span class="toc-text">6. æ•°æ®æ˜ å°„ä¸é›¶æ‹·è´</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E9%80%90%E5%85%83%E7%B4%A0%E6%93%8D%E4%BD%9C%E4%BC%98%E5%8C%96"><span class="toc-text">7. é€å…ƒç´ æ“ä½œä¼˜åŒ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E5%A4%8D%E5%90%88%E8%B5%8B%E5%80%BC%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-text">8. å¤åˆèµ‹å€¼è¿ç®—ç¬¦</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E5%B9%B6%E8%A1%8C%E5%8C%96%E5%8A%A0%E9%80%9F"><span class="toc-text">9. å¹¶è¡ŒåŒ–åŠ é€Ÿ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E5%B8%A6%E5%AE%9E%E4%BD%93%E7%BB%93%E6%9E%84%E5%92%8C-STL-%E5%AD%97%E6%AE%B5"><span class="toc-text">äº”ã€å¸¦å®ä½“ç»“æ„å’Œ STL å­—æ®µ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E4%BD%93%E7%BB%93%E6%9E%84%E5%8A%A0%E5%AF%B9%E9%BD%90%E6%93%8D%E4%BD%9C%E7%A8%8B%E5%BA%8F"><span class="toc-text">å®ä½“ç»“æ„åŠ å¯¹é½æ“ä½œç¨‹åº</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E7%94%A8-aligned-allocator"><span class="toc-text">åº”ç”¨ aligned allocator</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E6%98%BE%E5%BC%8F%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="toc-text">å…­ã€æ˜¾å¼ç±»å‹è½¬æ¢</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E7%89%B9%E6%AE%8A%E6%83%85%E5%86%B5"><span class="toc-text">ä¸ƒã€ç‰¹æ®Šæƒ…å†µ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%A6%82%E6%9E%9C%E9%9C%80%E8%A6%81%E8%A1%8C%E4%BC%98%E5%85%88%E5%AD%98%E5%82%A8%EF%BC%9A"><span class="toc-text">1. å¦‚æœéœ€è¦è¡Œä¼˜å…ˆå­˜å‚¨ï¼š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%85%BC%E5%AE%B9-CUDA-OpenCV"><span class="toc-text">2. å…¼å®¹ CUDA &#x2F; OpenCV</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E9%85%8D%E5%A5%97-CMake-%E7%BC%96%E8%AF%91%E9%80%89%E9%A1%B9"><span class="toc-text">å…«ã€é…å¥— CMake ç¼–è¯‘é€‰é¡¹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%9D%E3%80%81%E7%BC%96%E8%AF%91%E4%BC%98%E5%8C%96"><span class="toc-text">ä¹ã€ç¼–è¯‘ä¼˜åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%BC%96%E8%AF%91%E5%99%A8%E9%80%89%E9%A1%B9%EF%BC%9A"><span class="toc-text">1. ç¼–è¯‘å™¨é€‰é¡¹ï¼š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%A3%80%E6%9F%A5-SIMD-%E6%98%AF%E5%90%A6%E7%94%9F%E6%95%88"><span class="toc-text">2. æ£€æŸ¥ SIMD æ˜¯å¦ç”Ÿæ•ˆ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5"><span class="toc-text">å‚è€ƒé“¾æ¥</span></a></li></ol>
                </div>
            </div>
        </div>

        <div class="row">
            <!-- Sidebar Container -->

            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5 class="text-center">
                        <a href="/tags/">FEATURED TAGS</a>
                    </h5>
                    <div class="tags">
                        
                        <a class="tag" href="/tags/æ™ºèƒ½é©¾é©¶/"
                           title="æ™ºèƒ½é©¾é©¶">æ™ºèƒ½é©¾é©¶</a>
                        
                        <a class="tag" href="/tags/æ€§èƒ½ä¼˜åŒ–/"
                           title="æ€§èƒ½ä¼˜åŒ–">æ€§èƒ½ä¼˜åŒ–</a>
                        
                        <a class="tag" href="/tags/Eigen/"
                           title="Eigen">Eigen</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
            </div>
        </div>

    </div>
</article>







<!-- Footer -->
<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 text-center">
                <br>
                <ul class="list-inline text-center">
                
                
                
                    <li>
                        <a target="_blank" href="https://www.zhihu.com/people/cui-yan-bao">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa  fa-stack-1x fa-inverse">çŸ¥</i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank" href="http://weibo.com/yygccui">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                
                    <li>
                        <a target="_blank"  href="https://github.com/YYGCui">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank"  href="https://www.linkedin.com/in/yanbaoc">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; YYGCui 2025
                    <br>
                    <span id="busuanzi_container_site_pv" style="font-size: 12px;">PV: <span id="busuanzi_value_site_pv"></span> Times</span>
                    <span id="busuanzi_container_site_uv" style="font-size: 12px;">, UV: <span id="busuanzi_value_site_uv"></span> Times</span>
                    <br>
                    Theme by <a target="_blank" rel="noopener" href="https://haojen.github.io/">Haojen Ma</a>, improved by <a target="_blank" rel="noopener" href="https://www.cuicc.com/">YYGCui</a>
                </p>

            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->

<script src="/js/jquery.min.js"></script>


<!-- Bootstrap Core JavaScript -->

<script src="/js/bootstrap.min.js"></script>


<!-- Custom Theme JavaScript -->

<script src="/js/blog.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>



<!-- Google Analytics -->


<script async src="https://www.googletagmanager.com/gtag/js?id=G-GC4BHEPT9T"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-GC4BHEPT9T');
</script>


<!-- Baidu Tongji -->


<!-- swiftype -->
<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','','2.0.0');
</script>

<script defer src="https://vercount.one/js"></script>

<!--wechat title img-->
<img class="wechat-title-img" src="/images/yygcui.png">
</body>

</html>
